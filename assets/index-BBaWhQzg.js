var Sv=Object.defineProperty;var Nv=(e,t,r)=>t in e?Sv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var $r=(e,t,r)=>Nv(e,typeof t!="symbol"?t+"":t,r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function op(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _v(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var s=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return e[n]}})}),r}var lp={exports:{}},ql={},cp={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Li=Symbol.for("react.element"),Ev=Symbol.for("react.portal"),Tv=Symbol.for("react.fragment"),Cv=Symbol.for("react.strict_mode"),Dv=Symbol.for("react.profiler"),Pv=Symbol.for("react.provider"),Av=Symbol.for("react.context"),Ov=Symbol.for("react.forward_ref"),Lv=Symbol.for("react.suspense"),Iv=Symbol.for("react.memo"),Rv=Symbol.for("react.lazy"),Ff=Symbol.iterator;function $v(e){return e===null||typeof e!="object"?null:(e=Ff&&e[Ff]||e["@@iterator"],typeof e=="function"?e:null)}var up={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dp=Object.assign,hp={};function sa(e,t,r){this.props=e,this.context=t,this.refs=hp,this.updater=r||up}sa.prototype.isReactComponent={};sa.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};sa.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fp(){}fp.prototype=sa.prototype;function ah(e,t,r){this.props=e,this.context=t,this.refs=hp,this.updater=r||up}var ih=ah.prototype=new fp;ih.constructor=ah;dp(ih,sa.prototype);ih.isPureReactComponent=!0;var Wf=Array.isArray,mp=Object.prototype.hasOwnProperty,oh={current:null},gp={key:!0,ref:!0,__self:!0,__source:!0};function pp(e,t,r){var n,s={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)mp.call(t,n)&&!gp.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Li,type:e,key:a,ref:o,props:s,_owner:oh.current}}function Mv(e,t){return{$$typeof:Li,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Li}function Fv(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Uf=/\/+/g;function Nc(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fv(""+e.key):t.toString(36)}function Fo(e,t,r,n,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Li:case Ev:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+Nc(o,0):n,Wf(s)?(r="",e!=null&&(r=e.replace(Uf,"$&/")+"/"),Fo(s,t,r,"",function(u){return u})):s!=null&&(lh(s)&&(s=Mv(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Uf,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",Wf(e))for(var l=0;l<e.length;l++){a=e[l];var c=n+Nc(a,l);o+=Fo(a,t,r,c,s)}else if(c=$v(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=n+Nc(a,l++),o+=Fo(a,t,r,c,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ro(e,t,r){if(e==null)return e;var n=[],s=0;return Fo(e,n,"","",function(a){return t.call(r,a,s++)}),n}function Wv(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nt={current:null},Wo={transition:null},Uv={ReactCurrentDispatcher:nt,ReactCurrentBatchConfig:Wo,ReactCurrentOwner:oh};function yp(){throw Error("act(...) is not supported in production builds of React.")}J.Children={map:ro,forEach:function(e,t,r){ro(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ro(e,function(){t++}),t},toArray:function(e){return ro(e,function(t){return t})||[]},only:function(e){if(!lh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};J.Component=sa;J.Fragment=Tv;J.Profiler=Dv;J.PureComponent=ah;J.StrictMode=Cv;J.Suspense=Lv;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uv;J.act=yp;J.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=dp({},e.props),s=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=oh.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)mp.call(t,c)&&!gp.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Li,type:e.type,key:s,ref:a,props:n,_owner:o}};J.createContext=function(e){return e={$$typeof:Av,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Pv,_context:e},e.Consumer=e};J.createElement=pp;J.createFactory=function(e){var t=pp.bind(null,e);return t.type=e,t};J.createRef=function(){return{current:null}};J.forwardRef=function(e){return{$$typeof:Ov,render:e}};J.isValidElement=lh;J.lazy=function(e){return{$$typeof:Rv,_payload:{_status:-1,_result:e},_init:Wv}};J.memo=function(e,t){return{$$typeof:Iv,type:e,compare:t===void 0?null:t}};J.startTransition=function(e){var t=Wo.transition;Wo.transition={};try{e()}finally{Wo.transition=t}};J.unstable_act=yp;J.useCallback=function(e,t){return nt.current.useCallback(e,t)};J.useContext=function(e){return nt.current.useContext(e)};J.useDebugValue=function(){};J.useDeferredValue=function(e){return nt.current.useDeferredValue(e)};J.useEffect=function(e,t){return nt.current.useEffect(e,t)};J.useId=function(){return nt.current.useId()};J.useImperativeHandle=function(e,t,r){return nt.current.useImperativeHandle(e,t,r)};J.useInsertionEffect=function(e,t){return nt.current.useInsertionEffect(e,t)};J.useLayoutEffect=function(e,t){return nt.current.useLayoutEffect(e,t)};J.useMemo=function(e,t){return nt.current.useMemo(e,t)};J.useReducer=function(e,t,r){return nt.current.useReducer(e,t,r)};J.useRef=function(e){return nt.current.useRef(e)};J.useState=function(e){return nt.current.useState(e)};J.useSyncExternalStore=function(e,t,r){return nt.current.useSyncExternalStore(e,t,r)};J.useTransition=function(){return nt.current.useTransition()};J.version="18.3.1";cp.exports=J;var k=cp.exports;const xp=op(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv=k,Bv=Symbol.for("react.element"),Gv=Symbol.for("react.fragment"),qv=Object.prototype.hasOwnProperty,Kv=zv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hv={key:!0,ref:!0,__self:!0,__source:!0};function vp(e,t,r){var n,s={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)qv.call(t,n)&&!Hv.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:Bv,type:e,key:a,ref:o,props:s,_owner:Kv.current}}ql.Fragment=Gv;ql.jsx=vp;ql.jsxs=vp;lp.exports=ql;var i=lp.exports,Su={},wp={exports:{}},kt={},bp={exports:{}},kp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,M){var U=O.length;O.push(M);e:for(;0<U;){var X=U-1>>>1,se=O[X];if(0<s(se,M))O[X]=M,O[U]=se,U=X;else break e}}function r(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var M=O[0],U=O.pop();if(U!==M){O[0]=U;e:for(var X=0,se=O.length,Xt=se>>>1;X<Xt;){var Rt=2*(X+1)-1,os=O[Rt],or=Rt+1,ls=O[or];if(0>s(os,U))or<se&&0>s(ls,os)?(O[X]=ls,O[or]=U,X=or):(O[X]=os,O[Rt]=U,X=Rt);else if(or<se&&0>s(ls,U))O[X]=ls,O[or]=U,X=or;else break e}}return M}function s(O,M){var U=O.sortIndex-M.sortIndex;return U!==0?U:O.id-M.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,m=!1,x=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var M=r(u);M!==null;){if(M.callback===null)n(u);else if(M.startTime<=O)n(u),M.sortIndex=M.expirationTime,t(c,M);else break;M=r(u)}}function b(O){if(y=!1,v(O),!x)if(r(c)!==null)x=!0,we(j);else{var M=r(u);M!==null&&z(b,M.startTime-O)}}function j(O,M){x=!1,y&&(y=!1,g(_),_=-1),m=!0;var U=h;try{for(v(M),f=r(c);f!==null&&(!(f.expirationTime>M)||O&&!C());){var X=f.callback;if(typeof X=="function"){f.callback=null,h=f.priorityLevel;var se=X(f.expirationTime<=M);M=e.unstable_now(),typeof se=="function"?f.callback=se:f===r(c)&&n(c),v(M)}else n(c);f=r(c)}if(f!==null)var Xt=!0;else{var Rt=r(u);Rt!==null&&z(b,Rt.startTime-M),Xt=!1}return Xt}finally{f=null,h=U,m=!1}}var S=!1,N=null,_=-1,E=5,P=-1;function C(){return!(e.unstable_now()-P<E)}function A(){if(N!==null){var O=e.unstable_now();P=O;var M=!0;try{M=N(!0,O)}finally{M?Y():(S=!1,N=null)}}else S=!1}var Y;if(typeof p=="function")Y=function(){p(A)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,_e=H.port2;H.port1.onmessage=A,Y=function(){_e.postMessage(null)}}else Y=function(){w(A,0)};function we(O){N=O,S||(S=!0,Y())}function z(O,M){_=w(function(){O(e.unstable_now())},M)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){x||m||(x=!0,we(j))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(O){switch(h){case 1:case 2:case 3:var M=3;break;default:M=h}var U=h;h=M;try{return O()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,M){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var U=h;h=O;try{return M()}finally{h=U}},e.unstable_scheduleCallback=function(O,M,U){var X=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?X+U:X):U=X,O){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=U+se,O={id:d++,callback:M,priorityLevel:O,startTime:U,expirationTime:se,sortIndex:-1},U>X?(O.sortIndex=U,t(u,O),r(c)===null&&O===r(u)&&(y?(g(_),_=-1):y=!0,z(b,U-X))):(O.sortIndex=se,t(c,O),x||m||(x=!0,we(j))),O},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(O){var M=h;return function(){var U=h;h=M;try{return O.apply(this,arguments)}finally{h=U}}}})(kp);bp.exports=kp;var Vv=bp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv=k,vt=Vv;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var jp=new Set,ai={};function ts(e,t){Hs(e,t),Hs(e+"Capture",t)}function Hs(e,t){for(ai[e]=t,e=0;e<t.length;e++)jp.add(t[e])}var Tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nu=Object.prototype.hasOwnProperty,Qv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zf={},Bf={};function Jv(e){return Nu.call(Bf,e)?!0:Nu.call(zf,e)?!1:Qv.test(e)?Bf[e]=!0:(zf[e]=!0,!1)}function Xv(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Zv(e,t,r,n){if(t===null||typeof t>"u"||Xv(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function st(e,t,r,n,s,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Be[e]=new st(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Be[t]=new st(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Be[e]=new st(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Be[e]=new st(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Be[e]=new st(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Be[e]=new st(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Be[e]=new st(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Be[e]=new st(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Be[e]=new st(e,5,!1,e.toLowerCase(),null,!1,!1)});var ch=/[\-:]([a-z])/g;function uh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ch,uh);Be[t]=new st(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ch,uh);Be[t]=new st(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ch,uh);Be[t]=new st(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Be[e]=new st(e,1,!1,e.toLowerCase(),null,!1,!1)});Be.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Be[e]=new st(e,1,!1,e.toLowerCase(),null,!0,!0)});function dh(e,t,r,n){var s=Be.hasOwnProperty(t)?Be[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Zv(t,r,s,n)&&(r=null),n||s===null?Jv(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Rr=Yv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,no=Symbol.for("react.element"),bs=Symbol.for("react.portal"),ks=Symbol.for("react.fragment"),hh=Symbol.for("react.strict_mode"),_u=Symbol.for("react.profiler"),Sp=Symbol.for("react.provider"),Np=Symbol.for("react.context"),fh=Symbol.for("react.forward_ref"),Eu=Symbol.for("react.suspense"),Tu=Symbol.for("react.suspense_list"),mh=Symbol.for("react.memo"),Kr=Symbol.for("react.lazy"),_p=Symbol.for("react.offscreen"),Gf=Symbol.iterator;function ma(e){return e===null||typeof e!="object"?null:(e=Gf&&e[Gf]||e["@@iterator"],typeof e=="function"?e:null)}var je=Object.assign,_c;function Pa(e){if(_c===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);_c=t&&t[1]||""}return`
`+_c+e}var Ec=!1;function Tc(e,t){if(!e||Ec)return"";Ec=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),a=n.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{Ec=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Pa(e):""}function ew(e){switch(e.tag){case 5:return Pa(e.type);case 16:return Pa("Lazy");case 13:return Pa("Suspense");case 19:return Pa("SuspenseList");case 0:case 2:case 15:return e=Tc(e.type,!1),e;case 11:return e=Tc(e.type.render,!1),e;case 1:return e=Tc(e.type,!0),e;default:return""}}function Cu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ks:return"Fragment";case bs:return"Portal";case _u:return"Profiler";case hh:return"StrictMode";case Eu:return"Suspense";case Tu:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Np:return(e.displayName||"Context")+".Consumer";case Sp:return(e._context.displayName||"Context")+".Provider";case fh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mh:return t=e.displayName||null,t!==null?t:Cu(e.type)||"Memo";case Kr:t=e._payload,e=e._init;try{return Cu(e(t))}catch{}}return null}function tw(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cu(t);case 8:return t===hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function hn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ep(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function rw(e){var t=Ep(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function so(e){e._valueTracker||(e._valueTracker=rw(e))}function Tp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Ep(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function il(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Du(e,t){var r=t.checked;return je({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function qf(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=hn(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Cp(e,t){t=t.checked,t!=null&&dh(e,"checked",t,!1)}function Pu(e,t){Cp(e,t);var r=hn(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Au(e,t.type,r):t.hasOwnProperty("defaultValue")&&Au(e,t.type,hn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Kf(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Au(e,t,r){(t!=="number"||il(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Aa=Array.isArray;function Ls(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+hn(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function Ou(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return je({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Hf(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(D(92));if(Aa(r)){if(1<r.length)throw Error(D(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:hn(r)}}function Dp(e,t){var r=hn(t.value),n=hn(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Vf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Pp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ao,Ap=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ao=ao||document.createElement("div"),ao.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ao.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ii(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Ma={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nw=["Webkit","ms","Moz","O"];Object.keys(Ma).forEach(function(e){nw.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Ma[t]=Ma[e]})});function Op(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Ma.hasOwnProperty(e)&&Ma[e]?(""+t).trim():t+"px"}function Lp(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=Op(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var sw=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iu(e,t){if(t){if(sw[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Ru(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $u=null;function gh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Mu=null,Is=null,Rs=null;function Yf(e){if(e=$i(e)){if(typeof Mu!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Ql(t),Mu(e.stateNode,e.type,t))}}function Ip(e){Is?Rs?Rs.push(e):Rs=[e]:Is=e}function Rp(){if(Is){var e=Is,t=Rs;if(Rs=Is=null,Yf(e),t)for(e=0;e<t.length;e++)Yf(t[e])}}function $p(e,t){return e(t)}function Mp(){}var Cc=!1;function Fp(e,t,r){if(Cc)return e(t,r);Cc=!0;try{return $p(e,t,r)}finally{Cc=!1,(Is!==null||Rs!==null)&&(Mp(),Rp())}}function oi(e,t){var r=e.stateNode;if(r===null)return null;var n=Ql(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(D(231,t,typeof r));return r}var Fu=!1;if(Tr)try{var ga={};Object.defineProperty(ga,"passive",{get:function(){Fu=!0}}),window.addEventListener("test",ga,ga),window.removeEventListener("test",ga,ga)}catch{Fu=!1}function aw(e,t,r,n,s,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Fa=!1,ol=null,ll=!1,Wu=null,iw={onError:function(e){Fa=!0,ol=e}};function ow(e,t,r,n,s,a,o,l,c){Fa=!1,ol=null,aw.apply(iw,arguments)}function lw(e,t,r,n,s,a,o,l,c){if(ow.apply(this,arguments),Fa){if(Fa){var u=ol;Fa=!1,ol=null}else throw Error(D(198));ll||(ll=!0,Wu=u)}}function rs(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Wp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qf(e){if(rs(e)!==e)throw Error(D(188))}function cw(e){var t=e.alternate;if(!t){if(t=rs(e),t===null)throw Error(D(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return Qf(s),e;if(a===n)return Qf(s),t;a=a.sibling}throw Error(D(188))}if(r.return!==n.return)r=s,n=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=a;break}if(l===n){o=!0,n=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,n=s;break}if(l===n){o=!0,n=a,r=s;break}l=l.sibling}if(!o)throw Error(D(189))}}if(r.alternate!==n)throw Error(D(190))}if(r.tag!==3)throw Error(D(188));return r.stateNode.current===r?e:t}function Up(e){return e=cw(e),e!==null?zp(e):null}function zp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=zp(e);if(t!==null)return t;e=e.sibling}return null}var Bp=vt.unstable_scheduleCallback,Jf=vt.unstable_cancelCallback,uw=vt.unstable_shouldYield,dw=vt.unstable_requestPaint,Te=vt.unstable_now,hw=vt.unstable_getCurrentPriorityLevel,ph=vt.unstable_ImmediatePriority,Gp=vt.unstable_UserBlockingPriority,cl=vt.unstable_NormalPriority,fw=vt.unstable_LowPriority,qp=vt.unstable_IdlePriority,Kl=null,sr=null;function mw(e){if(sr&&typeof sr.onCommitFiberRoot=="function")try{sr.onCommitFiberRoot(Kl,e,void 0,(e.current.flags&128)===128)}catch{}}var qt=Math.clz32?Math.clz32:yw,gw=Math.log,pw=Math.LN2;function yw(e){return e>>>=0,e===0?32:31-(gw(e)/pw|0)|0}var io=64,oo=4194304;function Oa(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ul(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Oa(l):(a&=o,a!==0&&(n=Oa(a)))}else o=r&~s,o!==0?n=Oa(o):a!==0&&(n=Oa(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-qt(t),s=1<<r,n|=e[r],t&=~s;return n}function xw(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vw(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-qt(a),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=xw(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function Uu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Kp(){var e=io;return io<<=1,!(io&4194240)&&(io=64),e}function Dc(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ii(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-qt(t),e[t]=r}function ww(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-qt(r),a=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~a}}function yh(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-qt(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var ne=0;function Hp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vp,xh,Yp,Qp,Jp,zu=!1,lo=[],rn=null,nn=null,sn=null,li=new Map,ci=new Map,Qr=[],bw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xf(e,t){switch(e){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":nn=null;break;case"mouseover":case"mouseout":sn=null;break;case"pointerover":case"pointerout":li.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ci.delete(t.pointerId)}}function pa(e,t,r,n,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},t!==null&&(t=$i(t),t!==null&&xh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function kw(e,t,r,n,s){switch(t){case"focusin":return rn=pa(rn,e,t,r,n,s),!0;case"dragenter":return nn=pa(nn,e,t,r,n,s),!0;case"mouseover":return sn=pa(sn,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return li.set(a,pa(li.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,ci.set(a,pa(ci.get(a)||null,e,t,r,n,s)),!0}return!1}function Xp(e){var t=Ln(e.target);if(t!==null){var r=rs(t);if(r!==null){if(t=r.tag,t===13){if(t=Wp(r),t!==null){e.blockedOn=t,Jp(e.priority,function(){Yp(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Uo(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Bu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$u=n,r.target.dispatchEvent(n),$u=null}else return t=$i(r),t!==null&&xh(t),e.blockedOn=r,!1;t.shift()}return!0}function Zf(e,t,r){Uo(e)&&r.delete(t)}function jw(){zu=!1,rn!==null&&Uo(rn)&&(rn=null),nn!==null&&Uo(nn)&&(nn=null),sn!==null&&Uo(sn)&&(sn=null),li.forEach(Zf),ci.forEach(Zf)}function ya(e,t){e.blockedOn===t&&(e.blockedOn=null,zu||(zu=!0,vt.unstable_scheduleCallback(vt.unstable_NormalPriority,jw)))}function ui(e){function t(s){return ya(s,e)}if(0<lo.length){ya(lo[0],e);for(var r=1;r<lo.length;r++){var n=lo[r];n.blockedOn===e&&(n.blockedOn=null)}}for(rn!==null&&ya(rn,e),nn!==null&&ya(nn,e),sn!==null&&ya(sn,e),li.forEach(t),ci.forEach(t),r=0;r<Qr.length;r++)n=Qr[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Qr.length&&(r=Qr[0],r.blockedOn===null);)Xp(r),r.blockedOn===null&&Qr.shift()}var $s=Rr.ReactCurrentBatchConfig,dl=!0;function Sw(e,t,r,n){var s=ne,a=$s.transition;$s.transition=null;try{ne=1,vh(e,t,r,n)}finally{ne=s,$s.transition=a}}function Nw(e,t,r,n){var s=ne,a=$s.transition;$s.transition=null;try{ne=4,vh(e,t,r,n)}finally{ne=s,$s.transition=a}}function vh(e,t,r,n){if(dl){var s=Bu(e,t,r,n);if(s===null)Wc(e,t,n,hl,r),Xf(e,n);else if(kw(s,e,t,r,n))n.stopPropagation();else if(Xf(e,n),t&4&&-1<bw.indexOf(e)){for(;s!==null;){var a=$i(s);if(a!==null&&Vp(a),a=Bu(e,t,r,n),a===null&&Wc(e,t,n,hl,r),a===s)break;s=a}s!==null&&n.stopPropagation()}else Wc(e,t,n,null,r)}}var hl=null;function Bu(e,t,r,n){if(hl=null,e=gh(n),e=Ln(e),e!==null)if(t=rs(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Wp(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return hl=e,null}function Zp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hw()){case ph:return 1;case Gp:return 4;case cl:case fw:return 16;case qp:return 536870912;default:return 16}default:return 16}}var en=null,wh=null,zo=null;function ey(){if(zo)return zo;var e,t=wh,r=t.length,n,s="value"in en?en.value:en.textContent,a=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[a-n];n++);return zo=s.slice(e,1<n?1-n:void 0)}function Bo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function co(){return!0}function em(){return!1}function jt(e){function t(r,n,s,a,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?co:em,this.isPropagationStopped=em,this}return je(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=co)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=co)},persist:function(){},isPersistent:co}),t}var aa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bh=jt(aa),Ri=je({},aa,{view:0,detail:0}),_w=jt(Ri),Pc,Ac,xa,Hl=je({},Ri,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==xa&&(xa&&e.type==="mousemove"?(Pc=e.screenX-xa.screenX,Ac=e.screenY-xa.screenY):Ac=Pc=0,xa=e),Pc)},movementY:function(e){return"movementY"in e?e.movementY:Ac}}),tm=jt(Hl),Ew=je({},Hl,{dataTransfer:0}),Tw=jt(Ew),Cw=je({},Ri,{relatedTarget:0}),Oc=jt(Cw),Dw=je({},aa,{animationName:0,elapsedTime:0,pseudoElement:0}),Pw=jt(Dw),Aw=je({},aa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ow=jt(Aw),Lw=je({},aa,{data:0}),rm=jt(Lw),Iw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$w={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mw(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$w[e])?!!t[e]:!1}function kh(){return Mw}var Fw=je({},Ri,{key:function(e){if(e.key){var t=Iw[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Bo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Rw[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kh,charCode:function(e){return e.type==="keypress"?Bo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Bo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ww=jt(Fw),Uw=je({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nm=jt(Uw),zw=je({},Ri,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kh}),Bw=jt(zw),Gw=je({},aa,{propertyName:0,elapsedTime:0,pseudoElement:0}),qw=jt(Gw),Kw=je({},Hl,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Hw=jt(Kw),Vw=[9,13,27,32],jh=Tr&&"CompositionEvent"in window,Wa=null;Tr&&"documentMode"in document&&(Wa=document.documentMode);var Yw=Tr&&"TextEvent"in window&&!Wa,ty=Tr&&(!jh||Wa&&8<Wa&&11>=Wa),sm=" ",am=!1;function ry(e,t){switch(e){case"keyup":return Vw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ny(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var js=!1;function Qw(e,t){switch(e){case"compositionend":return ny(t);case"keypress":return t.which!==32?null:(am=!0,sm);case"textInput":return e=t.data,e===sm&&am?null:e;default:return null}}function Jw(e,t){if(js)return e==="compositionend"||!jh&&ry(e,t)?(e=ey(),zo=wh=en=null,js=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ty&&t.locale!=="ko"?null:t.data;default:return null}}var Xw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function im(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Xw[e.type]:t==="textarea"}function sy(e,t,r,n){Ip(n),t=fl(t,"onChange"),0<t.length&&(r=new bh("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Ua=null,di=null;function Zw(e){gy(e,0)}function Vl(e){var t=_s(e);if(Tp(t))return e}function eb(e,t){if(e==="change")return t}var ay=!1;if(Tr){var Lc;if(Tr){var Ic="oninput"in document;if(!Ic){var om=document.createElement("div");om.setAttribute("oninput","return;"),Ic=typeof om.oninput=="function"}Lc=Ic}else Lc=!1;ay=Lc&&(!document.documentMode||9<document.documentMode)}function lm(){Ua&&(Ua.detachEvent("onpropertychange",iy),di=Ua=null)}function iy(e){if(e.propertyName==="value"&&Vl(di)){var t=[];sy(t,di,e,gh(e)),Fp(Zw,t)}}function tb(e,t,r){e==="focusin"?(lm(),Ua=t,di=r,Ua.attachEvent("onpropertychange",iy)):e==="focusout"&&lm()}function rb(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vl(di)}function nb(e,t){if(e==="click")return Vl(t)}function sb(e,t){if(e==="input"||e==="change")return Vl(t)}function ab(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Vt=typeof Object.is=="function"?Object.is:ab;function hi(e,t){if(Vt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Nu.call(t,s)||!Vt(e[s],t[s]))return!1}return!0}function cm(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function um(e,t){var r=cm(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cm(r)}}function oy(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?oy(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ly(){for(var e=window,t=il();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=il(e.document)}return t}function Sh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ib(e){var t=ly(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&oy(r.ownerDocument.documentElement,r)){if(n!==null&&Sh(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,a=Math.min(n.start,s);n=n.end===void 0?a:Math.min(n.end,s),!e.extend&&a>n&&(s=n,n=a,a=s),s=um(r,a);var o=um(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ob=Tr&&"documentMode"in document&&11>=document.documentMode,Ss=null,Gu=null,za=null,qu=!1;function dm(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qu||Ss==null||Ss!==il(n)||(n=Ss,"selectionStart"in n&&Sh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),za&&hi(za,n)||(za=n,n=fl(Gu,"onSelect"),0<n.length&&(t=new bh("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Ss)))}function uo(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ns={animationend:uo("Animation","AnimationEnd"),animationiteration:uo("Animation","AnimationIteration"),animationstart:uo("Animation","AnimationStart"),transitionend:uo("Transition","TransitionEnd")},Rc={},cy={};Tr&&(cy=document.createElement("div").style,"AnimationEvent"in window||(delete Ns.animationend.animation,delete Ns.animationiteration.animation,delete Ns.animationstart.animation),"TransitionEvent"in window||delete Ns.transitionend.transition);function Yl(e){if(Rc[e])return Rc[e];if(!Ns[e])return e;var t=Ns[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in cy)return Rc[e]=t[r];return e}var uy=Yl("animationend"),dy=Yl("animationiteration"),hy=Yl("animationstart"),fy=Yl("transitionend"),my=new Map,hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xn(e,t){my.set(e,t),ts(t,[e])}for(var $c=0;$c<hm.length;$c++){var Mc=hm[$c],lb=Mc.toLowerCase(),cb=Mc[0].toUpperCase()+Mc.slice(1);xn(lb,"on"+cb)}xn(uy,"onAnimationEnd");xn(dy,"onAnimationIteration");xn(hy,"onAnimationStart");xn("dblclick","onDoubleClick");xn("focusin","onFocus");xn("focusout","onBlur");xn(fy,"onTransitionEnd");Hs("onMouseEnter",["mouseout","mouseover"]);Hs("onMouseLeave",["mouseout","mouseover"]);Hs("onPointerEnter",["pointerout","pointerover"]);Hs("onPointerLeave",["pointerout","pointerover"]);ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ts("onBeforeInput",["compositionend","keypress","textInput","paste"]);ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ub=new Set("cancel close invalid load scroll toggle".split(" ").concat(La));function fm(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,lw(n,t,void 0,e),e.currentTarget=null}function gy(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&s.isPropagationStopped())break e;fm(s,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&s.isPropagationStopped())break e;fm(s,l,u),a=c}}}if(ll)throw e=Wu,ll=!1,Wu=null,e}function ue(e,t){var r=t[Qu];r===void 0&&(r=t[Qu]=new Set);var n=e+"__bubble";r.has(n)||(py(t,e,2,!1),r.add(n))}function Fc(e,t,r){var n=0;t&&(n|=4),py(r,e,n,t)}var ho="_reactListening"+Math.random().toString(36).slice(2);function fi(e){if(!e[ho]){e[ho]=!0,jp.forEach(function(r){r!=="selectionchange"&&(ub.has(r)||Fc(r,!1,e),Fc(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ho]||(t[ho]=!0,Fc("selectionchange",!1,t))}}function py(e,t,r,n){switch(Zp(t)){case 1:var s=Sw;break;case 4:s=Nw;break;default:s=vh}r=s.bind(null,t,r,e),s=void 0,!Fu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function Wc(e,t,r,n,s){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ln(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Fp(function(){var u=a,d=gh(r),f=[];e:{var h=my.get(e);if(h!==void 0){var m=bh,x=e;switch(e){case"keypress":if(Bo(r)===0)break e;case"keydown":case"keyup":m=Ww;break;case"focusin":x="focus",m=Oc;break;case"focusout":x="blur",m=Oc;break;case"beforeblur":case"afterblur":m=Oc;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=tm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Tw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Bw;break;case uy:case dy:case hy:m=Pw;break;case fy:m=qw;break;case"scroll":m=_w;break;case"wheel":m=Hw;break;case"copy":case"cut":case"paste":m=Ow;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=nm}var y=(t&4)!==0,w=!y&&e==="scroll",g=y?h!==null?h+"Capture":null:h;y=[];for(var p=u,v;p!==null;){v=p;var b=v.stateNode;if(v.tag===5&&b!==null&&(v=b,g!==null&&(b=oi(p,g),b!=null&&y.push(mi(p,b,v)))),w)break;p=p.return}0<y.length&&(h=new m(h,x,null,r,d),f.push({event:h,listeners:y}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",m=e==="mouseout"||e==="pointerout",h&&r!==$u&&(x=r.relatedTarget||r.fromElement)&&(Ln(x)||x[Cr]))break e;if((m||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,m?(x=r.relatedTarget||r.toElement,m=u,x=x?Ln(x):null,x!==null&&(w=rs(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(m=null,x=u),m!==x)){if(y=tm,b="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(y=nm,b="onPointerLeave",g="onPointerEnter",p="pointer"),w=m==null?h:_s(m),v=x==null?h:_s(x),h=new y(b,p+"leave",m,r,d),h.target=w,h.relatedTarget=v,b=null,Ln(d)===u&&(y=new y(g,p+"enter",x,r,d),y.target=v,y.relatedTarget=w,b=y),w=b,m&&x)t:{for(y=m,g=x,p=0,v=y;v;v=cs(v))p++;for(v=0,b=g;b;b=cs(b))v++;for(;0<p-v;)y=cs(y),p--;for(;0<v-p;)g=cs(g),v--;for(;p--;){if(y===g||g!==null&&y===g.alternate)break t;y=cs(y),g=cs(g)}y=null}else y=null;m!==null&&mm(f,h,m,y,!1),x!==null&&w!==null&&mm(f,w,x,y,!0)}}e:{if(h=u?_s(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var j=eb;else if(im(h))if(ay)j=sb;else{j=rb;var S=tb}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(j=nb);if(j&&(j=j(e,u))){sy(f,j,r,d);break e}S&&S(e,h,u),e==="focusout"&&(S=h._wrapperState)&&S.controlled&&h.type==="number"&&Au(h,"number",h.value)}switch(S=u?_s(u):window,e){case"focusin":(im(S)||S.contentEditable==="true")&&(Ss=S,Gu=u,za=null);break;case"focusout":za=Gu=Ss=null;break;case"mousedown":qu=!0;break;case"contextmenu":case"mouseup":case"dragend":qu=!1,dm(f,r,d);break;case"selectionchange":if(ob)break;case"keydown":case"keyup":dm(f,r,d)}var N;if(jh)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else js?ry(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(ty&&r.locale!=="ko"&&(js||_!=="onCompositionStart"?_==="onCompositionEnd"&&js&&(N=ey()):(en=d,wh="value"in en?en.value:en.textContent,js=!0)),S=fl(u,_),0<S.length&&(_=new rm(_,e,null,r,d),f.push({event:_,listeners:S}),N?_.data=N:(N=ny(r),N!==null&&(_.data=N)))),(N=Yw?Qw(e,r):Jw(e,r))&&(u=fl(u,"onBeforeInput"),0<u.length&&(d=new rm("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=N))}gy(f,t)})}function mi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function fl(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=oi(e,r),a!=null&&n.unshift(mi(e,a,s)),a=oi(e,t),a!=null&&n.push(mi(e,a,s))),e=e.return}return n}function cs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function mm(e,t,r,n,s){for(var a=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,s?(c=oi(r,a),c!=null&&o.unshift(mi(r,c,l))):s||(c=oi(r,a),c!=null&&o.push(mi(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var db=/\r\n?/g,hb=/\u0000|\uFFFD/g;function gm(e){return(typeof e=="string"?e:""+e).replace(db,`
`).replace(hb,"")}function fo(e,t,r){if(t=gm(t),gm(e)!==t&&r)throw Error(D(425))}function ml(){}var Ku=null,Hu=null;function Vu(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Yu=typeof setTimeout=="function"?setTimeout:void 0,fb=typeof clearTimeout=="function"?clearTimeout:void 0,pm=typeof Promise=="function"?Promise:void 0,mb=typeof queueMicrotask=="function"?queueMicrotask:typeof pm<"u"?function(e){return pm.resolve(null).then(e).catch(gb)}:Yu;function gb(e){setTimeout(function(){throw e})}function Uc(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),ui(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ui(t)}function an(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ym(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ia=Math.random().toString(36).slice(2),nr="__reactFiber$"+ia,gi="__reactProps$"+ia,Cr="__reactContainer$"+ia,Qu="__reactEvents$"+ia,pb="__reactListeners$"+ia,yb="__reactHandles$"+ia;function Ln(e){var t=e[nr];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Cr]||r[nr]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=ym(e);e!==null;){if(r=e[nr])return r;e=ym(e)}return t}e=r,r=e.parentNode}return null}function $i(e){return e=e[nr]||e[Cr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function _s(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Ql(e){return e[gi]||null}var Ju=[],Es=-1;function vn(e){return{current:e}}function pe(e){0>Es||(e.current=Ju[Es],Ju[Es]=null,Es--)}function oe(e,t){Es++,Ju[Es]=e.current,e.current=t}var fn={},Qe=vn(fn),ut=vn(!1),Hn=fn;function Vs(e,t){var r=e.type.contextTypes;if(!r)return fn;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function dt(e){return e=e.childContextTypes,e!=null}function gl(){pe(ut),pe(Qe)}function xm(e,t,r){if(Qe.current!==fn)throw Error(D(168));oe(Qe,t),oe(ut,r)}function yy(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(D(108,tw(e)||"Unknown",s));return je({},r,n)}function pl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||fn,Hn=Qe.current,oe(Qe,e),oe(ut,ut.current),!0}function vm(e,t,r){var n=e.stateNode;if(!n)throw Error(D(169));r?(e=yy(e,t,Hn),n.__reactInternalMemoizedMergedChildContext=e,pe(ut),pe(Qe),oe(Qe,e)):pe(ut),oe(ut,r)}var gr=null,Jl=!1,zc=!1;function xy(e){gr===null?gr=[e]:gr.push(e)}function xb(e){Jl=!0,xy(e)}function wn(){if(!zc&&gr!==null){zc=!0;var e=0,t=ne;try{var r=gr;for(ne=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}gr=null,Jl=!1}catch(s){throw gr!==null&&(gr=gr.slice(e+1)),Bp(ph,wn),s}finally{ne=t,zc=!1}}return null}var Ts=[],Cs=0,yl=null,xl=0,Nt=[],_t=0,Vn=null,xr=1,vr="";function Tn(e,t){Ts[Cs++]=xl,Ts[Cs++]=yl,yl=e,xl=t}function vy(e,t,r){Nt[_t++]=xr,Nt[_t++]=vr,Nt[_t++]=Vn,Vn=e;var n=xr;e=vr;var s=32-qt(n)-1;n&=~(1<<s),r+=1;var a=32-qt(t)+s;if(30<a){var o=s-s%5;a=(n&(1<<o)-1).toString(32),n>>=o,s-=o,xr=1<<32-qt(t)+s|r<<s|n,vr=a+e}else xr=1<<a|r<<s|n,vr=e}function Nh(e){e.return!==null&&(Tn(e,1),vy(e,1,0))}function _h(e){for(;e===yl;)yl=Ts[--Cs],Ts[Cs]=null,xl=Ts[--Cs],Ts[Cs]=null;for(;e===Vn;)Vn=Nt[--_t],Nt[_t]=null,vr=Nt[--_t],Nt[_t]=null,xr=Nt[--_t],Nt[_t]=null}var xt=null,yt=null,ve=!1,Bt=null;function wy(e,t){var r=Et(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function wm(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xt=e,yt=an(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xt=e,yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Vn!==null?{id:xr,overflow:vr}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Et(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,xt=e,yt=null,!0):!1;default:return!1}}function Xu(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zu(e){if(ve){var t=yt;if(t){var r=t;if(!wm(e,t)){if(Xu(e))throw Error(D(418));t=an(r.nextSibling);var n=xt;t&&wm(e,t)?wy(n,r):(e.flags=e.flags&-4097|2,ve=!1,xt=e)}}else{if(Xu(e))throw Error(D(418));e.flags=e.flags&-4097|2,ve=!1,xt=e}}}function bm(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xt=e}function mo(e){if(e!==xt)return!1;if(!ve)return bm(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vu(e.type,e.memoizedProps)),t&&(t=yt)){if(Xu(e))throw by(),Error(D(418));for(;t;)wy(e,t),t=an(t.nextSibling)}if(bm(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){yt=an(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}yt=null}}else yt=xt?an(e.stateNode.nextSibling):null;return!0}function by(){for(var e=yt;e;)e=an(e.nextSibling)}function Ys(){yt=xt=null,ve=!1}function Eh(e){Bt===null?Bt=[e]:Bt.push(e)}var vb=Rr.ReactCurrentBatchConfig;function va(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(D(309));var n=r.stateNode}if(!n)throw Error(D(147,e));var s=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(D(284));if(!r._owner)throw Error(D(290,e))}return e}function go(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function km(e){var t=e._init;return t(e._payload)}function ky(e){function t(g,p){if(e){var v=g.deletions;v===null?(g.deletions=[p],g.flags|=16):v.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function s(g,p){return g=un(g,p),g.index=0,g.sibling=null,g}function a(g,p,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<p?(g.flags|=2,p):v):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function l(g,p,v,b){return p===null||p.tag!==6?(p=Yc(v,g.mode,b),p.return=g,p):(p=s(p,v),p.return=g,p)}function c(g,p,v,b){var j=v.type;return j===ks?d(g,p,v.props.children,b,v.key):p!==null&&(p.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Kr&&km(j)===p.type)?(b=s(p,v.props),b.ref=va(g,p,v),b.return=g,b):(b=Qo(v.type,v.key,v.props,null,g.mode,b),b.ref=va(g,p,v),b.return=g,b)}function u(g,p,v,b){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Qc(v,g.mode,b),p.return=g,p):(p=s(p,v.children||[]),p.return=g,p)}function d(g,p,v,b,j){return p===null||p.tag!==7?(p=Bn(v,g.mode,b,j),p.return=g,p):(p=s(p,v),p.return=g,p)}function f(g,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Yc(""+p,g.mode,v),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case no:return v=Qo(p.type,p.key,p.props,null,g.mode,v),v.ref=va(g,null,p),v.return=g,v;case bs:return p=Qc(p,g.mode,v),p.return=g,p;case Kr:var b=p._init;return f(g,b(p._payload),v)}if(Aa(p)||ma(p))return p=Bn(p,g.mode,v,null),p.return=g,p;go(g,p)}return null}function h(g,p,v,b){var j=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return j!==null?null:l(g,p,""+v,b);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case no:return v.key===j?c(g,p,v,b):null;case bs:return v.key===j?u(g,p,v,b):null;case Kr:return j=v._init,h(g,p,j(v._payload),b)}if(Aa(v)||ma(v))return j!==null?null:d(g,p,v,b,null);go(g,v)}return null}function m(g,p,v,b,j){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(v)||null,l(p,g,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case no:return g=g.get(b.key===null?v:b.key)||null,c(p,g,b,j);case bs:return g=g.get(b.key===null?v:b.key)||null,u(p,g,b,j);case Kr:var S=b._init;return m(g,p,v,S(b._payload),j)}if(Aa(b)||ma(b))return g=g.get(v)||null,d(p,g,b,j,null);go(p,b)}return null}function x(g,p,v,b){for(var j=null,S=null,N=p,_=p=0,E=null;N!==null&&_<v.length;_++){N.index>_?(E=N,N=null):E=N.sibling;var P=h(g,N,v[_],b);if(P===null){N===null&&(N=E);break}e&&N&&P.alternate===null&&t(g,N),p=a(P,p,_),S===null?j=P:S.sibling=P,S=P,N=E}if(_===v.length)return r(g,N),ve&&Tn(g,_),j;if(N===null){for(;_<v.length;_++)N=f(g,v[_],b),N!==null&&(p=a(N,p,_),S===null?j=N:S.sibling=N,S=N);return ve&&Tn(g,_),j}for(N=n(g,N);_<v.length;_++)E=m(N,g,_,v[_],b),E!==null&&(e&&E.alternate!==null&&N.delete(E.key===null?_:E.key),p=a(E,p,_),S===null?j=E:S.sibling=E,S=E);return e&&N.forEach(function(C){return t(g,C)}),ve&&Tn(g,_),j}function y(g,p,v,b){var j=ma(v);if(typeof j!="function")throw Error(D(150));if(v=j.call(v),v==null)throw Error(D(151));for(var S=j=null,N=p,_=p=0,E=null,P=v.next();N!==null&&!P.done;_++,P=v.next()){N.index>_?(E=N,N=null):E=N.sibling;var C=h(g,N,P.value,b);if(C===null){N===null&&(N=E);break}e&&N&&C.alternate===null&&t(g,N),p=a(C,p,_),S===null?j=C:S.sibling=C,S=C,N=E}if(P.done)return r(g,N),ve&&Tn(g,_),j;if(N===null){for(;!P.done;_++,P=v.next())P=f(g,P.value,b),P!==null&&(p=a(P,p,_),S===null?j=P:S.sibling=P,S=P);return ve&&Tn(g,_),j}for(N=n(g,N);!P.done;_++,P=v.next())P=m(N,g,_,P.value,b),P!==null&&(e&&P.alternate!==null&&N.delete(P.key===null?_:P.key),p=a(P,p,_),S===null?j=P:S.sibling=P,S=P);return e&&N.forEach(function(A){return t(g,A)}),ve&&Tn(g,_),j}function w(g,p,v,b){if(typeof v=="object"&&v!==null&&v.type===ks&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case no:e:{for(var j=v.key,S=p;S!==null;){if(S.key===j){if(j=v.type,j===ks){if(S.tag===7){r(g,S.sibling),p=s(S,v.props.children),p.return=g,g=p;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Kr&&km(j)===S.type){r(g,S.sibling),p=s(S,v.props),p.ref=va(g,S,v),p.return=g,g=p;break e}r(g,S);break}else t(g,S);S=S.sibling}v.type===ks?(p=Bn(v.props.children,g.mode,b,v.key),p.return=g,g=p):(b=Qo(v.type,v.key,v.props,null,g.mode,b),b.ref=va(g,p,v),b.return=g,g=b)}return o(g);case bs:e:{for(S=v.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){r(g,p.sibling),p=s(p,v.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=Qc(v,g.mode,b),p.return=g,g=p}return o(g);case Kr:return S=v._init,w(g,p,S(v._payload),b)}if(Aa(v))return x(g,p,v,b);if(ma(v))return y(g,p,v,b);go(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(r(g,p.sibling),p=s(p,v),p.return=g,g=p):(r(g,p),p=Yc(v,g.mode,b),p.return=g,g=p),o(g)):r(g,p)}return w}var Qs=ky(!0),jy=ky(!1),vl=vn(null),wl=null,Ds=null,Th=null;function Ch(){Th=Ds=wl=null}function Dh(e){var t=vl.current;pe(vl),e._currentValue=t}function ed(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Ms(e,t){wl=e,Th=Ds=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ct=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(Th!==e)if(e={context:e,memoizedValue:t,next:null},Ds===null){if(wl===null)throw Error(D(308));Ds=e,wl.dependencies={lanes:0,firstContext:e}}else Ds=Ds.next=e;return t}var In=null;function Ph(e){In===null?In=[e]:In.push(e)}function Sy(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,Ph(t)):(r.next=s.next,s.next=r),t.interleaved=r,Dr(e,n)}function Dr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Hr=!1;function Ah(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ny(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function on(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Z&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Dr(e,r)}return s=n.interleaved,s===null?(t.next=t,Ph(n)):(t.next=s.next,s.next=t),n.interleaved=t,Dr(e,r)}function Go(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,yh(e,r)}}function jm(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=t:a=a.next=t}else s=a=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bl(e,t,r,n){var s=e.updateQueue;Hr=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(a!==null){var f=s.baseState;o=0,d=u=c=null,l=a;do{var h=l.lane,m=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=e,y=l;switch(h=t,m=r,y.tag){case 1:if(x=y.payload,typeof x=="function"){f=x.call(m,f,h);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,h=typeof x=="function"?x.call(m,f,h):x,h==null)break e;f=je({},f,h);break e;case 2:Hr=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=s.effects,h===null?s.effects=[l]:h.push(l))}else m={eventTime:m,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=m,c=f):d=d.next=m,o|=h;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;h=l,l=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(d===null&&(c=f),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Qn|=o,e.lanes=o,e.memoizedState=f}}function Sm(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(D(191,s));s.call(n)}}}var Mi={},ar=vn(Mi),pi=vn(Mi),yi=vn(Mi);function Rn(e){if(e===Mi)throw Error(D(174));return e}function Oh(e,t){switch(oe(yi,t),oe(pi,e),oe(ar,Mi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Lu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Lu(t,e)}pe(ar),oe(ar,t)}function Js(){pe(ar),pe(pi),pe(yi)}function _y(e){Rn(yi.current);var t=Rn(ar.current),r=Lu(t,e.type);t!==r&&(oe(pi,e),oe(ar,r))}function Lh(e){pi.current===e&&(pe(ar),pe(pi))}var be=vn(0);function kl(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bc=[];function Ih(){for(var e=0;e<Bc.length;e++)Bc[e]._workInProgressVersionPrimary=null;Bc.length=0}var qo=Rr.ReactCurrentDispatcher,Gc=Rr.ReactCurrentBatchConfig,Yn=0,ke=null,Ae=null,Re=null,jl=!1,Ba=!1,xi=0,wb=0;function qe(){throw Error(D(321))}function Rh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Vt(e[r],t[r]))return!1;return!0}function $h(e,t,r,n,s,a){if(Yn=a,ke=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,qo.current=e===null||e.memoizedState===null?Sb:Nb,e=r(n,s),Ba){a=0;do{if(Ba=!1,xi=0,25<=a)throw Error(D(301));a+=1,Re=Ae=null,t.updateQueue=null,qo.current=_b,e=r(n,s)}while(Ba)}if(qo.current=Sl,t=Ae!==null&&Ae.next!==null,Yn=0,Re=Ae=ke=null,jl=!1,t)throw Error(D(300));return e}function Mh(){var e=xi!==0;return xi=0,e}function er(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Re===null?ke.memoizedState=Re=e:Re=Re.next=e,Re}function At(){if(Ae===null){var e=ke.alternate;e=e!==null?e.memoizedState:null}else e=Ae.next;var t=Re===null?ke.memoizedState:Re.next;if(t!==null)Re=t,Ae=e;else{if(e===null)throw Error(D(310));Ae=e,e={memoizedState:Ae.memoizedState,baseState:Ae.baseState,baseQueue:Ae.baseQueue,queue:Ae.queue,next:null},Re===null?ke.memoizedState=Re=e:Re=Re.next=e}return Re}function vi(e,t){return typeof t=="function"?t(e):t}function qc(e){var t=At(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=Ae,s=n.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}n.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,n=n.baseState;var l=o=null,c=null,u=a;do{var d=u.lane;if((Yn&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,ke.lanes|=d,Qn|=d}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,Vt(n,t.memoizedState)||(ct=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do a=s.lane,ke.lanes|=a,Qn|=a,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Kc(e){var t=At(),r=t.queue;if(r===null)throw Error(D(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,a=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=e(a,o.action),o=o.next;while(o!==s);Vt(a,t.memoizedState)||(ct=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Ey(){}function Ty(e,t){var r=ke,n=At(),s=t(),a=!Vt(n.memoizedState,s);if(a&&(n.memoizedState=s,ct=!0),n=n.queue,Fh(Py.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Re!==null&&Re.memoizedState.tag&1){if(r.flags|=2048,wi(9,Dy.bind(null,r,n,s,t),void 0,null),$e===null)throw Error(D(349));Yn&30||Cy(r,t,s)}return s}function Cy(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Dy(e,t,r,n){t.value=r,t.getSnapshot=n,Ay(t)&&Oy(e)}function Py(e,t,r){return r(function(){Ay(t)&&Oy(e)})}function Ay(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Vt(e,r)}catch{return!0}}function Oy(e){var t=Dr(e,1);t!==null&&Kt(t,e,1,-1)}function Nm(e){var t=er();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:e},t.queue=e,e=e.dispatch=jb.bind(null,ke,e),[t.memoizedState,e]}function wi(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=ke.updateQueue,t===null?(t={lastEffect:null,stores:null},ke.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ly(){return At().memoizedState}function Ko(e,t,r,n){var s=er();ke.flags|=e,s.memoizedState=wi(1|t,r,void 0,n===void 0?null:n)}function Xl(e,t,r,n){var s=At();n=n===void 0?null:n;var a=void 0;if(Ae!==null){var o=Ae.memoizedState;if(a=o.destroy,n!==null&&Rh(n,o.deps)){s.memoizedState=wi(t,r,a,n);return}}ke.flags|=e,s.memoizedState=wi(1|t,r,a,n)}function _m(e,t){return Ko(8390656,8,e,t)}function Fh(e,t){return Xl(2048,8,e,t)}function Iy(e,t){return Xl(4,2,e,t)}function Ry(e,t){return Xl(4,4,e,t)}function $y(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function My(e,t,r){return r=r!=null?r.concat([e]):null,Xl(4,4,$y.bind(null,t,e),r)}function Wh(){}function Fy(e,t){var r=At();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Rh(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Wy(e,t){var r=At();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Rh(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Uy(e,t,r){return Yn&21?(Vt(r,t)||(r=Kp(),ke.lanes|=r,Qn|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ct=!0),e.memoizedState=r)}function bb(e,t){var r=ne;ne=r!==0&&4>r?r:4,e(!0);var n=Gc.transition;Gc.transition={};try{e(!1),t()}finally{ne=r,Gc.transition=n}}function zy(){return At().memoizedState}function kb(e,t,r){var n=cn(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},By(e))Gy(t,r);else if(r=Sy(e,t,r,n),r!==null){var s=tt();Kt(r,e,n,s),qy(r,t,n)}}function jb(e,t,r){var n=cn(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(By(e))Gy(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,Vt(l,o)){var c=t.interleaved;c===null?(s.next=s,Ph(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=Sy(e,t,s,n),r!==null&&(s=tt(),Kt(r,e,n,s),qy(r,t,n))}}function By(e){var t=e.alternate;return e===ke||t!==null&&t===ke}function Gy(e,t){Ba=jl=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qy(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,yh(e,r)}}var Sl={readContext:Pt,useCallback:qe,useContext:qe,useEffect:qe,useImperativeHandle:qe,useInsertionEffect:qe,useLayoutEffect:qe,useMemo:qe,useReducer:qe,useRef:qe,useState:qe,useDebugValue:qe,useDeferredValue:qe,useTransition:qe,useMutableSource:qe,useSyncExternalStore:qe,useId:qe,unstable_isNewReconciler:!1},Sb={readContext:Pt,useCallback:function(e,t){return er().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:_m,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ko(4194308,4,$y.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ko(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ko(4,2,e,t)},useMemo:function(e,t){var r=er();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=er();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=kb.bind(null,ke,e),[n.memoizedState,e]},useRef:function(e){var t=er();return e={current:e},t.memoizedState=e},useState:Nm,useDebugValue:Wh,useDeferredValue:function(e){return er().memoizedState=e},useTransition:function(){var e=Nm(!1),t=e[0];return e=bb.bind(null,e[1]),er().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=ke,s=er();if(ve){if(r===void 0)throw Error(D(407));r=r()}else{if(r=t(),$e===null)throw Error(D(349));Yn&30||Cy(n,t,r)}s.memoizedState=r;var a={value:r,getSnapshot:t};return s.queue=a,_m(Py.bind(null,n,a,e),[e]),n.flags|=2048,wi(9,Dy.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=er(),t=$e.identifierPrefix;if(ve){var r=vr,n=xr;r=(n&~(1<<32-qt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=xi++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=wb++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Nb={readContext:Pt,useCallback:Fy,useContext:Pt,useEffect:Fh,useImperativeHandle:My,useInsertionEffect:Iy,useLayoutEffect:Ry,useMemo:Wy,useReducer:qc,useRef:Ly,useState:function(){return qc(vi)},useDebugValue:Wh,useDeferredValue:function(e){var t=At();return Uy(t,Ae.memoizedState,e)},useTransition:function(){var e=qc(vi)[0],t=At().memoizedState;return[e,t]},useMutableSource:Ey,useSyncExternalStore:Ty,useId:zy,unstable_isNewReconciler:!1},_b={readContext:Pt,useCallback:Fy,useContext:Pt,useEffect:Fh,useImperativeHandle:My,useInsertionEffect:Iy,useLayoutEffect:Ry,useMemo:Wy,useReducer:Kc,useRef:Ly,useState:function(){return Kc(vi)},useDebugValue:Wh,useDeferredValue:function(e){var t=At();return Ae===null?t.memoizedState=e:Uy(t,Ae.memoizedState,e)},useTransition:function(){var e=Kc(vi)[0],t=At().memoizedState;return[e,t]},useMutableSource:Ey,useSyncExternalStore:Ty,useId:zy,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=je({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function td(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:je({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Zl={isMounted:function(e){return(e=e._reactInternals)?rs(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=tt(),s=cn(e),a=kr(n,s);a.payload=t,r!=null&&(a.callback=r),t=on(e,a,s),t!==null&&(Kt(t,e,s,n),Go(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=tt(),s=cn(e),a=kr(n,s);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=on(e,a,s),t!==null&&(Kt(t,e,s,n),Go(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=tt(),n=cn(e),s=kr(r,n);s.tag=2,t!=null&&(s.callback=t),t=on(e,s,n),t!==null&&(Kt(t,e,n,r),Go(t,e,n))}};function Em(e,t,r,n,s,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!hi(r,n)||!hi(s,a):!0}function Ky(e,t,r){var n=!1,s=fn,a=t.contextType;return typeof a=="object"&&a!==null?a=Pt(a):(s=dt(t)?Hn:Qe.current,n=t.contextTypes,a=(n=n!=null)?Vs(e,s):fn),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Zl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function Tm(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Zl.enqueueReplaceState(t,t.state,null)}function rd(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},Ah(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=Pt(a):(a=dt(t)?Hn:Qe.current,s.context=Vs(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(td(e,t,a,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&Zl.enqueueReplaceState(s,s.state,null),bl(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function Xs(e,t){try{var r="",n=t;do r+=ew(n),n=n.return;while(n);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function Hc(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function nd(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Eb=typeof WeakMap=="function"?WeakMap:Map;function Hy(e,t,r){r=kr(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){_l||(_l=!0,fd=n),nd(e,t)},r}function Vy(e,t,r){r=kr(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){nd(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){nd(e,t),typeof n!="function"&&(ln===null?ln=new Set([this]):ln.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Cm(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Eb;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=Ub.bind(null,e,t,r),t.then(e,e))}function Dm(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Pm(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=kr(-1,1),t.tag=2,on(r,t,1))),r.lanes|=1),e)}var Tb=Rr.ReactCurrentOwner,ct=!1;function Ze(e,t,r,n){t.child=e===null?jy(t,null,r,n):Qs(t,e.child,r,n)}function Am(e,t,r,n,s){r=r.render;var a=t.ref;return Ms(t,s),n=$h(e,t,r,n,a,s),r=Mh(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pr(e,t,s)):(ve&&r&&Nh(t),t.flags|=1,Ze(e,t,n,s),t.child)}function Om(e,t,r,n,s){if(e===null){var a=r.type;return typeof a=="function"&&!Vh(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Yy(e,t,a,n,s)):(e=Qo(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:hi,r(o,n)&&e.ref===t.ref)return Pr(e,t,s)}return t.flags|=1,e=un(a,n),e.ref=t.ref,e.return=t,t.child=e}function Yy(e,t,r,n,s){if(e!==null){var a=e.memoizedProps;if(hi(a,n)&&e.ref===t.ref)if(ct=!1,t.pendingProps=n=a,(e.lanes&s)!==0)e.flags&131072&&(ct=!0);else return t.lanes=e.lanes,Pr(e,t,s)}return sd(e,t,r,n,s)}function Qy(e,t,r){var n=t.pendingProps,s=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},oe(As,pt),pt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,oe(As,pt),pt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,oe(As,pt),pt|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,oe(As,pt),pt|=n;return Ze(e,t,s,r),t.child}function Jy(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sd(e,t,r,n,s){var a=dt(r)?Hn:Qe.current;return a=Vs(t,a),Ms(t,s),r=$h(e,t,r,n,a,s),n=Mh(),e!==null&&!ct?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Pr(e,t,s)):(ve&&n&&Nh(t),t.flags|=1,Ze(e,t,r,s),t.child)}function Lm(e,t,r,n,s){if(dt(r)){var a=!0;pl(t)}else a=!1;if(Ms(t,s),t.stateNode===null)Ho(e,t),Ky(t,r,n),rd(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Pt(u):(u=dt(r)?Hn:Qe.current,u=Vs(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&Tm(t,o,n,u),Hr=!1;var h=t.memoizedState;o.state=h,bl(t,n,o,s),c=t.memoizedState,l!==n||h!==c||ut.current||Hr?(typeof d=="function"&&(td(t,r,d,n),c=t.memoizedState),(l=Hr||Em(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Ny(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:Wt(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Pt(c):(c=dt(r)?Hn:Qe.current,c=Vs(t,c));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&Tm(t,o,n,c),Hr=!1,h=t.memoizedState,o.state=h,bl(t,n,o,s);var x=t.memoizedState;l!==f||h!==x||ut.current||Hr?(typeof m=="function"&&(td(t,r,m,n),x=t.memoizedState),(u=Hr||Em(t,r,u,n,h,x,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,x,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,x,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=x),o.props=n,o.state=x,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return ad(e,t,r,n,a,s)}function ad(e,t,r,n,s,a){Jy(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&vm(t,r,!1),Pr(e,t,a);n=t.stateNode,Tb.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Qs(t,e.child,null,a),t.child=Qs(t,null,l,a)):Ze(e,t,l,a),t.memoizedState=n.state,s&&vm(t,r,!0),t.child}function Xy(e){var t=e.stateNode;t.pendingContext?xm(e,t.pendingContext,t.pendingContext!==t.context):t.context&&xm(e,t.context,!1),Oh(e,t.containerInfo)}function Im(e,t,r,n,s){return Ys(),Eh(s),t.flags|=256,Ze(e,t,r,n),t.child}var id={dehydrated:null,treeContext:null,retryLane:0};function od(e){return{baseLanes:e,cachePool:null,transitions:null}}function Zy(e,t,r){var n=t.pendingProps,s=be.current,a=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),oe(be,s&1),e===null)return Zu(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=rc(o,n,0,null),e=Bn(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=od(r),t.memoizedState=id,e):Uh(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Cb(e,t,o,n,l,s,r);if(a){a=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=un(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=un(l,a):(a=Bn(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?od(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=id,n}return a=e.child,e=a.sibling,n=un(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Uh(e,t){return t=rc({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function po(e,t,r,n){return n!==null&&Eh(n),Qs(t,e.child,null,r),e=Uh(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Cb(e,t,r,n,s,a,o){if(r)return t.flags&256?(t.flags&=-257,n=Hc(Error(D(422))),po(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,s=t.mode,n=rc({mode:"visible",children:n.children},s,0,null),a=Bn(a,s,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Qs(t,e.child,null,o),t.child.memoizedState=od(o),t.memoizedState=id,a);if(!(t.mode&1))return po(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(D(419)),n=Hc(a,n,void 0),po(e,t,o,n)}if(l=(o&e.childLanes)!==0,ct||l){if(n=$e,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Dr(e,s),Kt(n,e,s,-1))}return Hh(),n=Hc(Error(D(421))),po(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=zb.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,yt=an(s.nextSibling),xt=t,ve=!0,Bt=null,e!==null&&(Nt[_t++]=xr,Nt[_t++]=vr,Nt[_t++]=Vn,xr=e.id,vr=e.overflow,Vn=t),t=Uh(t,n.children),t.flags|=4096,t)}function Rm(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ed(e.return,t,r)}function Vc(e,t,r,n,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=s)}function e0(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;if(Ze(e,t,n.children,r),n=be.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rm(e,r,t);else if(e.tag===19)Rm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(oe(be,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&kl(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),Vc(t,!1,s,r,a);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&kl(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}Vc(t,!0,r,null,a);break;case"together":Vc(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Pr(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Qn|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,r=un(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=un(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Db(e,t,r){switch(t.tag){case 3:Xy(t),Ys();break;case 5:_y(t);break;case 1:dt(t.type)&&pl(t);break;case 4:Oh(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;oe(vl,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(oe(be,be.current&1),t.flags|=128,null):r&t.child.childLanes?Zy(e,t,r):(oe(be,be.current&1),e=Pr(e,t,r),e!==null?e.sibling:null);oe(be,be.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return e0(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),oe(be,be.current),n)break;return null;case 22:case 23:return t.lanes=0,Qy(e,t,r)}return Pr(e,t,r)}var t0,ld,r0,n0;t0=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ld=function(){};r0=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,Rn(ar.current);var a=null;switch(r){case"input":s=Du(e,s),n=Du(e,n),a=[];break;case"select":s=je({},s,{value:void 0}),n=je({},n,{value:void 0}),a=[];break;case"textarea":s=Ou(e,s),n=Ou(e,n),a=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=ml)}Iu(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(ai.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(a||(a=[]),a.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(ai.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&ue("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};n0=function(e,t,r,n){r!==n&&(t.flags|=4)};function wa(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ke(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Pb(e,t,r){var n=t.pendingProps;switch(_h(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ke(t),null;case 1:return dt(t.type)&&gl(),Ke(t),null;case 3:return n=t.stateNode,Js(),pe(ut),pe(Qe),Ih(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(mo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Bt!==null&&(pd(Bt),Bt=null))),ld(e,t),Ke(t),null;case 5:Lh(t);var s=Rn(yi.current);if(r=t.type,e!==null&&t.stateNode!=null)r0(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(D(166));return Ke(t),null}if(e=Rn(ar.current),mo(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[nr]=t,n[gi]=a,e=(t.mode&1)!==0,r){case"dialog":ue("cancel",n),ue("close",n);break;case"iframe":case"object":case"embed":ue("load",n);break;case"video":case"audio":for(s=0;s<La.length;s++)ue(La[s],n);break;case"source":ue("error",n);break;case"img":case"image":case"link":ue("error",n),ue("load",n);break;case"details":ue("toggle",n);break;case"input":qf(n,a),ue("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},ue("invalid",n);break;case"textarea":Hf(n,a),ue("invalid",n)}Iu(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&fo(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&fo(n.textContent,l,e),s=["children",""+l]):ai.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ue("scroll",n)}switch(r){case"input":so(n),Kf(n,a,!0);break;case"textarea":so(n),Vf(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=ml)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Pp(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[nr]=t,e[gi]=n,t0(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ru(r,n),r){case"dialog":ue("cancel",e),ue("close",e),s=n;break;case"iframe":case"object":case"embed":ue("load",e),s=n;break;case"video":case"audio":for(s=0;s<La.length;s++)ue(La[s],e);s=n;break;case"source":ue("error",e),s=n;break;case"img":case"image":case"link":ue("error",e),ue("load",e),s=n;break;case"details":ue("toggle",e),s=n;break;case"input":qf(e,n),s=Du(e,n),ue("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=je({},n,{value:void 0}),ue("invalid",e);break;case"textarea":Hf(e,n),s=Ou(e,n),ue("invalid",e);break;default:s=n}Iu(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Lp(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ap(e,c)):a==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&ii(e,c):typeof c=="number"&&ii(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ai.hasOwnProperty(a)?c!=null&&a==="onScroll"&&ue("scroll",e):c!=null&&dh(e,a,c,o))}switch(r){case"input":so(e),Kf(e,n,!1);break;case"textarea":so(e),Vf(e);break;case"option":n.value!=null&&e.setAttribute("value",""+hn(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Ls(e,!!n.multiple,a,!1):n.defaultValue!=null&&Ls(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=ml)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ke(t),null;case 6:if(e&&t.stateNode!=null)n0(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(D(166));if(r=Rn(yi.current),Rn(ar.current),mo(t)){if(n=t.stateNode,r=t.memoizedProps,n[nr]=t,(a=n.nodeValue!==r)&&(e=xt,e!==null))switch(e.tag){case 3:fo(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&fo(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[nr]=t,t.stateNode=n}return Ke(t),null;case 13:if(pe(be),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&yt!==null&&t.mode&1&&!(t.flags&128))by(),Ys(),t.flags|=98560,a=!1;else if(a=mo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(D(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(D(317));a[nr]=t}else Ys(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ke(t),a=!1}else Bt!==null&&(pd(Bt),Bt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||be.current&1?Oe===0&&(Oe=3):Hh())),t.updateQueue!==null&&(t.flags|=4),Ke(t),null);case 4:return Js(),ld(e,t),e===null&&fi(t.stateNode.containerInfo),Ke(t),null;case 10:return Dh(t.type._context),Ke(t),null;case 17:return dt(t.type)&&gl(),Ke(t),null;case 19:if(pe(be),a=t.memoizedState,a===null)return Ke(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)wa(a,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=kl(e),o!==null){for(t.flags|=128,wa(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return oe(be,be.current&1|2),t.child}e=e.sibling}a.tail!==null&&Te()>Zs&&(t.flags|=128,n=!0,wa(a,!1),t.lanes=4194304)}else{if(!n)if(e=kl(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),wa(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ve)return Ke(t),null}else 2*Te()-a.renderingStartTime>Zs&&r!==1073741824&&(t.flags|=128,n=!0,wa(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Te(),t.sibling=null,r=be.current,oe(be,n?r&1|2:r&1),t):(Ke(t),null);case 22:case 23:return Kh(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?pt&1073741824&&(Ke(t),t.subtreeFlags&6&&(t.flags|=8192)):Ke(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Ab(e,t){switch(_h(t),t.tag){case 1:return dt(t.type)&&gl(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Js(),pe(ut),pe(Qe),Ih(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Lh(t),null;case 13:if(pe(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Ys()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pe(be),null;case 4:return Js(),null;case 10:return Dh(t.type._context),null;case 22:case 23:return Kh(),null;case 24:return null;default:return null}}var yo=!1,He=!1,Ob=typeof WeakSet=="function"?WeakSet:Set,R=null;function Ps(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ne(e,t,n)}else r.current=null}function cd(e,t,r){try{r()}catch(n){Ne(e,t,n)}}var $m=!1;function Lb(e,t){if(Ku=dl,e=ly(),Sh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==a||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===e)break t;if(h===r&&++u===s&&(l=o),h===a&&++d===n&&(c=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Hu={focusedElem:e,selectionRange:r},dl=!1,R=t;R!==null;)if(t=R,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,R=e;else for(;R!==null;){t=R;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,w=x.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:Wt(t.type,y),w);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(b){Ne(t,t.return,b)}if(e=t.sibling,e!==null){e.return=t.return,R=e;break}R=t.return}return x=$m,$m=!1,x}function Ga(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&cd(t,r,a)}s=s.next}while(s!==n)}}function ec(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ud(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function s0(e){var t=e.alternate;t!==null&&(e.alternate=null,s0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[nr],delete t[gi],delete t[Qu],delete t[pb],delete t[yb])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function a0(e){return e.tag===5||e.tag===3||e.tag===4}function Mm(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||a0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=ml));else if(n!==4&&(e=e.child,e!==null))for(dd(e,t,r),e=e.sibling;e!==null;)dd(e,t,r),e=e.sibling}function hd(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(hd(e,t,r),e=e.sibling;e!==null;)hd(e,t,r),e=e.sibling}var We=null,Ut=!1;function Mr(e,t,r){for(r=r.child;r!==null;)i0(e,t,r),r=r.sibling}function i0(e,t,r){if(sr&&typeof sr.onCommitFiberUnmount=="function")try{sr.onCommitFiberUnmount(Kl,r)}catch{}switch(r.tag){case 5:He||Ps(r,t);case 6:var n=We,s=Ut;We=null,Mr(e,t,r),We=n,Ut=s,We!==null&&(Ut?(e=We,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):We.removeChild(r.stateNode));break;case 18:We!==null&&(Ut?(e=We,r=r.stateNode,e.nodeType===8?Uc(e.parentNode,r):e.nodeType===1&&Uc(e,r),ui(e)):Uc(We,r.stateNode));break;case 4:n=We,s=Ut,We=r.stateNode.containerInfo,Ut=!0,Mr(e,t,r),We=n,Ut=s;break;case 0:case 11:case 14:case 15:if(!He&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&cd(r,t,o),s=s.next}while(s!==n)}Mr(e,t,r);break;case 1:if(!He&&(Ps(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ne(r,t,l)}Mr(e,t,r);break;case 21:Mr(e,t,r);break;case 22:r.mode&1?(He=(n=He)||r.memoizedState!==null,Mr(e,t,r),He=n):Mr(e,t,r);break;default:Mr(e,t,r)}}function Fm(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Ob),t.forEach(function(n){var s=Bb.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function $t(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var a=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:We=l.stateNode,Ut=!1;break e;case 3:We=l.stateNode.containerInfo,Ut=!0;break e;case 4:We=l.stateNode.containerInfo,Ut=!0;break e}l=l.return}if(We===null)throw Error(D(160));i0(a,o,s),We=null,Ut=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){Ne(s,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)o0(t,e),t=t.sibling}function o0(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if($t(t,e),Zt(e),n&4){try{Ga(3,e,e.return),ec(3,e)}catch(y){Ne(e,e.return,y)}try{Ga(5,e,e.return)}catch(y){Ne(e,e.return,y)}}break;case 1:$t(t,e),Zt(e),n&512&&r!==null&&Ps(r,r.return);break;case 5:if($t(t,e),Zt(e),n&512&&r!==null&&Ps(r,r.return),e.flags&32){var s=e.stateNode;try{ii(s,"")}catch(y){Ne(e,e.return,y)}}if(n&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Cp(s,a),Ru(l,o);var u=Ru(l,a);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?Lp(s,f):d==="dangerouslySetInnerHTML"?Ap(s,f):d==="children"?ii(s,f):dh(s,d,f,u)}switch(l){case"input":Pu(s,a);break;case"textarea":Dp(s,a);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Ls(s,!!a.multiple,m,!1):h!==!!a.multiple&&(a.defaultValue!=null?Ls(s,!!a.multiple,a.defaultValue,!0):Ls(s,!!a.multiple,a.multiple?[]:"",!1))}s[gi]=a}catch(y){Ne(e,e.return,y)}}break;case 6:if($t(t,e),Zt(e),n&4){if(e.stateNode===null)throw Error(D(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(y){Ne(e,e.return,y)}}break;case 3:if($t(t,e),Zt(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ui(t.containerInfo)}catch(y){Ne(e,e.return,y)}break;case 4:$t(t,e),Zt(e);break;case 13:$t(t,e),Zt(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(Gh=Te())),n&4&&Fm(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(He=(u=He)||d,$t(t,e),He=u):$t(t,e),Zt(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(R=e,d=e.child;d!==null;){for(f=R=d;R!==null;){switch(h=R,m=h.child,h.tag){case 0:case 11:case 14:case 15:Ga(4,h,h.return);break;case 1:Ps(h,h.return);var x=h.stateNode;if(typeof x.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(y){Ne(n,r,y)}}break;case 5:Ps(h,h.return);break;case 22:if(h.memoizedState!==null){Um(f);continue}}m!==null?(m.return=h,R=m):Um(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,u?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Op("display",o))}catch(y){Ne(e,e.return,y)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(y){Ne(e,e.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:$t(t,e),Zt(e),n&4&&Fm(e);break;case 21:break;default:$t(t,e),Zt(e)}}function Zt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(a0(r)){var n=r;break e}r=r.return}throw Error(D(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(ii(s,""),n.flags&=-33);var a=Mm(e);hd(e,a,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Mm(e);dd(e,l,o);break;default:throw Error(D(161))}}catch(c){Ne(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ib(e,t,r){R=e,l0(e)}function l0(e,t,r){for(var n=(e.mode&1)!==0;R!==null;){var s=R,a=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||yo;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||He;l=yo;var u=He;if(yo=o,(He=c)&&!u)for(R=s;R!==null;)o=R,c=o.child,o.tag===22&&o.memoizedState!==null?zm(s):c!==null?(c.return=o,R=c):zm(s);for(;a!==null;)R=a,l0(a),a=a.sibling;R=s,yo=l,He=u}Wm(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,R=a):Wm(e)}}function Wm(e){for(;R!==null;){var t=R;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:He||ec(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!He)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:Wt(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Sm(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Sm(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&ui(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}He||t.flags&512&&ud(t)}catch(h){Ne(t,t.return,h)}}if(t===e){R=null;break}if(r=t.sibling,r!==null){r.return=t.return,R=r;break}R=t.return}}function Um(e){for(;R!==null;){var t=R;if(t===e){R=null;break}var r=t.sibling;if(r!==null){r.return=t.return,R=r;break}R=t.return}}function zm(e){for(;R!==null;){var t=R;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ec(4,t)}catch(c){Ne(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){Ne(t,s,c)}}var a=t.return;try{ud(t)}catch(c){Ne(t,a,c)}break;case 5:var o=t.return;try{ud(t)}catch(c){Ne(t,o,c)}}}catch(c){Ne(t,t.return,c)}if(t===e){R=null;break}var l=t.sibling;if(l!==null){l.return=t.return,R=l;break}R=t.return}}var Rb=Math.ceil,Nl=Rr.ReactCurrentDispatcher,zh=Rr.ReactCurrentOwner,Ct=Rr.ReactCurrentBatchConfig,Z=0,$e=null,Ce=null,ze=0,pt=0,As=vn(0),Oe=0,bi=null,Qn=0,tc=0,Bh=0,qa=null,ot=null,Gh=0,Zs=1/0,hr=null,_l=!1,fd=null,ln=null,xo=!1,tn=null,El=0,Ka=0,md=null,Vo=-1,Yo=0;function tt(){return Z&6?Te():Vo!==-1?Vo:Vo=Te()}function cn(e){return e.mode&1?Z&2&&ze!==0?ze&-ze:vb.transition!==null?(Yo===0&&(Yo=Kp()),Yo):(e=ne,e!==0||(e=window.event,e=e===void 0?16:Zp(e.type)),e):1}function Kt(e,t,r,n){if(50<Ka)throw Ka=0,md=null,Error(D(185));Ii(e,r,n),(!(Z&2)||e!==$e)&&(e===$e&&(!(Z&2)&&(tc|=r),Oe===4&&Jr(e,ze)),ht(e,n),r===1&&Z===0&&!(t.mode&1)&&(Zs=Te()+500,Jl&&wn()))}function ht(e,t){var r=e.callbackNode;vw(e,t);var n=ul(e,e===$e?ze:0);if(n===0)r!==null&&Jf(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Jf(r),t===1)e.tag===0?xb(Bm.bind(null,e)):xy(Bm.bind(null,e)),mb(function(){!(Z&6)&&wn()}),r=null;else{switch(Hp(n)){case 1:r=ph;break;case 4:r=Gp;break;case 16:r=cl;break;case 536870912:r=qp;break;default:r=cl}r=p0(r,c0.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function c0(e,t){if(Vo=-1,Yo=0,Z&6)throw Error(D(327));var r=e.callbackNode;if(Fs()&&e.callbackNode!==r)return null;var n=ul(e,e===$e?ze:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Tl(e,n);else{t=n;var s=Z;Z|=2;var a=d0();($e!==e||ze!==t)&&(hr=null,Zs=Te()+500,zn(e,t));do try{Fb();break}catch(l){u0(e,l)}while(!0);Ch(),Nl.current=a,Z=s,Ce!==null?t=0:($e=null,ze=0,t=Oe)}if(t!==0){if(t===2&&(s=Uu(e),s!==0&&(n=s,t=gd(e,s))),t===1)throw r=bi,zn(e,0),Jr(e,n),ht(e,Te()),r;if(t===6)Jr(e,n);else{if(s=e.current.alternate,!(n&30)&&!$b(s)&&(t=Tl(e,n),t===2&&(a=Uu(e),a!==0&&(n=a,t=gd(e,a))),t===1))throw r=bi,zn(e,0),Jr(e,n),ht(e,Te()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(D(345));case 2:Cn(e,ot,hr);break;case 3:if(Jr(e,n),(n&130023424)===n&&(t=Gh+500-Te(),10<t)){if(ul(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){tt(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=Yu(Cn.bind(null,e,ot,hr),t);break}Cn(e,ot,hr);break;case 4:if(Jr(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-qt(n);a=1<<o,o=t[o],o>s&&(s=o),n&=~a}if(n=s,n=Te()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Rb(n/1960))-n,10<n){e.timeoutHandle=Yu(Cn.bind(null,e,ot,hr),n);break}Cn(e,ot,hr);break;case 5:Cn(e,ot,hr);break;default:throw Error(D(329))}}}return ht(e,Te()),e.callbackNode===r?c0.bind(null,e):null}function gd(e,t){var r=qa;return e.current.memoizedState.isDehydrated&&(zn(e,t).flags|=256),e=Tl(e,t),e!==2&&(t=ot,ot=r,t!==null&&pd(t)),e}function pd(e){ot===null?ot=e:ot.push.apply(ot,e)}function $b(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!Vt(a(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Jr(e,t){for(t&=~Bh,t&=~tc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-qt(t),n=1<<r;e[r]=-1,t&=~n}}function Bm(e){if(Z&6)throw Error(D(327));Fs();var t=ul(e,0);if(!(t&1))return ht(e,Te()),null;var r=Tl(e,t);if(e.tag!==0&&r===2){var n=Uu(e);n!==0&&(t=n,r=gd(e,n))}if(r===1)throw r=bi,zn(e,0),Jr(e,t),ht(e,Te()),r;if(r===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cn(e,ot,hr),ht(e,Te()),null}function qh(e,t){var r=Z;Z|=1;try{return e(t)}finally{Z=r,Z===0&&(Zs=Te()+500,Jl&&wn())}}function Jn(e){tn!==null&&tn.tag===0&&!(Z&6)&&Fs();var t=Z;Z|=1;var r=Ct.transition,n=ne;try{if(Ct.transition=null,ne=1,e)return e()}finally{ne=n,Ct.transition=r,Z=t,!(Z&6)&&wn()}}function Kh(){pt=As.current,pe(As)}function zn(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,fb(r)),Ce!==null)for(r=Ce.return;r!==null;){var n=r;switch(_h(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&gl();break;case 3:Js(),pe(ut),pe(Qe),Ih();break;case 5:Lh(n);break;case 4:Js();break;case 13:pe(be);break;case 19:pe(be);break;case 10:Dh(n.type._context);break;case 22:case 23:Kh()}r=r.return}if($e=e,Ce=e=un(e.current,null),ze=pt=t,Oe=0,bi=null,Bh=tc=Qn=0,ot=qa=null,In!==null){for(t=0;t<In.length;t++)if(r=In[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,n.next=o}r.pending=n}In=null}return e}function u0(e,t){do{var r=Ce;try{if(Ch(),qo.current=Sl,jl){for(var n=ke.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}jl=!1}if(Yn=0,Re=Ae=ke=null,Ba=!1,xi=0,zh.current=null,r===null||r.return===null){Oe=1,bi=t,Ce=null;break}e:{var a=e,o=r.return,l=r,c=t;if(t=ze,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=Dm(o);if(m!==null){m.flags&=-257,Pm(m,o,l,a,t),m.mode&1&&Cm(a,u,t),t=m,c=u;var x=t.updateQueue;if(x===null){var y=new Set;y.add(c),t.updateQueue=y}else x.add(c);break e}else{if(!(t&1)){Cm(a,u,t),Hh();break e}c=Error(D(426))}}else if(ve&&l.mode&1){var w=Dm(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Pm(w,o,l,a,t),Eh(Xs(c,l));break e}}a=c=Xs(c,l),Oe!==4&&(Oe=2),qa===null?qa=[a]:qa.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=Hy(a,c,t);jm(a,g);break e;case 1:l=c;var p=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ln===null||!ln.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var b=Vy(a,l,t);jm(a,b);break e}}a=a.return}while(a!==null)}f0(r)}catch(j){t=j,Ce===r&&r!==null&&(Ce=r=r.return);continue}break}while(!0)}function d0(){var e=Nl.current;return Nl.current=Sl,e===null?Sl:e}function Hh(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),$e===null||!(Qn&268435455)&&!(tc&268435455)||Jr($e,ze)}function Tl(e,t){var r=Z;Z|=2;var n=d0();($e!==e||ze!==t)&&(hr=null,zn(e,t));do try{Mb();break}catch(s){u0(e,s)}while(!0);if(Ch(),Z=r,Nl.current=n,Ce!==null)throw Error(D(261));return $e=null,ze=0,Oe}function Mb(){for(;Ce!==null;)h0(Ce)}function Fb(){for(;Ce!==null&&!uw();)h0(Ce)}function h0(e){var t=g0(e.alternate,e,pt);e.memoizedProps=e.pendingProps,t===null?f0(e):Ce=t,zh.current=null}function f0(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Ab(r,t),r!==null){r.flags&=32767,Ce=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Ce=null;return}}else if(r=Pb(r,t,pt),r!==null){Ce=r;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Oe===0&&(Oe=5)}function Cn(e,t,r){var n=ne,s=Ct.transition;try{Ct.transition=null,ne=1,Wb(e,t,r,n)}finally{Ct.transition=s,ne=n}return null}function Wb(e,t,r,n){do Fs();while(tn!==null);if(Z&6)throw Error(D(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(ww(e,a),e===$e&&(Ce=$e=null,ze=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||xo||(xo=!0,p0(cl,function(){return Fs(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ct.transition,Ct.transition=null;var o=ne;ne=1;var l=Z;Z|=4,zh.current=null,Lb(e,r),o0(r,e),ib(Hu),dl=!!Ku,Hu=Ku=null,e.current=r,Ib(r),dw(),Z=l,ne=o,Ct.transition=a}else e.current=r;if(xo&&(xo=!1,tn=e,El=s),a=e.pendingLanes,a===0&&(ln=null),mw(r.stateNode),ht(e,Te()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(_l)throw _l=!1,e=fd,fd=null,e;return El&1&&e.tag!==0&&Fs(),a=e.pendingLanes,a&1?e===md?Ka++:(Ka=0,md=e):Ka=0,wn(),null}function Fs(){if(tn!==null){var e=Hp(El),t=Ct.transition,r=ne;try{if(Ct.transition=null,ne=16>e?16:e,tn===null)var n=!1;else{if(e=tn,tn=null,El=0,Z&6)throw Error(D(331));var s=Z;for(Z|=4,R=e.current;R!==null;){var a=R,o=a.child;if(R.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(R=u;R!==null;){var d=R;switch(d.tag){case 0:case 11:case 15:Ga(8,d,a)}var f=d.child;if(f!==null)f.return=d,R=f;else for(;R!==null;){d=R;var h=d.sibling,m=d.return;if(s0(d),d===u){R=null;break}if(h!==null){h.return=m,R=h;break}R=m}}}var x=a.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}R=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,R=o;else e:for(;R!==null;){if(a=R,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ga(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,R=g;break e}R=a.return}}var p=e.current;for(R=p;R!==null;){o=R;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,R=v;else e:for(o=p;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ec(9,l)}}catch(j){Ne(l,l.return,j)}if(l===o){R=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,R=b;break e}R=l.return}}if(Z=s,wn(),sr&&typeof sr.onPostCommitFiberRoot=="function")try{sr.onPostCommitFiberRoot(Kl,e)}catch{}n=!0}return n}finally{ne=r,Ct.transition=t}}return!1}function Gm(e,t,r){t=Xs(r,t),t=Hy(e,t,1),e=on(e,t,1),t=tt(),e!==null&&(Ii(e,1,t),ht(e,t))}function Ne(e,t,r){if(e.tag===3)Gm(e,e,r);else for(;t!==null;){if(t.tag===3){Gm(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(ln===null||!ln.has(n))){e=Xs(r,e),e=Vy(t,e,1),t=on(t,e,1),e=tt(),t!==null&&(Ii(t,1,e),ht(t,e));break}}t=t.return}}function Ub(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=tt(),e.pingedLanes|=e.suspendedLanes&r,$e===e&&(ze&r)===r&&(Oe===4||Oe===3&&(ze&130023424)===ze&&500>Te()-Gh?zn(e,0):Bh|=r),ht(e,t)}function m0(e,t){t===0&&(e.mode&1?(t=oo,oo<<=1,!(oo&130023424)&&(oo=4194304)):t=1);var r=tt();e=Dr(e,t),e!==null&&(Ii(e,t,r),ht(e,r))}function zb(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),m0(e,r)}function Bb(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(D(314))}n!==null&&n.delete(t),m0(e,r)}var g0;g0=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ut.current)ct=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ct=!1,Db(e,t,r);ct=!!(e.flags&131072)}else ct=!1,ve&&t.flags&1048576&&vy(t,xl,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ho(e,t),e=t.pendingProps;var s=Vs(t,Qe.current);Ms(t,r),s=$h(null,t,n,e,s,r);var a=Mh();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,dt(n)?(a=!0,pl(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ah(t),s.updater=Zl,t.stateNode=s,s._reactInternals=t,rd(t,n,e,r),t=ad(null,t,n,!0,a,r)):(t.tag=0,ve&&a&&Nh(t),Ze(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=qb(n),e=Wt(n,e),s){case 0:t=sd(null,t,n,e,r);break e;case 1:t=Lm(null,t,n,e,r);break e;case 11:t=Am(null,t,n,e,r);break e;case 14:t=Om(null,t,n,Wt(n.type,e),r);break e}throw Error(D(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),sd(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),Lm(e,t,n,s,r);case 3:e:{if(Xy(t),e===null)throw Error(D(387));n=t.pendingProps,a=t.memoizedState,s=a.element,Ny(e,t),bl(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=Xs(Error(D(423)),t),t=Im(e,t,n,r,s);break e}else if(n!==s){s=Xs(Error(D(424)),t),t=Im(e,t,n,r,s);break e}else for(yt=an(t.stateNode.containerInfo.firstChild),xt=t,ve=!0,Bt=null,r=jy(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ys(),n===s){t=Pr(e,t,r);break e}Ze(e,t,n,r)}t=t.child}return t;case 5:return _y(t),e===null&&Zu(t),n=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,o=s.children,Vu(n,s)?o=null:a!==null&&Vu(n,a)&&(t.flags|=32),Jy(e,t),Ze(e,t,o,r),t.child;case 6:return e===null&&Zu(t),null;case 13:return Zy(e,t,r);case 4:return Oh(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Qs(t,null,n,r):Ze(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),Am(e,t,n,s,r);case 7:return Ze(e,t,t.pendingProps,r),t.child;case 8:return Ze(e,t,t.pendingProps.children,r),t.child;case 12:return Ze(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,a=t.memoizedProps,o=s.value,oe(vl,n._currentValue),n._currentValue=o,a!==null)if(Vt(a.value,o)){if(a.children===s.children&&!ut.current){t=Pr(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=kr(-1,r&-r),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}a.lanes|=r,c=a.alternate,c!==null&&(c.lanes|=r),ed(a.return,r,t),l.lanes|=r;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(D(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),ed(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ze(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,Ms(t,r),s=Pt(s),n=n(s),t.flags|=1,Ze(e,t,n,r),t.child;case 14:return n=t.type,s=Wt(n,t.pendingProps),s=Wt(n.type,s),Om(e,t,n,s,r);case 15:return Yy(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:Wt(n,s),Ho(e,t),t.tag=1,dt(n)?(e=!0,pl(t)):e=!1,Ms(t,r),Ky(t,n,s),rd(t,n,s,r),ad(null,t,n,!0,e,r);case 19:return e0(e,t,r);case 22:return Qy(e,t,r)}throw Error(D(156,t.tag))};function p0(e,t){return Bp(e,t)}function Gb(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,r,n){return new Gb(e,t,r,n)}function Vh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function qb(e){if(typeof e=="function")return Vh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fh)return 11;if(e===mh)return 14}return 2}function un(e,t){var r=e.alternate;return r===null?(r=Et(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Qo(e,t,r,n,s,a){var o=2;if(n=e,typeof e=="function")Vh(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ks:return Bn(r.children,s,a,t);case hh:o=8,s|=8;break;case _u:return e=Et(12,r,t,s|2),e.elementType=_u,e.lanes=a,e;case Eu:return e=Et(13,r,t,s),e.elementType=Eu,e.lanes=a,e;case Tu:return e=Et(19,r,t,s),e.elementType=Tu,e.lanes=a,e;case _p:return rc(r,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Sp:o=10;break e;case Np:o=9;break e;case fh:o=11;break e;case mh:o=14;break e;case Kr:o=16,n=null;break e}throw Error(D(130,e==null?e:typeof e,""))}return t=Et(o,r,t,s),t.elementType=e,t.type=n,t.lanes=a,t}function Bn(e,t,r,n){return e=Et(7,e,n,t),e.lanes=r,e}function rc(e,t,r,n){return e=Et(22,e,n,t),e.elementType=_p,e.lanes=r,e.stateNode={isHidden:!1},e}function Yc(e,t,r){return e=Et(6,e,null,t),e.lanes=r,e}function Qc(e,t,r){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kb(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dc(0),this.expirationTimes=Dc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dc(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Yh(e,t,r,n,s,a,o,l,c){return e=new Kb(e,t,r,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Et(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ah(a),e}function Hb(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bs,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function y0(e){if(!e)return fn;e=e._reactInternals;e:{if(rs(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(dt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var r=e.type;if(dt(r))return yy(e,r,t)}return t}function x0(e,t,r,n,s,a,o,l,c){return e=Yh(r,n,!0,e,s,a,o,l,c),e.context=y0(null),r=e.current,n=tt(),s=cn(r),a=kr(n,s),a.callback=t??null,on(r,a,s),e.current.lanes=s,Ii(e,s,n),ht(e,n),e}function nc(e,t,r,n){var s=t.current,a=tt(),o=cn(s);return r=y0(r),t.context===null?t.context=r:t.pendingContext=r,t=kr(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=on(s,t,o),e!==null&&(Kt(e,s,o,a),Go(e,s,o)),o}function Cl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function qm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Qh(e,t){qm(e,t),(e=e.alternate)&&qm(e,t)}function Vb(){return null}var v0=typeof reportError=="function"?reportError:function(e){console.error(e)};function Jh(e){this._internalRoot=e}sc.prototype.render=Jh.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));nc(e,t,null,null)};sc.prototype.unmount=Jh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Jn(function(){nc(null,e,null,null)}),t[Cr]=null}};function sc(e){this._internalRoot=e}sc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qp();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Qr.length&&t!==0&&t<Qr[r].priority;r++);Qr.splice(r,0,e),r===0&&Xp(e)}};function Xh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ac(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Km(){}function Yb(e,t,r,n,s){if(s){if(typeof n=="function"){var a=n;n=function(){var u=Cl(o);a.call(u)}}var o=x0(t,n,e,0,null,!1,!1,"",Km);return e._reactRootContainer=o,e[Cr]=o.current,fi(e.nodeType===8?e.parentNode:e),Jn(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var u=Cl(c);l.call(u)}}var c=Yh(e,0,!1,null,null,!1,!1,"",Km);return e._reactRootContainer=c,e[Cr]=c.current,fi(e.nodeType===8?e.parentNode:e),Jn(function(){nc(t,c,r,n)}),c}function ic(e,t,r,n,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var c=Cl(o);l.call(c)}}nc(t,o,e,s)}else o=Yb(r,t,e,s,n);return Cl(o)}Vp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Oa(t.pendingLanes);r!==0&&(yh(t,r|1),ht(t,Te()),!(Z&6)&&(Zs=Te()+500,wn()))}break;case 13:Jn(function(){var n=Dr(e,1);if(n!==null){var s=tt();Kt(n,e,1,s)}}),Qh(e,1)}};xh=function(e){if(e.tag===13){var t=Dr(e,134217728);if(t!==null){var r=tt();Kt(t,e,134217728,r)}Qh(e,134217728)}};Yp=function(e){if(e.tag===13){var t=cn(e),r=Dr(e,t);if(r!==null){var n=tt();Kt(r,e,t,n)}Qh(e,t)}};Qp=function(){return ne};Jp=function(e,t){var r=ne;try{return ne=e,t()}finally{ne=r}};Mu=function(e,t,r){switch(t){case"input":if(Pu(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=Ql(n);if(!s)throw Error(D(90));Tp(n),Pu(n,s)}}}break;case"textarea":Dp(e,r);break;case"select":t=r.value,t!=null&&Ls(e,!!r.multiple,t,!1)}};$p=qh;Mp=Jn;var Qb={usingClientEntryPoint:!1,Events:[$i,_s,Ql,Ip,Rp,qh]},ba={findFiberByHostInstance:Ln,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Jb={bundleType:ba.bundleType,version:ba.version,rendererPackageName:ba.rendererPackageName,rendererConfig:ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Up(e),e===null?null:e.stateNode},findFiberByHostInstance:ba.findFiberByHostInstance||Vb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vo.isDisabled&&vo.supportsFiber)try{Kl=vo.inject(Jb),sr=vo}catch{}}kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qb;kt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xh(t))throw Error(D(200));return Hb(e,t,null,r)};kt.createRoot=function(e,t){if(!Xh(e))throw Error(D(299));var r=!1,n="",s=v0;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=Yh(e,1,!1,null,null,r,!1,n,s),e[Cr]=t.current,fi(e.nodeType===8?e.parentNode:e),new Jh(t)};kt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Up(t),e=e===null?null:e.stateNode,e};kt.flushSync=function(e){return Jn(e)};kt.hydrate=function(e,t,r){if(!ac(t))throw Error(D(200));return ic(null,e,t,!0,r)};kt.hydrateRoot=function(e,t,r){if(!Xh(e))throw Error(D(405));var n=r!=null&&r.hydratedSources||null,s=!1,a="",o=v0;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=x0(t,null,e,1,r??null,s,!1,a,o),e[Cr]=t.current,fi(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new sc(t)};kt.render=function(e,t,r){if(!ac(t))throw Error(D(200));return ic(null,e,t,!1,r)};kt.unmountComponentAtNode=function(e){if(!ac(e))throw Error(D(40));return e._reactRootContainer?(Jn(function(){ic(null,null,e,!1,function(){e._reactRootContainer=null,e[Cr]=null})}),!0):!1};kt.unstable_batchedUpdates=qh;kt.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ac(r))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return ic(e,t,r,!1,n)};kt.version="18.3.1-next-f1338f8080-20240426";function w0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(w0)}catch(e){console.error(e)}}w0(),wp.exports=kt;var Xb=wp.exports,Hm=Xb;Su.createRoot=Hm.createRoot,Su.hydrateRoot=Hm.hydrateRoot;var Zh={};Object.defineProperty(Zh,"__esModule",{value:!0});Zh.parse=a1;Zh.serialize=i1;const Zb=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e1=/^[\u0021-\u003A\u003C-\u007E]*$/,t1=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r1=/^[\u0020-\u003A\u003D-\u007E]*$/,n1=Object.prototype.toString,s1=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function a1(e,t){const r=new s1,n=e.length;if(n<2)return r;const s=(t==null?void 0:t.decode)||o1;let a=0;do{const o=e.indexOf("=",a);if(o===-1)break;const l=e.indexOf(";",a),c=l===-1?n:l;if(o>c){a=e.lastIndexOf(";",o-1)+1;continue}const u=Vm(e,a,o),d=Ym(e,o,u),f=e.slice(u,d);if(r[f]===void 0){let h=Vm(e,o+1,c),m=Ym(e,c,h);const x=s(e.slice(h,m));r[f]=x}a=c+1}while(a<n);return r}function Vm(e,t,r){do{const n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<r);return r}function Ym(e,t,r){for(;t>r;){const n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return r}function i1(e,t,r){const n=(r==null?void 0:r.encode)||encodeURIComponent;if(!Zb.test(e))throw new TypeError(`argument name is invalid: ${e}`);const s=n(t);if(!e1.test(s))throw new TypeError(`argument val is invalid: ${t}`);let a=e+"="+s;if(!r)return a;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!t1.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!r1.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){if(!l1(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function o1(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function l1(e){return n1.call(e)==="[object Date]"}var Qm="popstate";function c1(e={}){function t(n,s){let{pathname:a,search:o,hash:l}=n.location;return yd("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:ki(s)}return d1(t,r,null,e)}function De(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Yt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function u1(){return Math.random().toString(36).substring(2,10)}function Jm(e,t){return{usr:e.state,key:e.key,idx:t}}function yd(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Fi(t):t,state:r,key:t&&t.key||n||u1()}}function ki({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fi(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function d1(e,t,r,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,l="POP",c=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function f(){l="POP";let w=d(),g=w==null?null:w-u;u=w,c&&c({action:l,location:y.location,delta:g})}function h(w,g){l="PUSH";let p=yd(y.location,w,g);u=d()+1;let v=Jm(p,u),b=y.createHref(p);try{o.pushState(v,"",b)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(b)}a&&c&&c({action:l,location:y.location,delta:1})}function m(w,g){l="REPLACE";let p=yd(y.location,w,g);u=d();let v=Jm(p,u),b=y.createHref(p);o.replaceState(v,"",b),a&&c&&c({action:l,location:y.location,delta:0})}function x(w){return h1(w)}let y={get action(){return l},get location(){return e(s,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Qm,f),c=w,()=>{s.removeEventListener(Qm,f),c=null}},createHref(w){return t(s,w)},createURL:x,encodeLocation(w){let g=x(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:m,go(w){return o.go(w)}};return y}function h1(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),De(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:ki(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function b0(e,t,r="/"){return f1(e,t,r,!1)}function f1(e,t,r,n){let s=typeof t=="string"?Fi(t):t,a=Ar(s.pathname||"/",r);if(a==null)return null;let o=k0(e);m1(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=N1(a);l=j1(o[c],u,n)}return l}function k0(e,t=[],r=[],n=""){let s=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(De(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let u=jr([n,c.relativePath]),d=r.concat(c);a.children&&a.children.length>0&&(De(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),k0(a.children,t,d,u)),!(a.path==null&&!a.index)&&t.push({path:u,score:b1(u,a.index),routesMeta:d})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let c of j0(a.path))s(a,o,c)}),t}function j0(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=j0(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),s&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function m1(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:k1(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var g1=/^:[\w-]+$/,p1=3,y1=2,x1=1,v1=10,w1=-2,Xm=e=>e==="*";function b1(e,t){let r=e.split("/"),n=r.length;return r.some(Xm)&&(n+=w1),t&&(n+=y1),r.filter(s=>!Xm(s)).reduce((s,a)=>s+(g1.test(a)?p1:a===""?x1:v1),n)}function k1(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function j1(e,t,r=!1){let{routesMeta:n}=e,s={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=Dl({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=Dl({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:jr([a,f.pathname]),pathnameBase:C1(jr([a,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(a=jr([a,f.pathnameBase]))}return o}function Dl(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=S1(e.path,e.caseSensitive,e.end),s=t.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:f},h)=>{if(d==="*"){let x=l[h]||"";o=a.slice(0,a.length-x.length).replace(/(.)\/+$/,"$1")}const m=l[h];return f&&!m?u[d]=void 0:u[d]=(m||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function S1(e,t=!1,r=!0){Yt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function N1(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Yt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ar(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function _1(e,t="/"){let{pathname:r,search:n="",hash:s=""}=typeof e=="string"?Fi(e):e;return{pathname:r?r.startsWith("/")?r:E1(r,t):t,search:D1(n),hash:P1(s)}}function E1(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Jc(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function T1(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function ef(e){let t=T1(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function tf(e,t,r,n=!1){let s;typeof e=="string"?s=Fi(e):(s={...e},De(!s.pathname||!s.pathname.includes("?"),Jc("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),Jc("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),Jc("#","search","hash",s)));let a=e===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;s.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=_1(s,l),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}var jr=e=>e.join("/").replace(/\/\/+/g,"/"),C1=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),D1=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,P1=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function A1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var S0=["POST","PUT","PATCH","DELETE"];new Set(S0);var O1=["GET",...S0];new Set(O1);var oa=k.createContext(null);oa.displayName="DataRouter";var oc=k.createContext(null);oc.displayName="DataRouterState";var N0=k.createContext({isTransitioning:!1});N0.displayName="ViewTransition";var L1=k.createContext(new Map);L1.displayName="Fetchers";var I1=k.createContext(null);I1.displayName="Await";var Qt=k.createContext(null);Qt.displayName="Navigation";var lc=k.createContext(null);lc.displayName="Location";var Jt=k.createContext({outlet:null,matches:[],isDataRoute:!1});Jt.displayName="Route";var rf=k.createContext(null);rf.displayName="RouteError";function R1(e,{relative:t}={}){De(la(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=k.useContext(Qt),{hash:s,pathname:a,search:o}=Ui(e,{relative:t}),l=a;return r!=="/"&&(l=a==="/"?r:jr([r,a])),n.createHref({pathname:l,search:o,hash:s})}function la(){return k.useContext(lc)!=null}function bn(){return De(la(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(lc).location}var _0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function E0(e){k.useContext(Qt).static||k.useLayoutEffect(e)}function Wi(){let{isDataRoute:e}=k.useContext(Jt);return e?J1():$1()}function $1(){De(la(),"useNavigate() may be used only in the context of a <Router> component.");let e=k.useContext(oa),{basename:t,navigator:r}=k.useContext(Qt),{matches:n}=k.useContext(Jt),{pathname:s}=bn(),a=JSON.stringify(ef(n)),o=k.useRef(!1);return E0(()=>{o.current=!0}),k.useCallback((c,u={})=>{if(Yt(o.current,_0),!o.current)return;if(typeof c=="number"){r.go(c);return}let d=tf(c,JSON.parse(a),s,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:jr([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,a,s,e])}var M1=k.createContext(null);function F1(e){let t=k.useContext(Jt).outlet;return t&&k.createElement(M1.Provider,{value:e},t)}function Ui(e,{relative:t}={}){let{matches:r}=k.useContext(Jt),{pathname:n}=bn(),s=JSON.stringify(ef(r));return k.useMemo(()=>tf(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function W1(e,t){return T0(e)}function T0(e,t,r,n){De(la(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=k.useContext(Qt),{matches:a}=k.useContext(Jt),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",u=o?o.pathnameBase:"/",d=o&&o.route;{let g=d&&d.path||"";C0(c,!d||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let f=bn(),h;h=f;let m=h.pathname||"/",x=m;if(u!=="/"){let g=u.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(g.length).join("/")}let y=b0(e,{pathname:x});return Yt(d||y!=null,`No routes matched location "${h.pathname}${h.search}${h.hash}" `),Yt(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${h.pathname}${h.search}${h.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),q1(y&&y.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:jr([u,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:jr([u,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),a,r,n)}function U1(){let e=Q1(),t=A1(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),r?k.createElement("pre",{style:s},r):null,o)}var z1=k.createElement(U1,null),B1=class extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?k.createElement(Jt.Provider,{value:this.props.routeContext},k.createElement(rf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function G1({routeContext:e,match:t,children:r}){let n=k.useContext(oa);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(Jt.Provider,{value:e},r)}function q1(e,t=[],r=null,n=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let s=e,a=r==null?void 0:r.errors;if(a!=null){let c=s.findIndex(u=>u.route.id&&(a==null?void 0:a[u.route.id])!==void 0);De(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,c+1))}let o=!1,l=-1;if(r)for(let c=0;c<s.length;c++){let u=s[c];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=c),u.route.id){let{loaderData:d,errors:f}=r,h=u.route.loader&&!d.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||h){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((c,u,d)=>{let f,h=!1,m=null,x=null;r&&(f=a&&u.route.id?a[u.route.id]:void 0,m=u.route.errorElement||z1,o&&(l<0&&d===0?(C0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,x=null):l===d&&(h=!0,x=u.route.hydrateFallbackElement||null)));let y=t.concat(s.slice(0,d+1)),w=()=>{let g;return f?g=m:h?g=x:u.route.Component?g=k.createElement(u.route.Component,null):u.route.element?g=u.route.element:g=c,k.createElement(G1,{match:u,routeContext:{outlet:c,matches:y,isDataRoute:r!=null},children:g})};return r&&(u.route.ErrorBoundary||u.route.errorElement||d===0)?k.createElement(B1,{location:r.location,revalidation:r.revalidation,component:m,error:f,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}function nf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K1(e){let t=k.useContext(oa);return De(t,nf(e)),t}function H1(e){let t=k.useContext(oc);return De(t,nf(e)),t}function V1(e){let t=k.useContext(Jt);return De(t,nf(e)),t}function sf(e){let t=V1(e),r=t.matches[t.matches.length-1];return De(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function Y1(){return sf("useRouteId")}function Q1(){var n;let e=k.useContext(rf),t=H1("useRouteError"),r=sf("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function J1(){let{router:e}=K1("useNavigate"),t=sf("useNavigate"),r=k.useRef(!1);return E0(()=>{r.current=!0}),k.useCallback(async(s,a={})=>{Yt(r.current,_0),r.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...a}))},[e,t])}var Zm={};function C0(e,t,r){!t&&!Zm[e]&&(Zm[e]=!0,Yt(!1,r))}k.memo(X1);function X1({routes:e,future:t,state:r}){return T0(e,void 0,r,t)}function Z1({to:e,replace:t,state:r,relative:n}){De(la(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=k.useContext(Qt);Yt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(Jt),{pathname:o}=bn(),l=Wi(),c=tf(e,ef(a),o,n==="path"),u=JSON.stringify(c);return k.useEffect(()=>{l(JSON.parse(u),{replace:t,state:r,relative:n})},[l,u,n,t,r]),null}function ek(e){return F1(e.context)}function tk({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:s,static:a=!1}){De(!la(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),l=k.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=Fi(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:h="default"}=r,m=k.useMemo(()=>{let x=Ar(c,o);return x==null?null:{location:{pathname:x,search:u,hash:d,state:f,key:h},navigationType:n}},[o,c,u,d,f,h,n]);return Yt(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:k.createElement(Qt.Provider,{value:l},k.createElement(lc.Provider,{children:t,value:m}))}var Jo="get",Xo="application/x-www-form-urlencoded";function cc(e){return e!=null&&typeof e.tagName=="string"}function rk(e){return cc(e)&&e.tagName.toLowerCase()==="button"}function nk(e){return cc(e)&&e.tagName.toLowerCase()==="form"}function sk(e){return cc(e)&&e.tagName.toLowerCase()==="input"}function ak(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function ik(e,t){return e.button===0&&(!t||t==="_self")&&!ak(e)}var wo=null;function ok(){if(wo===null)try{new FormData(document.createElement("form"),0),wo=!1}catch{wo=!0}return wo}var lk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xc(e){return e!=null&&!lk.has(e)?(Yt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xo}"`),null):e}function ck(e,t){let r,n,s,a,o;if(nk(e)){let l=e.getAttribute("action");n=l?Ar(l,t):null,r=e.getAttribute("method")||Jo,s=Xc(e.getAttribute("enctype"))||Xo,a=new FormData(e)}else if(rk(e)||sk(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(n=c?Ar(c,t):null,r=e.getAttribute("formmethod")||l.getAttribute("method")||Jo,s=Xc(e.getAttribute("formenctype"))||Xc(l.getAttribute("enctype"))||Xo,a=new FormData(l,e),!ok()){let{name:u,type:d,value:f}=e;if(d==="image"){let h=u?`${u}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else u&&a.append(u,f)}}else{if(cc(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Jo,n=null,s=Xo,o=e}return a&&s==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:s,formData:a,body:o}}function af(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function uk(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dk(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function hk(e,t,r){let n=await Promise.all(e.map(async s=>{let a=t.routes[s.route.id];if(a){let o=await uk(a,r);return o.links?o.links():[]}return[]}));return pk(n.flat(1).filter(dk).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function eg(e,t,r,n,s,a){let o=(c,u)=>r[u]?c.route.id!==r[u].route.id:!0,l=(c,u)=>{var d;return r[u].pathname!==c.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,u)=>o(c,u)||l(c,u)):a==="data"?t.filter((c,u)=>{var f;let d=n.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(o(c,u)||l(c,u))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function fk(e,t,{includeHydrateFallback:r}={}){return mk(e.map(n=>{let s=t.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),r&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function mk(e){return[...new Set(e)]}function gk(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function pk(e,t){let r=new Set;return new Set(t),e.reduce((n,s)=>{let a=JSON.stringify(gk(s));return r.has(a)||(r.add(a),n.push({key:a,link:s})),n},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var yk=new Set([100,101,204,205]);function xk(e,t){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname="_root.data":t&&Ar(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.data`:r.pathname=`${r.pathname.replace(/\/$/,"")}.data`,r}function D0(){let e=k.useContext(oa);return af(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function vk(){let e=k.useContext(oc);return af(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var of=k.createContext(void 0);of.displayName="FrameworkContext";function P0(){let e=k.useContext(of);return af(e,"You must render this element inside a <HydratedRouter> element"),e}function wk(e,t){let r=k.useContext(of),[n,s]=k.useState(!1),[a,o]=k.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:d,onTouchStart:f}=t,h=k.useRef(null);k.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let y=g=>{g.forEach(p=>{o(p.isIntersecting)})},w=new IntersectionObserver(y,{threshold:.5});return h.current&&w.observe(h.current),()=>{w.disconnect()}}},[e]),k.useEffect(()=>{if(n){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[n]);let m=()=>{s(!0)},x=()=>{s(!1),o(!1)};return r?e!=="intent"?[a,h,{}]:[a,h,{onFocus:ka(l,m),onBlur:ka(c,x),onMouseEnter:ka(u,m),onMouseLeave:ka(d,x),onTouchStart:ka(f,m)}]:[!1,h,{}]}function ka(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function bk({page:e,...t}){let{router:r}=D0(),n=k.useMemo(()=>b0(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?k.createElement(jk,{page:e,matches:n,...t}):null}function kk(e){let{manifest:t,routeModules:r}=P0(),[n,s]=k.useState([]);return k.useEffect(()=>{let a=!1;return hk(e,t,r).then(o=>{a||s(o)}),()=>{a=!0}},[e,t,r]),n}function jk({page:e,matches:t,...r}){let n=bn(),{manifest:s,routeModules:a}=P0(),{basename:o}=D0(),{loaderData:l,matches:c}=vk(),u=k.useMemo(()=>eg(e,t,c,s,n,"data"),[e,t,c,s,n]),d=k.useMemo(()=>eg(e,t,c,s,n,"assets"),[e,t,c,s,n]),f=k.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let x=new Set,y=!1;if(t.forEach(g=>{var v;let p=s.routes[g.route.id];!p||!p.hasLoader||(!u.some(b=>b.route.id===g.route.id)&&g.route.id in l&&((v=a[g.route.id])!=null&&v.shouldRevalidate)||p.hasClientLoader?y=!0:x.add(g.route.id))}),x.size===0)return[];let w=xk(e,o);return y&&x.size>0&&w.searchParams.set("_routes",t.filter(g=>x.has(g.route.id)).map(g=>g.route.id).join(",")),[w.pathname+w.search]},[o,l,n,s,u,t,e,a]),h=k.useMemo(()=>fk(d,s),[d,s]),m=kk(d);return k.createElement(k.Fragment,null,f.map(x=>k.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...r})),h.map(x=>k.createElement("link",{key:x,rel:"modulepreload",href:x,...r})),m.map(({key:x,link:y})=>k.createElement("link",{key:x,...y})))}function Sk(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var A0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{A0&&(window.__reactRouterVersion="7.6.2")}catch{}function Nk({basename:e,children:t,window:r}){let n=k.useRef();n.current==null&&(n.current=c1({window:r,v5Compat:!0}));let s=n.current,[a,o]=k.useState({action:s.action,location:s.location}),l=k.useCallback(c=>{k.startTransition(()=>o(c))},[o]);return k.useLayoutEffect(()=>s.listen(l),[s,l]),k.createElement(tk,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:s})}var O0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,L0=k.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:s,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f,...h},m){let{basename:x}=k.useContext(Qt),y=typeof u=="string"&&O0.test(u),w,g=!1;if(typeof u=="string"&&y&&(w=u,A0))try{let E=new URL(window.location.href),P=u.startsWith("//")?new URL(E.protocol+u):new URL(u),C=Ar(P.pathname,x);P.origin===E.origin&&C!=null?u=C+P.search+P.hash:g=!0}catch{Yt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let p=R1(u,{relative:s}),[v,b,j]=wk(n,h),S=Tk(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});function N(E){t&&t(E),E.defaultPrevented||S(E)}let _=k.createElement("a",{...h,...j,href:w||p,onClick:g||a?t:N,ref:Sk(m,b),target:c,"data-discover":!y&&r==="render"?"true":void 0});return v&&!y?k.createElement(k.Fragment,null,_,k.createElement(bk,{page:p})):_});L0.displayName="Link";var I0=k.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:s=!1,style:a,to:o,viewTransition:l,children:c,...u},d){let f=Ui(o,{relative:u.relative}),h=bn(),m=k.useContext(oc),{navigator:x,basename:y}=k.useContext(Qt),w=m!=null&&Ok(f)&&l===!0,g=x.encodeLocation?x.encodeLocation(f).pathname:f.pathname,p=h.pathname,v=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(p=p.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&y&&(v=Ar(v,y)||v);const b=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let j=p===g||!s&&p.startsWith(g)&&p.charAt(b)==="/",S=v!=null&&(v===g||!s&&v.startsWith(g)&&v.charAt(g.length)==="/"),N={isActive:j,isPending:S,isTransitioning:w},_=j?t:void 0,E;typeof n=="function"?E=n(N):E=[n,j?"active":null,S?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(N):a;return k.createElement(L0,{...u,"aria-current":_,className:E,ref:d,style:P,to:o,viewTransition:l},typeof c=="function"?c(N):c)});I0.displayName="NavLink";var _k=k.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:s,state:a,method:o=Jo,action:l,onSubmit:c,relative:u,preventScrollReset:d,viewTransition:f,...h},m)=>{let x=Pk(),y=Ak(l,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",g=typeof l=="string"&&O0.test(l),p=v=>{if(c&&c(v),v.defaultPrevented)return;v.preventDefault();let b=v.nativeEvent.submitter,j=(b==null?void 0:b.getAttribute("formmethod"))||o;x(b||v.currentTarget,{fetcherKey:t,method:j,navigate:r,replace:s,state:a,relative:u,preventScrollReset:d,viewTransition:f})};return k.createElement("form",{ref:m,method:w,action:y,onSubmit:n?c:p,...h,"data-discover":!g&&e==="render"?"true":void 0})});_k.displayName="Form";function Ek(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function R0(e){let t=k.useContext(oa);return De(t,Ek(e)),t}function Tk(e,{target:t,replace:r,state:n,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=Wi(),c=bn(),u=Ui(e,{relative:a});return k.useCallback(d=>{if(ik(d,t)){d.preventDefault();let f=r!==void 0?r:ki(c)===ki(u);l(e,{replace:f,state:n,preventScrollReset:s,relative:a,viewTransition:o})}},[c,l,u,r,n,t,e,s,a,o])}var Ck=0,Dk=()=>`__${String(++Ck)}__`;function Pk(){let{router:e}=R0("useSubmit"),{basename:t}=k.useContext(Qt),r=Y1();return k.useCallback(async(n,s={})=>{let{action:a,method:o,encType:l,formData:c,body:u}=ck(n,t);if(s.navigate===!1){let d=s.fetcherKey||Dk();await e.fetch(d,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await e.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:c,body:u,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,r])}function Ak(e,{relative:t}={}){let{basename:r}=k.useContext(Qt),n=k.useContext(Jt);De(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Ui(e||".",{relative:t})},o=bn();if(e==null){a.search=o.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();a.search=d?`?${d}`:""}}return(!e||e===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:jr([r,a.pathname])),ki(a)}function Ok(e,t={}){let r=k.useContext(N0);De(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=R0("useViewTransitionState"),s=Ui(e,{relative:t.relative});if(!r.isTransitioning)return!1;let a=Ar(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Ar(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Dl(s.pathname,o)!=null||Dl(s.pathname,a)!=null}[...yk];/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ik=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),F=(e,t)=>{const r=k.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>k.createElement("svg",{ref:d,...Lk,width:s,height:s,stroke:n,strokeWidth:o?Number(a)*24/Number(s):a,className:["lucide",`lucide-${Ik(e)}`,l].join(" "),...u},[...t.map(([f,h])=>k.createElement(f,h)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tg=F("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xn=F("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pl=F("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rg=F("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=F("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rk=F("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=F("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $k=F("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=F("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=F("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lf=F("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cf=F("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=F("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=F("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fk=F("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sr=F("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wk=F("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uk=F("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=F("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F0=F("Dumbbell",[["path",{d:"m6.5 6.5 11 11",key:"f7oqzb"}],["path",{d:"m21 21-1-1",key:"cpc6if"}],["path",{d:"m3 3 1 1",key:"d3rpuf"}],["path",{d:"m18 22 4-4",key:"1e32o6"}],["path",{d:"m2 6 4-4",key:"189tqz"}],["path",{d:"m3 10 7-7",key:"1bxui2"}],["path",{d:"m14 21 7-7",key:"16x78n"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zk=F("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=F("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bk=F("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U0=F("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gk=F("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qk=F("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kk=F("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z0=F("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hk=F("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vk=F("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yk=F("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qk=F("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jk=F("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xk=F("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=F("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=F("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zk=F("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=F("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uf=F("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B0=F("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=F("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=F("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=F("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=F("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=F("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=F("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=F("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hf=F("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=F("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=F("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=F("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gi=F("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=F("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aj=F("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ws=F("UtensilsCrossed",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=F("WifiOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 4.17-2.65",key:"11utq1"}],["path",{d:"M10.66 5c4.01-.36 8.14.9 11.34 3.76",key:"hxefdu"}],["path",{d:"M16.85 11.25a10 10 0 0 1 2.22 1.68",key:"q734kn"}],["path",{d:"M5 13a10 10 0 0 1 5.24-2.76",key:"piq4yl"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G0=F("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=F("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qi=F("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),oj="modulepreload",lj=function(e){return"/PerfectZenkai/"+e},sg={},Or=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=lj(c),c in sg)return;sg[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":oj,u||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),u)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},cj={},ag=e=>{let t;const r=new Set,n=(d,f)=>{const h=typeof d=="function"?d(t):d;if(!Object.is(h,t)){const m=t;t=f??(typeof h!="object"||h===null)?h:Object.assign({},t,h),r.forEach(x=>x(t,m))}},s=()=>t,c={setState:n,getState:s,getInitialState:()=>u,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(cj?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(n,s,c);return c},uj=e=>e?ag(e):ag;var q0={exports:{}},K0={},H0={exports:{}},V0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ea=k;function dj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hj=typeof Object.is=="function"?Object.is:dj,fj=ea.useState,mj=ea.useEffect,gj=ea.useLayoutEffect,pj=ea.useDebugValue;function yj(e,t){var r=t(),n=fj({inst:{value:r,getSnapshot:t}}),s=n[0].inst,a=n[1];return gj(function(){s.value=r,s.getSnapshot=t,Zc(s)&&a({inst:s})},[e,r,t]),mj(function(){return Zc(s)&&a({inst:s}),e(function(){Zc(s)&&a({inst:s})})},[e]),pj(r),r}function Zc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!hj(e,r)}catch{return!0}}function xj(e,t){return t()}var vj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xj:yj;V0.useSyncExternalStore=ea.useSyncExternalStore!==void 0?ea.useSyncExternalStore:vj;H0.exports=V0;var wj=H0.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uc=k,bj=wj;function kj(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var jj=typeof Object.is=="function"?Object.is:kj,Sj=bj.useSyncExternalStore,Nj=uc.useRef,_j=uc.useEffect,Ej=uc.useMemo,Tj=uc.useDebugValue;K0.useSyncExternalStoreWithSelector=function(e,t,r,n,s){var a=Nj(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Ej(function(){function c(m){if(!u){if(u=!0,d=m,m=n(m),s!==void 0&&o.hasValue){var x=o.value;if(s(x,m))return f=x}return f=m}if(x=f,jj(d,m))return x;var y=n(m);return s!==void 0&&s(x,y)?(d=m,x):(d=m,f=y)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,s]);var l=Sj(e,a[0],a[1]);return _j(function(){o.hasValue=!0,o.value=l},[l]),Tj(l),l};q0.exports=K0;var Cj=q0.exports;const Dj=op(Cj),Y0={},{useDebugValue:Pj}=xp,{useSyncExternalStoreWithSelector:Aj}=Dj;let ig=!1;const Oj=e=>e;function Lj(e,t=Oj,r){(Y0?"production":void 0)!=="production"&&r&&!ig&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),ig=!0);const n=Aj(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Pj(n),n}const og=e=>{(Y0?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?uj(e):e,r=(n,s)=>Lj(t,n,s);return Object.assign(r,t),r},kn=e=>e?og(e):og,Ij={};function Rj(e,t){let r;try{r=e()}catch{return}return{getItem:s=>{var a;const o=c=>c===null?null:JSON.parse(c,void 0),l=(a=r.getItem(s))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(s,a)=>r.setItem(s,JSON.stringify(a,void 0)),removeItem:s=>r.removeItem(s)}}const Si=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return Si(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return Si(n)(r)}}}},$j=(e,t)=>(r,n,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,g)=>({...g,...w}),...t},o=!1;const l=new Set,c=new Set;let u;try{u=a.getStorage()}catch{}if(!u)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...w)},n,s);const d=Si(a.serialize),f=()=>{const w=a.partialize({...n()});let g;const p=d({state:w,version:a.version}).then(v=>u.setItem(a.name,v)).catch(v=>{g=v});if(g)throw g;return p},h=s.setState;s.setState=(w,g)=>{h(w,g),f()};const m=e((...w)=>{r(...w),f()},n,s);let x;const y=()=>{var w;if(!u)return;o=!1,l.forEach(p=>p(n()));const g=((w=a.onRehydrateStorage)==null?void 0:w.call(a,n()))||void 0;return Si(u.getItem.bind(u))(a.name).then(p=>{if(p)return a.deserialize(p)}).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==a.version){if(a.migrate)return a.migrate(p.state,p.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return p.state}).then(p=>{var v;return x=a.merge(p,(v=n())!=null?v:m),r(x,!0),f()}).then(()=>{g==null||g(x,void 0),o=!0,c.forEach(p=>p(x))}).catch(p=>{g==null||g(void 0,p)})};return s.persist={setOptions:w=>{a={...a,...w},w.getStorage&&(u=w.getStorage())},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},y(),x||m},Mj=(e,t)=>(r,n,s)=>{let a={storage:Rj(()=>localStorage),partialize:y=>y,version:0,merge:(y,w)=>({...w,...y}),...t},o=!1;const l=new Set,c=new Set;let u=a.storage;if(!u)return e((...y)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...y)},n,s);const d=()=>{const y=a.partialize({...n()});return u.setItem(a.name,{state:y,version:a.version})},f=s.setState;s.setState=(y,w)=>{f(y,w),d()};const h=e((...y)=>{r(...y),d()},n,s);s.getInitialState=()=>h;let m;const x=()=>{var y,w;if(!u)return;o=!1,l.forEach(p=>{var v;return p((v=n())!=null?v:h)});const g=((w=a.onRehydrateStorage)==null?void 0:w.call(a,(y=n())!=null?y:h))||void 0;return Si(u.getItem.bind(u))(a.name).then(p=>{if(p)if(typeof p.version=="number"&&p.version!==a.version){if(a.migrate)return[!0,a.migrate(p.state,p.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,p.state];return[!1,void 0]}).then(p=>{var v;const[b,j]=p;if(m=a.merge(j,(v=n())!=null?v:h),r(m,!0),b)return d()}).then(()=>{g==null||g(m,void 0),m=n(),o=!0,c.forEach(p=>p(m))}).catch(p=>{g==null||g(void 0,p)})};return s.persist={setOptions:y=>{a={...a,...y},y.storage&&(u=y.storage)},clearStorage:()=>{u==null||u.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>o,onHydrate:y=>(l.add(y),()=>{l.delete(y)}),onFinishHydration:y=>(c.add(y),()=>{c.delete(y)})},a.skipHydration||x(),m||h},Fj=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((Ij?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),$j(e,t)):Mj(e,t),Wj=Fj,Uj=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Or(async()=>{const{default:n}=await Promise.resolve().then(()=>ca);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class ff extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class zj extends ff{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Bj extends ff{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Gj extends ff{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var wd;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(wd||(wd={}));var qj=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class Kj{constructor(t,{headers:r={},customFetch:n,region:s=wd.Any}={}){this.url=t,this.headers=r,this.region=s,this.fetch=Uj(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return qj(this,void 0,void 0,function*(){try{const{headers:s,method:a,body:o}=r;let l={},{region:c}=r;c||(c=this.region),c&&c!=="any"&&(l["x-region"]=c);let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const d=yield this.fetch(`${this.url}/${t}`,{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:u}).catch(x=>{throw new zj(x)}),f=d.headers.get("x-relay-error");if(f&&f==="true")throw new Bj(d);if(!d.ok)throw new Gj(d);let h=((n=d.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return h==="application/json"?m=yield d.json():h==="application/octet-stream"?m=yield d.blob():h==="text/event-stream"?m=d:h==="multipart/form-data"?m=yield d.formData():m=yield d.text(),{data:m,error:null}}catch(s){return{data:null,error:s}}})}}var lt={},mf={},dc={},Ki={},hc={},fc={},Hj=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},ta=Hj();const Vj=ta.fetch,Q0=ta.fetch.bind(ta),J0=ta.Headers,Yj=ta.Request,Qj=ta.Response,ca=Object.freeze(Object.defineProperty({__proto__:null,Headers:J0,Request:Yj,Response:Qj,default:Q0,fetch:Vj},Symbol.toStringTag,{value:"Module"})),Jj=_v(ca);var mc={};Object.defineProperty(mc,"__esModule",{value:!0});let Xj=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};mc.default=Xj;var X0=Dt&&Dt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(fc,"__esModule",{value:!0});const Zj=X0(Jj),eS=X0(mc);let tS=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Zj.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let s=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let u=null,d=null,f=null,h=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const g=await a.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=g:d=JSON.parse(g))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),w=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&w&&w.length>1&&(f=parseInt(w[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,m="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const y=await a.text();try{u=JSON.parse(y),Array.isArray(u)&&a.status===404&&(d=[],u=null,h=200,m="OK")}catch{a.status===404&&y===""?(h=204,m="No Content"):u={message:y}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,m="OK"),u&&this.shouldThrowOnError)throw new eS.default(u)}return{error:u,data:d,count:f,status:h,statusText:m}});return this.shouldThrowOnError||(s=s.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(t,r)}returns(){return this}overrideTypes(){return this}};fc.default=tS;var rS=Dt&&Dt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hc,"__esModule",{value:!0});const nS=rS(fc);let sS=class extends nS.default{select(t){let r=!1;const n=(t??"*").split("").map(s=>/\s/.test(s)&&!r?"":(s==='"'&&(r=!r),s)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:s,referencedTable:a=s}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:s=n}={}){const a=typeof s>"u"?"offset":`${s}.offset`,o=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:s=!1,wal:a=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,s?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};hc.default=sS;var aS=Dt&&Dt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ki,"__esModule",{value:!0});const iS=aS(hc);let oS=class extends iS.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:s}={}){let a="";s==="plain"?a="pl":s==="phrase"?a="ph":s==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Ki.default=oS;var lS=Dt&&Dt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dc,"__esModule",{value:!0});const ja=lS(Ki);let cS=class{constructor(t,{headers:r={},schema:n,fetch:s}){this.url=t,this.headers=r,this.schema=n,this.fetch=s}select(t,{head:r=!1,count:n}={}){const s=r?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new ja.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const s="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ja.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new ja.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),r&&s.push(`count=${r}`),this.headers.Prefer=s.join(","),new ja.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ja.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};dc.default=cS;var gc={},pc={};Object.defineProperty(pc,"__esModule",{value:!0});pc.version=void 0;pc.version="0.0.0-automated";Object.defineProperty(gc,"__esModule",{value:!0});gc.DEFAULT_HEADERS=void 0;const uS=pc;gc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${uS.version}`};var Z0=Dt&&Dt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mf,"__esModule",{value:!0});const dS=Z0(dc),hS=Z0(Ki),fS=gc;let mS=class ex{constructor(t,{headers:r={},schema:n,fetch:s}={}){this.url=t,this.headers=Object.assign(Object.assign({},fS.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=s}from(t){const r=new URL(`${this.url}/${t}`);return new dS.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ex(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:s=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return a&&(u.Prefer=`count=${a}`),new hS.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};mf.default=mS;var ua=Dt&&Dt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lt,"__esModule",{value:!0});lt.PostgrestError=lt.PostgrestBuilder=lt.PostgrestTransformBuilder=lt.PostgrestFilterBuilder=lt.PostgrestQueryBuilder=lt.PostgrestClient=void 0;const tx=ua(mf);lt.PostgrestClient=tx.default;const rx=ua(dc);lt.PostgrestQueryBuilder=rx.default;const nx=ua(Ki);lt.PostgrestFilterBuilder=nx.default;const sx=ua(hc);lt.PostgrestTransformBuilder=sx.default;const ax=ua(fc);lt.PostgrestBuilder=ax.default;const ix=ua(mc);lt.PostgrestError=ix.default;var gS=lt.default={PostgrestClient:tx.default,PostgrestQueryBuilder:rx.default,PostgrestFilterBuilder:nx.default,PostgrestTransformBuilder:sx.default,PostgrestBuilder:ax.default,PostgrestError:ix.default};const{PostgrestClient:pS,PostgrestQueryBuilder:g4,PostgrestFilterBuilder:p4,PostgrestTransformBuilder:y4,PostgrestBuilder:x4,PostgrestError:v4}=gS;let bd;typeof window>"u"?bd=require("ws"):bd=window.WebSocket;const yS="2.11.10",xS={"X-Client-Info":`realtime-js/${yS}`},vS="1.0.0",ox=1e4,wS=1e3;var Us;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Us||(Us={}));var Xe;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Xe||(Xe={}));var zt;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(zt||(zt={}));var kd;(function(e){e.websocket="websocket"})(kd||(kd={}));var On;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(On||(On={}));class bS{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const s=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+s));o=o+s;const c=n.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class lx{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ie;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ie||(ie={}));const lg=(e,t,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,o)=>(a[o]=kS(o,e,t,s),a),{})},kS=(e,t,r,n)=>{const s=t.find(l=>l.name===e),a=s==null?void 0:s.type,o=r[e];return a&&!n.includes(a)?cx(a,o):jd(o)},cx=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return _S(t,r)}switch(e){case ie.bool:return jS(t);case ie.float4:case ie.float8:case ie.int2:case ie.int4:case ie.int8:case ie.numeric:case ie.oid:return SS(t);case ie.json:case ie.jsonb:return NS(t);case ie.timestamp:return ES(t);case ie.abstime:case ie.date:case ie.daterange:case ie.int4range:case ie.int8range:case ie.money:case ie.reltime:case ie.text:case ie.time:case ie.timestamptz:case ie.timetz:case ie.tsrange:case ie.tstzrange:return jd(t);default:return jd(t)}},jd=e=>e,jS=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},SS=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},NS=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},_S=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>cx(t,l))}return e},ES=e=>typeof e=="string"?e.replace(" ","T"):e,ux=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class eu{constructor(t,r,n={},s=ox){this.channel=t,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var cg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(cg||(cg={}));class Ha{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ha.syncState(this.state,s,a,o),this.pendingDiffs.forEach(c=>{this.state=Ha.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},s=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=Ha.syncDiff(this.state,s,a,o),l())}),this.onJoin((s,a,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:a,newPresences:o})}),this.onLeave((s,a,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,s){const a=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(a,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=a[u];if(f){const h=d.map(w=>w.presence_ref),m=f.map(w=>w.presence_ref),x=d.filter(w=>m.indexOf(w.presence_ref)<0),y=f.filter(w=>h.indexOf(w.presence_ref)<0);x.length>0&&(l[u]=x),y.length>0&&(c[u]=y)}else l[u]=d}),this.syncDiff(a,{joins:l,leaves:c},n,s)}static syncDiff(t,r,n,s){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(a,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(m=>m.presence_ref),h=d.filter(m=>f.indexOf(m.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,s(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const s=t[n];return"metas"in s?r[n]=s.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=s,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ug;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ug||(ug={}));var dg;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(dg||(dg={}));var fr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(fr||(fr={}));class gf{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new eu(this,zt.join,this.params,this.timeout),this.rejoinTimer=new lx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(zt.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new Ha(this),this.broadcastEndpointURL=ux(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(d=>t==null?void 0:t(fr.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(fr.CLOSED));const c={},u={broadcast:a,presence:o,postgres_changes:(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(d=>d.filter))!==null&&s!==void 0?s:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(fr.SUBSCRIBED);return}else{const h=this.bindings.postgres_changes,m=(f=h==null?void 0:h.length)!==null&&f!==void 0?f:0,x=[];for(let y=0;y<m;y++){const w=h[y],{filter:{event:g,schema:p,table:v,filter:b}}=w,j=d&&d[y];if(j&&j.event===g&&j.schema===p&&j.table===v&&j.filter===b)x.push(Object.assign(Object.assign({},w),{id:j.id}));else{this.unsubscribe(),this.state=Xe.errored,t==null||t(fr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,t&&t(fr.SUBSCRIBED);return}}).receive("error",d=>{this.state=Xe.errored,t==null||t(fr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(fr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this._on(t,r,n)}async send(t,r={}){var n,s;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=u.body)===null||s===void 0?void 0:s.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(zt.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(n=>{const s=new eu(this,zt.leave,{},t);s.receive("ok",()=>{r(),n("ok")}).receive("timeout",()=>{r(),n("timed out")}).receive("error",()=>{n("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,r,n){const s=new AbortController,a=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new eu(this,t,r,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var s,a;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=zt;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(m=>{var x,y,w;return((x=m.filter)===null||x===void 0?void 0:x.event)==="*"||((w=(y=m.filter)===null||y===void 0?void 0:y.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(m=>m.callback(h,n)):(a=this.bindings[o])===null||a===void 0||a.filter(m=>{var x,y,w,g,p,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const b=m.id,j=(x=m.filter)===null||x===void 0?void 0:x.event;return b&&((y=r.ids)===null||y===void 0?void 0:y.includes(b))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const b=(p=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return b==="*"||b===((v=r==null?void 0:r.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof h=="object"&&"ids"in h){const x=h.data,{schema:y,table:w,commit_timestamp:g,type:p,errors:v}=x;h=Object.assign(Object.assign({},{schema:y,table:w,commit_timestamp:g,eventType:p,new:{},old:{},errors:v}),this._getPayloadRecords(x))}m.callback(h,n)})}_isClosed(){return this.state===Xe.closed}_isJoined(){return this.state===Xe.joined}_isJoining(){return this.state===Xe.joining}_isLeaving(){return this.state===Xe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const s=t.toLocaleLowerCase(),a={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(a):this.bindings[s]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(s=>{var a;return!(((a=s.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&gf.isEqual(s.filter,r))}),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(zt.close,{},t)}_onError(t){this._on(zt.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=lg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=lg(t.columns,t.old_record)),r}}const hg=()=>{},TS=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class CS{constructor(t,r){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=xS,this.params={},this.timeout=ox,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=hg,this.ref=0,this.logger=hg,this.conn=null,this.sendBuffer=[],this.serializer=new bS,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>Or(async()=>{const{default:c}=await Promise.resolve().then(()=>ca);return{default:c}},void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${t}/${kd.websocket}`,this.httpEndpoint=ux(t),r!=null&&r.transport?this.transport=r.transport:this.transport=null,r!=null&&r.params&&(this.params=r.params),r!=null&&r.headers&&(this.headers=Object.assign(Object.assign({},this.headers),r.headers)),r!=null&&r.timeout&&(this.timeout=r.timeout),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),r!=null&&r.heartbeatIntervalMs&&(this.heartbeatIntervalMs=r.heartbeatIntervalMs);const s=(n=r==null?void 0:r.params)===null||n===void 0?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=r!=null&&r.reconnectAfterMs?r.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=r!=null&&r.encode?r.encode:(a,o)=>o(JSON.stringify(a)),this.decode=r!=null&&r.decode?r.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new lx(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(r==null?void 0:r.fetch),r!=null&&r.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(r==null?void 0:r.worker)||!1,this.workerUrl=r==null?void 0:r.workerUrl}this.accessToken=(r==null?void 0:r.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=bd),this.transport){typeof window<"u"&&this.transport===window.WebSocket?this.conn=new this.transport(this.endpointURL()):this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection();return}this.conn=new DS(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:vS}))}disconnect(t,r){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,r??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels=this.channels.filter(n=>n._joinRef!==t._joinRef),this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Us.connecting:return On.Connecting;case Us.open:return On.Open;case Us.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}channel(t,r={config:{}}){const n=`realtime:${t}`,s=this.getChannels().find(a=>a.topic===n);if(s)return s;{const a=new gf(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:s,ref:a}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${a})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){let r=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{r&&n.updateJoinPayload({access_token:r,version:this.headers&&this.headers["X-Client-Info"]}),n.joinedOnce&&n._isJoined()&&n._push(zt.access_token,{access_token:r})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(wS,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,r=>{let{topic:n,event:s,payload:a,ref:o}=r;n==="phoenix"&&s==="phx_reply"&&this.heartbeatCallback(r.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${s} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(r))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),!this.worker)this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);else{this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(r=>r(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(r=>r(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(zt.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${t}${n}${s}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([TS],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}}class DS{constructor(t,r,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Us.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}}class pf extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ie(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class PS extends pf{constructor(t,r){super(t),this.name="StorageApiError",this.status=r}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Sd extends pf{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var AS=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const dx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Or(async()=>{const{default:n}=await Promise.resolve().then(()=>ca);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},OS=()=>AS(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Or(()=>Promise.resolve().then(()=>ca),void 0)).Response:Response}),Nd=e=>{if(Array.isArray(e))return e.map(r=>Nd(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[s]=Nd(n)}),t};var ns=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const tu=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),LS=(e,t,r)=>ns(void 0,void 0,void 0,function*(){const n=yield OS();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(s=>{t(new PS(tu(s),e.status||500))}).catch(s=>{t(new Sd(tu(s),s))}):t(new Sd(tu(e),e))}),IS=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),n&&(s.body=JSON.stringify(n)),Object.assign(Object.assign({},s),r))};function Hi(e,t,r,n,s,a){return ns(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,IS(t,n,s,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>LS(c,l,n))})})}function Al(e,t,r,n){return ns(this,void 0,void 0,function*(){return Hi(e,"GET",t,r,n)})}function Vr(e,t,r,n,s){return ns(this,void 0,void 0,function*(){return Hi(e,"POST",t,n,s,r)})}function RS(e,t,r,n,s){return ns(this,void 0,void 0,function*(){return Hi(e,"PUT",t,n,s,r)})}function $S(e,t,r,n){return ns(this,void 0,void 0,function*(){return Hi(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function hx(e,t,r,n,s){return ns(this,void 0,void 0,function*(){return Hi(e,"DELETE",t,n,s,r)})}var at=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const MS={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class FS{constructor(t,r={},n,s){this.url=t,this.headers=r,this.bucketId=n,this.fetch=dx(s)}uploadOrUpdate(t,r,n,s){return at(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},fg),s);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(l=Object.assign(Object.assign({},l),s.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),h=yield f.json();return f.ok?{data:{path:u,id:h.Id,fullPath:h.Key},error:null}:{data:null,error:h}}catch(a){if(Ie(a))return{data:null,error:a};throw a}})}upload(t,r,n){return at(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,s){return at(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:fg.upsert},s),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),h=yield f.json();return f.ok?{data:{path:a,fullPath:h.Key},error:null}:{data:null,error:h}}catch(c){if(Ie(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return at(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const a=yield Vr(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new pf("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}update(t,r,n){return at(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return at(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}copy(t,r,n){return at(this,void 0,void 0,function*(){try{return{data:{path:(yield Vr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}createSignedUrl(t,r,n){return at(this,void 0,void 0,function*(){try{let s=this._getFinalPath(t),a=yield Vr(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}createSignedUrls(t,r,n){return at(this,void 0,void 0,function*(){try{const s=yield Vr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}download(t,r){return at(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield Al(this.fetch,`${this.url}/${s}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ie(l))return{data:null,error:l};throw l}})}info(t){return at(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Al(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Nd(n),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}exists(t){return at(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield $S(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ie(n)&&n instanceof Sd){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),s=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&s.push(a);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let u=s.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return at(this,void 0,void 0,function*(){try{return{data:yield hx(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}list(t,r,n){return at(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},MS),r),{prefix:t||""});return{data:yield Vr(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(Ie(s))return{data:null,error:s};throw s}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const WS="2.7.1",US={"X-Client-Info":`storage-js/${WS}`};var us=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class zS{constructor(t,r={},n){this.url=t,this.headers=Object.assign(Object.assign({},US),r),this.fetch=dx(n)}listBuckets(){return us(this,void 0,void 0,function*(){try{return{data:yield Al(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Ie(t))return{data:null,error:t};throw t}})}getBucket(t){return us(this,void 0,void 0,function*(){try{return{data:yield Al(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return us(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return us(this,void 0,void 0,function*(){try{return{data:yield RS(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ie(n))return{data:null,error:n};throw n}})}emptyBucket(t){return us(this,void 0,void 0,function*(){try{return{data:yield Vr(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}deleteBucket(t){return us(this,void 0,void 0,function*(){try{return{data:yield hx(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(Ie(r))return{data:null,error:r};throw r}})}}class BS extends zS{constructor(t,r={},n){super(t,r,n)}from(t){return new FS(this.url,this.headers,t,this.fetch)}}const GS="2.50.0";let Ia="";typeof Deno<"u"?Ia="deno":typeof document<"u"?Ia="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ia="react-native":Ia="node";const qS={"X-Client-Info":`supabase-js-${Ia}/${GS}`},KS={headers:qS},HS={schema:"public"},VS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},YS={};var QS=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const JS=e=>{let t;return e?t=e:typeof fetch>"u"?t=Q0:t=fetch,(...r)=>t(...r)},XS=()=>typeof Headers>"u"?J0:Headers,ZS=(e,t,r)=>{const n=JS(r),s=XS();return(a,o)=>QS(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new s(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var eN=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function tN(e){return e.endsWith("/")?e:e+"/"}function rN(e,t){var r,n;const{db:s,auth:a,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>eN(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const fx="2.70.0",vs=30*1e3,_d=3,ru=_d*vs,nN="http://localhost:9999",sN="supabase.auth.token",aN={"X-Client-Info":`gotrue-js/${fx}`},Ed="X-Supabase-Api-Version",mx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},iN=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,oN=6e5;class yf extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function K(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class lN extends yf{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function cN(e){return K(e)&&e.name==="AuthApiError"}class gx extends yf{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class jn extends yf{constructor(t,r,n,s){super(t,n,s),this.name=r,this.status=n}}class Br extends jn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function uN(e){return K(e)&&e.name==="AuthSessionMissingError"}class bo extends jn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ko extends jn{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class jo extends jn{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function dN(e){return K(e)&&e.name==="AuthImplicitGrantRedirectError"}class mg extends jn{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Td extends jn{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function nu(e){return K(e)&&e.name==="AuthRetryableFetchError"}class gg extends jn{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Va extends jn{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ol="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),pg=` 	
\r=`.split(""),hN=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<pg.length;t+=1)e[pg[t].charCodeAt(0)]=-2;for(let t=0;t<Ol.length;t+=1)e[Ol[t].charCodeAt(0)]=t;return e})();function yg(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ol[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Ol[n]),t.queuedBits-=6}}function px(e,t,r){const n=hN[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function xg(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=o=>{gN(o,n,r)};for(let o=0;o<e.length;o+=1)px(e.charCodeAt(o),s,a);return t.join("")}function fN(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function mN(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}fN(n,t)}}function gN(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function pN(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};for(let s=0;s<e.length;s+=1)px(e.charCodeAt(s),r,n);return new Uint8Array(t)}function yN(e){const t=[];return mN(e,r=>t.push(r)),new Uint8Array(t)}function xN(e){const t=[],r={queue:0,queuedBits:0},n=s=>{t.push(s)};return e.forEach(s=>yg(s,r,n)),yg(null,r,n),t.join("")}function vN(e){return Math.round(Date.now()/1e3)+e}function wN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ft=()=>typeof window<"u"&&typeof document<"u",Sn={tested:!1,writable:!1},Ya=()=>{if(!Ft())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sn.tested)return Sn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Sn.tested=!0,Sn.writable=!0}catch{Sn.tested=!0,Sn.writable=!1}return Sn.writable};function bN(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,a)=>{t[a]=s})}catch{}return r.searchParams.forEach((n,s)=>{t[s]=n}),t}const yx=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Or(async()=>{const{default:n}=await Promise.resolve().then(()=>ca);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},kN=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",xx=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},So=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},No=async(e,t)=>{await e.removeItem(t)};class yc{constructor(){this.promise=new yc.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}yc.promiseConstructor=Promise;function su(e){const t=e.split(".");if(t.length!==3)throw new Va("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!iN.test(t[n]))throw new Va("JWT not in base64url format");return{header:JSON.parse(xg(t[0])),payload:JSON.parse(xg(t[1])),signature:pN(t[2]),raw:{header:t[0],payload:t[1]}}}async function jN(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function SN(e,t){return new Promise((n,s)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){s(o);return}}})()})}function NN(e){return("0"+e.toString(16)).substr(-2)}function _N(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let a=0;a<56;a++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(t),Array.from(t,NN).join("")}async function EN(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(a=>String.fromCharCode(a)).join("")}async function TN(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await EN(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ds(e,t,r=!1){const n=_N();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await xx(e,`${t}-code-verifier`,s);const a=await TN(n);return[a,n===a?"plain":"s256"]}const CN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function DN(e){const t=e.headers.get(Ed);if(!t||!t.match(CN))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function PN(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function AN(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ON=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hs(e){if(!ON.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var LN=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};const Dn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),IN=[502,503,504];async function vg(e){var t;if(!kN(e))throw new Td(Dn(e),0);if(IN.includes(e.status))throw new Td(Dn(e),e.status);let r;try{r=await e.json()}catch(a){throw new gx(Dn(a),a)}let n;const s=DN(e);if(s&&s.getTime()>=mx["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new gg(Dn(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Br}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new gg(Dn(r),e.status,r.weak_password.reasons);throw new lN(Dn(r),e.status||500,n)}const RN=(e,t,r,n)=>{const s={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function Q(e,t,r,n){var s;const a=Object.assign({},n==null?void 0:n.headers);a[Ed]||(a[Ed]=mx["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await $N(e,t,r+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function $N(e,t,r,n,s,a){const o=RN(t,n,s,a);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Td(Dn(c),0)}if(l.ok||await vg(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await vg(c)}}function dr(e){var t;let r=null;UN(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=vN(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function wg(e){const t=dr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Xr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function MN(e){return{data:e,error:null}}function FN(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,o=LN(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function WN(e){return e}function UN(e){return e.access_token&&e.refresh_token&&e.expires_in}const au=["global","local","others"];var zN=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r};class BN{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=yx(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=au[0]){if(au.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${au.join(", ")}`);try{return await Q(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Q(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Xr})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=zN(t,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await Q(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:FN,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(K(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Q(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Xr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,s,a,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Q(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(s=t==null?void 0:t.perPage)===null||s===void 0?void 0:s.toString())!==null&&a!==void 0?a:""},xform:WN});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(x=>{const y=parseInt(x.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(x.split(";")[1].split("=")[1]);u[`${w}Page`]=y}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(K(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){hs(t);try{return await Q(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Xr})}catch(r){if(K(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){hs(t);try{return await Q(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Xr})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){hs(t);try{return await Q(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Xr})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){hs(t.userId);try{const{data:r,error:n}=await Q(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(K(r))return{data:null,error:r};throw r}}async _deleteFactor(t){hs(t.userId),hs(t.id);try{return{data:await Q(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}}const GN={getItem:e=>Ya()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ya()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ya()&&globalThis.localStorage.removeItem(e)}};function bg(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function qN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const fs={debug:!!(globalThis&&Ya()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vx extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class KN extends vx{}async function HN(e,t,r){fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),fs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await r()}finally{fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}else{if(t===0)throw fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new KN(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(fs.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}qN();const VN={url:nN,storageKey:sN,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:aN,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function kg(e,t,r){return await r()}class Ni{constructor(t){var r,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ni.nextInstanceID,Ni.nextInstanceID+=1,this.instanceID>0&&Ft()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},VN),t);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new BN({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=yx(s.fetch),this.lock=s.lock||kg,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Ft()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=HN:this.lock=kg,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ya()?this.storage=GN:(this.memoryStorage={},this.storage=bg(this.memoryStorage)):(this.memoryStorage={},this.storage=bg(this.memoryStorage)),Ft()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fx}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=bN(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ft()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),dN(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return K(r)?{error:r}:{error:new gx("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,s;try{const a=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=t==null?void 0:t.options)===null||s===void 0?void 0:s.captchaToken}},xform:dr}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,s;try{let a;if("email"in t){const{email:d,password:f,options:h}=t;let m=null,x=null;this.flowType==="pkce"&&([m,x]=await ds(this.storage,this.storageKey)),a=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:x},xform:dr})}else if("phone"in t){const{phone:d,password:f,options:h}=t;a=await Q(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(s=h==null?void 0:h.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:dr})}else throw new ko("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(K(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:l}=t;r=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:wg})}else if("phone"in t){const{phone:a,password:o,options:l}=t;r=await Q(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:wg})}else throw new ko("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new bo}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,s,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=t.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,s,a,o,l,c,u,d,f,h,m;let x,y;if("message"in t)x=t.message,y=t.signature;else{const{chain:w,wallet:g,statement:p,options:v}=t;let b;if(Ft())if(typeof g=="object")b=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))b=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(v!=null&&v.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=g}const j=new URL((r=v==null?void 0:v.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in b&&b.signIn){const S=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v==null?void 0:v.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),p?{statement:p}:null));let N;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")N=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)N=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in N&&"signature"in N&&(typeof N.signedMessage=="string"||N.signedMessage instanceof Uint8Array)&&N.signature instanceof Uint8Array)x=typeof N.signedMessage=="string"?N.signedMessage:new TextDecoder().decode(N.signedMessage),y=N.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in b)||typeof b.signMessage!="function"||!("publicKey"in b)||typeof b!="object"||!b.publicKey||!("toBase58"in b.publicKey)||typeof b.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");x=[`${j.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(s=(n=v==null?void 0:v.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((a=v==null?void 0:v.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v==null?void 0:v.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((l=v==null?void 0:v.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v==null?void 0:v.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((u=v==null?void 0:v.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((f=(d=v==null?void 0:v.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...v.signInWithSolana.resources.map(N=>`- ${N}`)]:[]].join(`
`);const S=await b.signMessage(new TextEncoder().encode(x),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:w,error:g}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:x,signature:xN(y)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:dr});if(g)throw g;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new bo}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:g})}catch(w){if(K(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await So(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:a,error:o}=await Q(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:dr});if(await No(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new bo}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:s??null}),error:o})}catch(a){if(K(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:s,access_token:a,nonce:o}=t,l=await Q(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:dr}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new bo}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,s,a,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await ds(this.storage,this.storageKey));const{error:f}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Q(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new ko("You must provide either an email or phone number.")}catch(l){if(K(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let s,a;"options"in t&&(s=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Q(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:s,xform:dr});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(K(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(t){var r,n,s;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await ds(this.storage,this.storageKey)),await Q(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=t==null?void 0:t.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:MN})}catch(a){if(K(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Br;const{error:s}=await Q(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(t){if(K(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:s,options:a}=t,{error:o}=await Q(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:s,options:a}=t,{data:o,error:l}=await Q(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new ko("You must provide either an email or phone number and a type")}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await So(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<ru:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Xr}):await this._useSession(async r=>{var n,s,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Br}:await Q(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&a!==void 0?a:void 0,xform:Xr})})}catch(r){if(K(r))return uN(r)&&(await this._removeSession(),await No(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:s,error:a}=n;if(a)throw a;if(!s.session)throw new Br;const o=s.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await ds(this.storage,this.storageKey));const{data:u,error:d}=await Q(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Xr});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(K(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Br;const r=Date.now()/1e3;let n=r,s=!0,a=null;const{payload:o}=su(t.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(K(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Br;const{session:s,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(K(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ft())throw new jo("No browser detected.");if(t.error||t.error_description||t.error_code)throw new jo(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new mg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new jo("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new mg("No code detected.");const{data:p,error:v}=await this._exchangeCodeForSession(t.code);if(v)throw v;const b=new URL(window.location.href);return b.searchParams.delete("code"),window.history.replaceState(window.history.state,"",b.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!a||!l||!o||!u)throw new jo("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const m=h-d;m*1e3<=vs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const x=h-f;d-x>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",x,h,d):d-x<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",x,h,d);const{data:y,error:w}=await this._getUser(a);if(w)throw w;const g={provider_token:n,provider_refresh_token:s,access_token:a,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(K(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await So(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{error:a};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(cN(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await No(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=wN(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,s;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((s=this.stateChangeEmitters.get(t))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ds(this.storage,this.storageKey,!0));try{return await Q(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(K(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(K(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:s}=await this._useSession(async a=>{var o,l,c,u,d;const{data:f,error:h}=a;if(h)throw h;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Q(this.fetch,"GET",m,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(s)throw s;return Ft()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(K(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)throw o;return await Q(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(s=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await SN(async s=>(s>0&&await jN(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await Q(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:dr})),(s,a)=>{const o=200*Math.pow(2,s);return a&&nu(a)&&Date.now()+o-n<vs})}catch(n){if(this._debug(r,"error",n),K(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ft()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const n=await So(this.storage,this.storageKey);if(this._debug(r,"session from storage",n),!this._isValidSession(n)){this._debug(r,"session is not valid"),n!==null&&await this._removeSession();return}const s=((t=n.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<ru;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${ru}s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),nu(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(r,"error",n),console.error(n);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Br;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yc;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new Br;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(s,"error",a),K(a)){const o={session:null,error:a};return nu(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(t,r,n=!0){const s=`#_notifyAllSubscribers(${t})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(s,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0,await xx(this.storage,this.storageKey,t)}async _removeSession(){this._debug("#_removeSession()"),await No(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ft()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),vs);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-t)/vs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${vs}ms, refresh threshold is ${_d} ticks`),s<=_d&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vx)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ft()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await ds(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);s.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${s.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Q(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,s;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Q(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(K(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:l}=await Q(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(K(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:a}=r;return a?{data:null,error:a}:await Q(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(K(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:s},error:a}=t;if(a)return{data:null,error:a};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=su(s.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(o=>o.kid===t);if(n||(n=this.jwks.keys.find(o=>o.kid===t),n&&this.jwks_cached_at+oN>Date.now()))return n;const{data:s,error:a}=await Q(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!s.keys||s.keys.length===0)throw new Va("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(o=>o.kid===t),!n)throw new Va("No matching signing key found in JWKS");return n}async getClaims(t,r={keys:[]}){try{let n=t;if(!n){const{data:m,error:x}=await this.getSession();if(x||!m.session)return{data:null,error:x};n=m.session.access_token}const{header:s,payload:a,signature:o,raw:{header:l,payload:c}}=su(n);if(PN(a.exp),!s.kid||s.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:s,signature:o},error:null}}const u=AN(s.alg),d=await this.fetchJwk(s.kid,r),f=await crypto.subtle.importKey("jwk",d,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,yN(`${l}.${c}`)))throw new Va("Invalid JWT signature");return{data:{claims:a,header:s,signature:o},error:null}}catch(n){if(K(n))return{data:null,error:n};throw n}}}Ni.nextInstanceID=0;const YN=Ni;class QN extends YN{constructor(t){super(t)}}var JN=function(e,t,r,n){function s(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?a(d.value):s(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class XN{constructor(t,r,n){var s,a,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=tN(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:HS,realtime:YS,auth:Object.assign(Object.assign({},VS),{storageKey:u}),global:KS},f=rN(n??{},d);this.storageKey=(s=f.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=ZS(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new pS(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new Kj(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new BS(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return JN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,storageKey:a,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new QN({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:s,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new CS(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ZN=(e,t,r)=>new XN(e,t,r),e_="https://kslvxxoykdkstnkjgpnd.supabase.co",t_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtzbHZ4eG95a2Rrc3Rua2pncG5kIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk4MTk5NTQsImV4cCI6MjA2NTM5NTk1NH0.PMSopl6yPSus2Gtvzqnd_0a6MRbMulIhk6MAwH33pc4",T=ZN(e_,t_,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),Vi={DEBUG:0,INFO:1,WARN:2,ERROR:3},r_=Vi.WARN;function xc(e){return e>=r_}function gt(e,...t){xc(Vi.DEBUG)&&console.log(` [DEBUG] ${e}`,...t)}function jg(e,...t){xc(Vi.INFO)&&console.log(` [INFO] ${e}`,...t)}function iu(e,...t){xc(Vi.WARN)&&console.warn(` [WARN] ${e}`,...t)}function mr(e,...t){xc(Vi.ERROR)&&console.error(` [ERROR] ${e}`,...t)}class n_{isSupabaseAvailable(){return!!T}getUnavailableError(){return{code:"SERVICE_UNAVAILABLE",message:"Authentication service is currently unavailable"}}handleNetworkError(t){console.error("Network error details:",t);const r=t;if((r==null?void 0:r.code)==="invalid_credentials")return{code:"INVALID_CREDENTIALS",message:"Invalid email or password"};if((r==null?void 0:r.code)==="email_not_confirmed")return{code:"EMAIL_NOT_CONFIRMED",message:"Please check your email and click the confirmation link"};if((r==null?void 0:r.code)==="signup_disabled")return{code:"SIGNUP_DISABLED",message:"New registrations are currently disabled"};const n=typeof(r==null?void 0:r.message)=="string"?r.message:"";return n.includes("fetch")||n.includes("network")||(r==null?void 0:r.code)==="NETWORK_ERROR"?{code:"NETWORK_ERROR",message:"Network connection failed. Please check your internet connection."}:n.includes("timeout")||(r==null?void 0:r.name)==="AbortError"?{code:"TIMEOUT",message:"Request timed out. Please try again."}:(r==null?void 0:r.code)==="42P01"||n.includes("does not exist")?{code:"DATABASE_ERROR",message:"Database configuration error. Please contact support."}:{code:"UNKNOWN_ERROR",message:n||"An unexpected error occurred"}}async register(t,r,n){if(!this.isSupabaseAvailable())return{user:null,error:this.getUnavailableError()};try{console.log(" Starting registration for:",{username:t,email:r});const{data:s,error:a}=await T.from("profiles").select("username").eq("username",t).maybeSingle();if(a&&a.code!=="PGRST116")throw a;if(s)return console.log(" Username already taken:",t),{user:null,error:{code:"USERNAME_TAKEN",message:"Username already taken"}};console.log(" Username available, proceeding with registration");const{data:o,error:l}=await T.auth.signUp({email:r,password:n,options:{data:{username:t},emailRedirectTo:void 0}});if(l)throw l;if(!o.user)return{user:null,error:{code:"SIGNUP_FAILED",message:"Registration failed"}};const c={id:o.user.id,name:t,email:o.user.email||r};return console.log(" Registration successful:",c),{user:c,error:null}}catch(s){console.error("Registration exception:",s);const a=s;return(typeof(a==null?void 0:a.message)=="string"?a.message:"").includes("User already registered")?{user:null,error:{code:"USER_ALREADY_EXISTS",message:"An account with this email already exists. Please try logging in instead."}}:{user:null,error:this.handleNetworkError(s)}}}async login(t,r){var n;if(!this.isSupabaseAvailable())return{user:null,error:this.getUnavailableError()};try{console.log(" Starting login with email:",t);const{data:s,error:a}=await T.auth.signInWithPassword({email:t,password:r});if(a)throw a;if(!s.user)return{user:null,error:{code:"LOGIN_FAILED",message:"Login failed"}};gt("Auth successful, fetching profile for user:",s.user.id);let o=null;try{const{data:c,error:u}=await T.from("profiles").select("username").eq("id",s.user.id).single();if(u)throw u;o=c}catch(c){iu("Profile fetch error (using fallback):",c)}const l={id:s.user.id,name:(o==null?void 0:o.username)||((n=s.user.user_metadata)==null?void 0:n.username)||"User",email:s.user.email||t};return jg("Login successful:",l),{user:l,error:null}}catch(s){return mr("Login error:",s),{user:null,error:this.handleNetworkError(s)}}}async loginWithUsername(t,r){if(!this.isSupabaseAvailable())return mr("Supabase client not available"),{user:null,error:this.getUnavailableError()};try{gt("Starting login with username:",t);let n=null,s=null;try{const{data:a,error:o}=await T.from("user_lookup").select("id, username, email").eq("username",t).single();if(o)throw o;n=a,s=(n==null?void 0:n.email)||null,gt("Found profile via user_lookup:",n)}catch(a){gt("user_lookup failed, trying profiles table:",a);try{const{data:o,error:l}=await T.from("profiles").select("id, username").eq("username",t).single();if(l)throw l;n=o,gt("Found profile via profiles table:",n),n&&(s=`${t}@temp.local`)}catch(o){gt("profiles table also failed:",o)}}return!n||!s?(iu("Profile not found for username:",t),{user:null,error:{code:"USER_NOT_FOUND",message:"Username not found"}}):(gt("Profile found, attempting login with email:",s),await this.login(s,r))}catch(n){return mr("Username login error:",n),{user:null,error:this.handleNetworkError(n)}}}async getCurrentUser(){if(!this.isSupabaseAvailable())return null;try{const t=new Promise((n,s)=>{setTimeout(()=>s(new Error("getCurrentUser timeout")),3e3)}),r=async()=>{var o;const{data:{user:n},error:s}=await T.auth.getUser();if(s||!n)return gt("No authenticated user found"),null;let a=null;try{const l=T.from("profiles").select("username").eq("id",n.id).single(),c=new Promise((d,f)=>{setTimeout(()=>f(new Error("Profile fetch timeout")),2e3)}),{data:u}=await Promise.race([l,c]);a=u}catch(l){iu("Profile fetch failed, using auth metadata:",l)}return{id:n.id,name:(a==null?void 0:a.username)||((o=n.user_metadata)==null?void 0:o.username)||"User",email:n.email||""}};return await Promise.race([r(),t])}catch(t){return mr("Error getting current user:",t),null}}async logout(){if(this.isSupabaseAvailable())try{await T.auth.signOut(),jg("Logout successful")}catch(t){mr("Logout error:",t)}}onAuthStateChange(t){if(!this.isSupabaseAvailable())return()=>{};const{data:{subscription:r}}=T.auth.onAuthStateChange(async(n,s)=>{var a,o;if(gt("Auth state changed:",n,(a=s==null?void 0:s.user)==null?void 0:a.id),s!=null&&s.user)try{const l={id:s.user.id,name:((o=s.user.user_metadata)==null?void 0:o.username)||"User",email:s.user.email||""};try{const c=T.from("profiles").select("username").eq("id",s.user.id).single(),u=new Promise((f,h)=>{setTimeout(()=>h(new Error("Quick profile timeout")),1e3)}),{data:d}=await Promise.race([c,u]);d!=null&&d.username&&(l.name=d.username)}catch(c){gt("Quick profile fetch failed, using session data:",c)}t(l)}catch(l){mr("Error in auth state change:",l),t(null)}else t(null)});return()=>r.unsubscribe()}async getSession(){var t;if(!this.isSupabaseAvailable())return null;try{const{data:{session:r},error:n}=await T.auth.getSession();return n||!(r!=null&&r.user)?(gt("No active session found"),null):{id:r.user.id,name:((t=r.user.user_metadata)==null?void 0:t.username)||"User",email:r.user.email||""}}catch(r){return mr("Error getting session:",r),null}}}const Pn=new n_;class s_{constructor(){$r(this,"USERS_KEY","zenkai_users");$r(this,"CURRENT_USER_KEY","zenkai_current_user")}hashPassword(t){let r=0;for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);r=(r<<5)-r+s,r=r&r}return r.toString()}getStoredUsers(){try{const t=localStorage.getItem(this.USERS_KEY);return t?JSON.parse(t):[]}catch{return[]}}saveUsers(t){localStorage.setItem(this.USERS_KEY,JSON.stringify(t))}generateUserId(){return"user_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}async register(t){const r=this.getStoredUsers();if(r.find(a=>a.username===t.username))throw new Error("Username already exists");const n={id:this.generateUserId(),username:t.username,email:t.email,name:t.name||t.username,passwordHash:this.hashPassword(t.password),createdAt:new Date().toISOString()};return r.push(n),this.saveUsers(r),{id:n.id,email:n.email||"",name:n.name||n.username,username:n.username}}async login(t){const r=this.getStoredUsers(),n=this.hashPassword(t.password),s=r.find(l=>l.username===t.username&&l.passwordHash===n);if(!s)throw new Error("Invalid username or password");const a=`token_${s.id}_${Date.now()}`;return localStorage.setItem(this.CURRENT_USER_KEY,JSON.stringify({user:s,token:a,loginTime:Date.now()})),{user:{id:s.id,email:s.email||"",name:s.name||s.username,username:s.username},token:a}}getCurrentUser(){try{const t=localStorage.getItem(this.CURRENT_USER_KEY);if(!t)return null;const r=JSON.parse(t),n=r.loginTime||0;return Date.now()-n>7*24*60*60*1e3?(this.logout(),null):{user:{id:r.user.id,email:r.user.email||"",name:r.user.name||r.user.username,username:r.user.username},token:r.token}}catch{return null}}logout(){localStorage.removeItem(this.CURRENT_USER_KEY)}isTokenValid(t){const r=this.getCurrentUser();return(r==null?void 0:r.token)===t}getAllUsernames(){return this.getStoredUsers().map(t=>t.username)}}const Nn=new s_,he=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pe=Object.keys,Ye=Array.isArray;function rt(e,t){return typeof t!="object"||Pe(t).forEach(function(r){e[r]=t[r]}),e}typeof Promise>"u"||he.Promise||(he.Promise=Promise);const _i=Object.getPrototypeOf,a_={}.hasOwnProperty;function wt(e,t){return a_.call(e,t)}function ra(e,t){typeof t=="function"&&(t=t(_i(e))),(typeof Reflect>"u"?Pe:Reflect.ownKeys)(t).forEach(r=>{Nr(e,r,t[r])})}const wx=Object.defineProperty;function Nr(e,t,r,n){wx(e,t,rt(r&&wt(r,"get")&&typeof r.get=="function"?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function zs(e){return{from:function(t){return e.prototype=Object.create(t.prototype),Nr(e.prototype,"constructor",e),{extend:ra.bind(null,e.prototype)}}}}const i_=Object.getOwnPropertyDescriptor;function xf(e,t){let r;return i_(e,t)||(r=_i(e))&&xf(r,t)}const o_=[].slice;function Ll(e,t,r){return o_.call(e,t,r)}function bx(e,t){return t(e)}function Ra(e){if(!e)throw new Error("Assertion Failed")}function kx(e){he.setImmediate?setImmediate(e):setTimeout(e,0)}function jx(e,t){return e.reduce((r,n,s)=>{var a=t(n,s);return a&&(r[a[0]]=a[1]),r},{})}function _r(e,t){if(typeof t=="string"&&wt(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var r=[],n=0,s=t.length;n<s;++n){var a=_r(e,t[n]);r.push(a)}return r}var o=t.indexOf(".");if(o!==-1){var l=e[t.substr(0,o)];return l==null?void 0:_r(l,t.substr(o+1))}}function Ht(e,t,r){if(e&&t!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){Ra(typeof r!="string"&&"length"in r);for(var n=0,s=t.length;n<s;++n)Ht(e,t[n],r[n])}else{var a=t.indexOf(".");if(a!==-1){var o=t.substr(0,a),l=t.substr(a+1);if(l==="")r===void 0?Ye(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=r;else{var c=e[o];c&&wt(e,o)||(c=e[o]={}),Ht(c,l,r)}}else r===void 0?Ye(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function Sx(e){var t={};for(var r in e)wt(e,r)&&(t[r]=e[r]);return t}const l_=[].concat;function Nx(e){return l_.apply([],e)}const _x="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Nx([8,16,32,64].map(e=>["Int","Uint","Float"].map(t=>t+e+"Array")))).filter(e=>he[e]),c_=_x.map(e=>he[e]);jx(_x,e=>[e,!0]);let Yr=null;function Yi(e){Yr=typeof WeakMap<"u"&&new WeakMap;const t=Cd(e);return Yr=null,t}function Cd(e){if(!e||typeof e!="object")return e;let t=Yr&&Yr.get(e);if(t)return t;if(Ye(e)){t=[],Yr&&Yr.set(e,t);for(var r=0,n=e.length;r<n;++r)t.push(Cd(e[r]))}else if(c_.indexOf(e.constructor)>=0)t=e;else{const a=_i(e);for(var s in t=a===Object.prototype?{}:Object.create(a),Yr&&Yr.set(e,t),e)wt(e,s)&&(t[s]=Cd(e[s]))}return t}const{toString:u_}={};function Dd(e){return u_.call(e).slice(8,-1)}const Pd=typeof Symbol<"u"?Symbol.iterator:"@@iterator",d_=typeof Pd=="symbol"?function(e){var t;return e!=null&&(t=e[Pd])&&t.apply(e)}:function(){return null},ws={};function yr(e){var t,r,n,s;if(arguments.length===1){if(Ye(e))return e.slice();if(this===ws&&typeof e=="string")return[e];if(s=d_(e)){for(r=[];!(n=s.next()).done;)r.push(n.value);return r}if(e==null)return[e];if(typeof(t=e.length)=="number"){for(r=new Array(t);t--;)r[t]=e[t];return r}return[e]}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}const vf=typeof Symbol<"u"?e=>e[Symbol.toStringTag]==="AsyncFunction":()=>!1;var ir=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Ex(e,t){ir=e,Tx=t}var Tx=()=>!0;const h_=!new Error("").stack;function ss(){if(h_)try{throw ss.arguments,new Error}catch(e){return e}return new Error}function Ad(e,t){var r=e.stack;return r?(t=t||0,r.indexOf(e.name)===0&&(t+=(e.name+e.message).split(`
`).length),r.split(`
`).slice(t).filter(Tx).map(n=>`
`+n).join("")):""}var Cx=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],wf=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Cx),f_={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Bs(e,t){this._e=ss(),this.name=e,this.message=t}function Dx(e,t){return e+". Errors: "+Object.keys(t).map(r=>t[r].toString()).filter((r,n,s)=>s.indexOf(r)===n).join(`
`)}function Il(e,t,r,n){this._e=ss(),this.failures=t,this.failedKeys=n,this.successCount=r,this.message=Dx(e,t)}function Qa(e,t){this._e=ss(),this.name="BulkError",this.failures=Object.keys(t).map(r=>t[r]),this.failuresByPos=t,this.message=Dx(e,t)}zs(Bs).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Ad(this._e,2))}},toString:function(){return this.name+": "+this.message}}),zs(Il).from(Bs),zs(Qa).from(Bs);var bf=wf.reduce((e,t)=>(e[t]=t+"Error",e),{});const m_=Bs;var B=wf.reduce((e,t)=>{var r=t+"Error";function n(s,a){this._e=ss(),this.name=r,s?typeof s=="string"?(this.message=`${s}${a?`
 `+a:""}`,this.inner=a||null):typeof s=="object"&&(this.message=`${s.name} ${s.message}`,this.inner=s):(this.message=f_[t]||r,this.inner=null)}return zs(n).from(m_),e[t]=n,e},{});B.Syntax=SyntaxError,B.Type=TypeError,B.Range=RangeError;var Sg=Cx.reduce((e,t)=>(e[t+"Error"]=B[t],e),{}),Zo=wf.reduce((e,t)=>(["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=B[t]),e),{});function ae(){}function Ei(e){return e}function g_(e,t){return e==null||e===Ei?t:function(r){return t(e(r))}}function Zn(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function p_(e,t){return e===ae?t:function(){var r=e.apply(this,arguments);r!==void 0&&(arguments[0]=r);var n=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Zn(n,this.onsuccess):n),s&&(this.onerror=this.onerror?Zn(s,this.onerror):s),a!==void 0?a:r}}function y_(e,t){return e===ae?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?Zn(r,this.onsuccess):r),n&&(this.onerror=this.onerror?Zn(n,this.onerror):n)}}function x_(e,t){return e===ae?t:function(r){var n=e.apply(this,arguments);rt(r,n);var s=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return s&&(this.onsuccess=this.onsuccess?Zn(s,this.onsuccess):s),a&&(this.onerror=this.onerror?Zn(a,this.onerror):a),n===void 0?o===void 0?void 0:o:rt(n,o)}}function v_(e,t){return e===ae?t:function(){return t.apply(this,arguments)!==!1&&e.apply(this,arguments)}}function kf(e,t){return e===ae?t:function(){var r=e.apply(this,arguments);if(r&&typeof r.then=="function"){for(var n=this,s=arguments.length,a=new Array(s);s--;)a[s]=arguments[s];return r.then(function(){return t.apply(n,a)})}return t.apply(this,arguments)}}Zo.ModifyError=Il,Zo.DexieError=Bs,Zo.BulkError=Qa;var Ti={};const Px=100,[Od,Rl,Ld]=typeof Promise>"u"?[]:(()=>{let e=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[e,_i(e),e];const t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,_i(t),e]})(),Ax=Rl&&Rl.then,el=Od&&Od.constructor,jf=!!Ld;var Id=!1,w_=Ld?()=>{Ld.then(_o)}:he.setImmediate?setImmediate.bind(null,_o):he.MutationObserver?()=>{var e=document.createElement("div");new MutationObserver(()=>{_o(),e=null}).observe(e,{attributes:!0}),e.setAttribute("i","1")}:()=>{setTimeout(_o,0)},Ja=function(e,t){$a.push([e,t]),$l&&(w_(),$l=!1)},Rd=!0,$l=!0,qn=[],tl=[],$d=null,Md=Ei,Gs={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Eg,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(e=>{try{Eg(e[0],e[1])}catch{}})}},W=Gs,$a=[],Kn=0,rl=[];function I(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ae,this._lib=!1;var t=this._PSD=W;if(ir&&(this._stackHolder=ss(),this._prev=null,this._numPrev=0),typeof e!="function"){if(e!==Ti)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Wd(this,this._value))}this._state=null,this._value=null,++t.ref,Lx(this,e)}const Fd={get:function(){var e=W,t=Ml;function r(n,s){var a=!e.global&&(e!==W||t!==Ml);const o=a&&!Lr();var l=new I((c,u)=>{Sf(this,new Ox(Fl(n,e,a,o),Fl(s,e,a,o),c,u,e))});return ir&&$x(l,this),l}return r.prototype=Ti,r},set:function(e){Nr(this,"then",e&&e.prototype===Ti?Fd:{get:function(){return e},set:Fd.set})}};function Ox(e,t,r,n,s){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=r,this.reject=n,this.psd=s}function Lx(e,t){try{t(r=>{if(e._state===null){if(r===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&Qi();r&&typeof r.then=="function"?Lx(e,(s,a)=>{r instanceof I?r._then(s,a):r.then(s,a)}):(e._state=!0,e._value=r,Ix(e)),n&&Ji()}},Wd.bind(null,e))}catch(r){Wd(e,r)}}function Wd(e,t){if(tl.push(t),e._state===null){var r=e._lib&&Qi();t=Md(t),e._state=!1,e._value=t,ir&&t!==null&&typeof t=="object"&&!t._promise&&function(n,s,a){try{n.apply(null,a)}catch{}}(()=>{var n=xf(t,"stack");t._promise=e,Nr(t,"stack",{get:()=>Id?n&&(n.get?n.get.apply(t):n.value):e.stack})}),function(n){qn.some(s=>s._value===n._value)||qn.push(n)}(e),Ix(e),r&&Ji()}}function Ix(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Sf(e,t[r]);var s=e._PSD;--s.ref||s.finalize(),Kn===0&&(++Kn,Ja(()=>{--Kn==0&&Nf()},[]))}function Sf(e,t){if(e._state!==null){var r=e._state?t.onFulfilled:t.onRejected;if(r===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++Kn,Ja(b_,[r,e,t])}else e._listeners.push(t)}function b_(e,t,r){try{$d=t;var n,s=t._value;t._state?n=e(s):(tl.length&&(tl=[]),n=e(s),tl.indexOf(s)===-1&&function(a){for(var o=qn.length;o;)if(qn[--o]._value===a._value)return void qn.splice(o,1)}(t)),r.resolve(n)}catch(a){r.reject(a)}finally{$d=null,--Kn==0&&Nf(),--r.psd.ref||r.psd.finalize()}}function Rx(e,t,r){if(t.length===r)return t;var n="";if(e._state===!1){var s,a,o=e._value;o!=null?(s=o.name||"Error",a=o.message||o,n=Ad(o,0)):(s=o,a=""),t.push(s+(a?": "+a:"")+n)}return ir&&((n=Ad(e._stackHolder,2))&&t.indexOf(n)===-1&&t.push(n),e._prev&&Rx(e._prev,t,r)),t}function $x(e,t){var r=t?t._numPrev+1:0;r<100&&(e._prev=t,e._numPrev=r)}function _o(){Qi()&&Ji()}function Qi(){var e=Rd;return Rd=!1,$l=!1,e}function Ji(){var e,t,r;do for(;$a.length>0;)for(e=$a,$a=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}while($a.length>0);Rd=!0,$l=!0}function Nf(){var e=qn;qn=[],e.forEach(n=>{n._PSD.onunhandled.call(null,n._value,n)});for(var t=rl.slice(0),r=t.length;r;)t[--r]()}function Eo(e){return new I(Ti,!1,e)}function ye(e,t){var r=W;return function(){var n=Qi(),s=W;try{return pn(r,!0),e.apply(this,arguments)}catch(a){t&&t(a)}finally{pn(s,!1),n&&Ji()}}}ra(I.prototype,{then:Fd,_then:function(e,t){Sf(this,new Ox(null,null,e,t,W))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],r=arguments[1];return typeof t=="function"?this.then(null,n=>n instanceof t?r(n):Eo(n)):this.then(null,n=>n&&n.name===t?r(n):Eo(n))},finally:function(e){return this.then(t=>(e(),t),t=>(e(),Eo(t)))},stack:{get:function(){if(this._stack)return this._stack;try{Id=!0;var e=Rx(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=e),e}finally{Id=!1}}},timeout:function(e,t){return e<1/0?new I((r,n)=>{var s=setTimeout(()=>n(new B.Timeout(t)),e);this.then(r,n).finally(clearTimeout.bind(null,s))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Nr(I.prototype,Symbol.toStringTag,"Dexie.Promise"),Gs.env=Mx(),ra(I,{all:function(){var e=yr.apply(null,arguments).map(To);return new I(function(t,r){e.length===0&&t([]);var n=e.length;e.forEach((s,a)=>I.resolve(s).then(o=>{e[a]=o,--n||t(e)},r))})},resolve:e=>{if(e instanceof I)return e;if(e&&typeof e.then=="function")return new I((r,n)=>{e.then(r,n)});var t=new I(Ti,!0,e);return $x(t,$d),t},reject:Eo,race:function(){var e=yr.apply(null,arguments).map(To);return new I((t,r)=>{e.map(n=>I.resolve(n).then(t,r))})},PSD:{get:()=>W,set:e=>W=e},totalEchoes:{get:()=>Ml},newPSD:gn,usePSD:ha,scheduler:{get:()=>Ja,set:e=>{Ja=e}},rejectionMapper:{get:()=>Md,set:e=>{Md=e}},follow:(e,t)=>new I((r,n)=>gn((s,a)=>{var o=W;o.unhandleds=[],o.onunhandled=a,o.finalize=Zn(function(){(function(l){function c(){l(),rl.splice(rl.indexOf(c),1)}rl.push(c),++Kn,Ja(()=>{--Kn==0&&Nf()},[])})(()=>{this.unhandleds.length===0?s():a(this.unhandleds[0])})},o.finalize),e()},t,r,n))}),el&&(el.allSettled&&Nr(I,"allSettled",function(){const e=yr.apply(null,arguments).map(To);return new I(t=>{e.length===0&&t([]);let r=e.length;const n=new Array(r);e.forEach((s,a)=>I.resolve(s).then(o=>n[a]={status:"fulfilled",value:o},o=>n[a]={status:"rejected",reason:o}).then(()=>--r||t(n)))})}),el.any&&typeof AggregateError<"u"&&Nr(I,"any",function(){const e=yr.apply(null,arguments).map(To);return new I((t,r)=>{e.length===0&&r(new AggregateError([]));let n=e.length;const s=new Array(n);e.forEach((a,o)=>I.resolve(a).then(l=>t(l),l=>{s[o]=l,--n||r(new AggregateError(s))}))})}));const Ve={awaits:0,echoes:0,id:0};var k_=0,nl=[],ou=0,Ml=0,j_=0;function gn(e,t,r,n){var s=W,a=Object.create(s);a.parent=s,a.ref=0,a.global=!1,a.id=++j_;var o=Gs.env;a.env=jf?{Promise:I,PromiseProp:{value:I,configurable:!0,writable:!0},all:I.all,race:I.race,allSettled:I.allSettled,any:I.any,resolve:I.resolve,reject:I.reject,nthen:Ng(o.nthen,a),gthen:Ng(o.gthen,a)}:{},t&&rt(a,t),++s.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var l=ha(a,e,r,n);return a.ref===0&&a.finalize(),l}function da(){return Ve.id||(Ve.id=++k_),++Ve.awaits,Ve.echoes+=Px,Ve.id}function Lr(){return!!Ve.awaits&&(--Ve.awaits==0&&(Ve.id=0),Ve.echoes=Ve.awaits*Px,!0)}function To(e){return Ve.echoes&&e&&e.constructor===el?(da(),e.then(t=>(Lr(),t),t=>(Lr(),Le(t)))):e}function S_(e){++Ml,Ve.echoes&&--Ve.echoes!=0||(Ve.echoes=Ve.id=0),nl.push(W),pn(e,!0)}function N_(){var e=nl[nl.length-1];nl.pop(),pn(e,!1)}function pn(e,t){var r=W;if((t?!Ve.echoes||ou++&&e===W:!ou||--ou&&e===W)||Fx(t?S_.bind(null,e):N_),e!==W&&(W=e,r===Gs&&(Gs.env=Mx()),jf)){var n=Gs.env.Promise,s=e.env;Rl.then=s.nthen,n.prototype.then=s.gthen,(r.global||e.global)&&(Object.defineProperty(he,"Promise",s.PromiseProp),n.all=s.all,n.race=s.race,n.resolve=s.resolve,n.reject=s.reject,s.allSettled&&(n.allSettled=s.allSettled),s.any&&(n.any=s.any))}}function Mx(){var e=he.Promise;return jf?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(he,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject,nthen:Rl.then,gthen:e.prototype.then}:{}}function ha(e,t,r,n,s){var a=W;try{return pn(e,!0),t(r,n,s)}finally{pn(a,!1)}}function Fx(e){Ax.call(Od,e)}function Fl(e,t,r,n){return typeof e!="function"?e:function(){var s=W;r&&da(),pn(t,!0);try{return e.apply(this,arguments)}finally{pn(s,!1),n&&Fx(Lr)}}}function Ng(e,t){return function(r,n){return e.call(this,Fl(r,t),Fl(n,t))}}(""+Ax).indexOf("[native code]")===-1&&(da=Lr=ae);const _g="unhandledrejection";function Eg(e,t){var r;try{r=t.onuncatched(e)}catch{}if(r!==!1)try{var n,s={promise:t,reason:e};if(he.document&&document.createEvent?((n=document.createEvent("Event")).initEvent(_g,!0,!0),rt(n,s)):he.CustomEvent&&rt(n=new CustomEvent(_g,{detail:s}),s),n&&he.dispatchEvent&&(dispatchEvent(n),!he.PromiseRejectionEvent&&he.onunhandledrejection))try{he.onunhandledrejection(n)}catch{}ir&&n&&!n.defaultPrevented&&console.warn(`Unhandled rejection: ${e.stack||e}`)}catch{}}var Le=I.reject;function Ud(e,t,r,n){if(e.idbdb&&(e._state.openComplete||W.letThrough||e._vip)){var s=e._createTransaction(t,r,e._dbSchema);try{s.create(),e._state.PR1398_maxLoop=3}catch(a){return a.name===bf.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Ud(e,t,r,n))):Le(a)}return s._promise(t,(a,o)=>gn(()=>(W.trans=s,n(a,o,s)))).then(a=>s._completion.then(()=>a))}if(e._state.openComplete)return Le(new B.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._options.autoOpen)return Le(new B.DatabaseClosed);e.open().catch(ae)}return e._state.dbReadyPromise.then(()=>Ud(e,t,r,n))}const Tg="3.2.7",$n="",zd=-1/0,lr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Wx="String expected.",Xa=[],vc=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),__=vc,E_=vc,Ux=e=>!/(dexie\.js|dexie\.min\.js)/.test(e),wc="__dbnames",lu="readonly",cu="readwrite";function es(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}const zx={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Co(e){return typeof e!="string"||/\./.test(e)?t=>t:t=>(t[e]===void 0&&e in t&&delete(t=Yi(t))[e],t)}class T_{_trans(t,r,n){const s=this._tx||W.trans,a=this.name;function o(c,u,d){if(!d.schema[a])throw new B.NotFound("Table "+a+" not part of transaction");return r(d.idbtrans,d)}const l=Qi();try{return s&&s.db===this.db?s===W.trans?s._promise(t,o,n):gn(()=>s._promise(t,o,n),{trans:s,transless:W.transless||W}):Ud(this.db,t,[this.name],o)}finally{l&&Ji()}}get(t,r){return t&&t.constructor===Object?this.where(t).first(r):this._trans("readonly",n=>this.core.get({trans:n,key:t}).then(s=>this.hook.reading.fire(s))).then(r)}where(t){if(typeof t=="string")return new this.db.WhereClause(this,t);if(Ye(t))return new this.db.WhereClause(this,`[${t.join("+")}]`);const r=Pe(t);if(r.length===1)return this.where(r[0]).equals(t[r[0]]);const n=this.schema.indexes.concat(this.schema.primKey).filter(u=>{if(u.compound&&r.every(d=>u.keyPath.indexOf(d)>=0)){for(let d=0;d<r.length;++d)if(r.indexOf(u.keyPath[d])===-1)return!1;return!0}return!1}).sort((u,d)=>u.keyPath.length-d.keyPath.length)[0];if(n&&this.db._maxKey!==$n){const u=n.keyPath.slice(0,r.length);return this.where(u).equals(u.map(d=>t[d]))}!n&&ir&&console.warn(`The query ${JSON.stringify(t)} on ${this.name} would benefit of a compound index [${r.join("+")}]`);const{idxByName:s}=this.schema,a=this.db._deps.indexedDB;function o(u,d){try{return a.cmp(u,d)===0}catch{return!1}}const[l,c]=r.reduce(([u,d],f)=>{const h=s[f],m=t[f];return[u||h,u||!h?es(d,h&&h.multi?x=>{const y=_r(x,f);return Ye(y)&&y.some(w=>o(m,w))}:x=>o(m,_r(x,f))):d]},[null,null]);return l?this.where(l.name).equals(t[l.keyPath]).filter(c):n?this.filter(c):this.where(r).equals("")}filter(t){return this.toCollection().and(t)}count(t){return this.toCollection().count(t)}offset(t){return this.toCollection().offset(t)}limit(t){return this.toCollection().limit(t)}each(t){return this.toCollection().each(t)}toArray(t){return this.toCollection().toArray(t)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(t){return new this.db.Collection(new this.db.WhereClause(this,Ye(t)?`[${t.join("+")}]`:t))}reverse(){return this.toCollection().reverse()}mapToClass(t){this.schema.mappedClass=t;const r=n=>{if(!n)return n;const s=Object.create(t.prototype);for(var a in n)if(wt(n,a))try{s[a]=n[a]}catch{}return s};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t}defineClass(){return this.mapToClass(function(t){rt(this,t)})}add(t,r){const{auto:n,keyPath:s}=this.schema.primKey;let a=t;return s&&n&&(a=Co(s)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:r!=null?[r]:null,values:[a]})).then(o=>o.numFailures?I.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{Ht(t,s,o)}catch{}return o})}update(t,r){if(typeof t!="object"||Ye(t))return this.where(":id").equals(t).modify(r);{const n=_r(t,this.schema.primKey.keyPath);if(n===void 0)return Le(new B.InvalidArgument("Given object does not contain its primary key"));try{typeof r!="function"?Pe(r).forEach(s=>{Ht(t,s,r[s])}):r(t,{value:t,primKey:n})}catch{}return this.where(":id").equals(n).modify(r)}}put(t,r){const{auto:n,keyPath:s}=this.schema.primKey;let a=t;return s&&n&&(a=Co(s)(t)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[a],keys:r!=null?[r]:null})).then(o=>o.numFailures?I.reject(o.failures[0]):o.lastResult).then(o=>{if(s)try{Ht(t,s,o)}catch{}return o})}delete(t){return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:[t]})).then(r=>r.numFailures?I.reject(r.failures[0]):void 0)}clear(){return this._trans("readwrite",t=>this.core.mutate({trans:t,type:"deleteRange",range:zx})).then(t=>t.numFailures?I.reject(t.failures[0]):void 0)}bulkGet(t){return this._trans("readonly",r=>this.core.getMany({keys:t,trans:r}).then(n=>n.map(s=>this.hook.reading.fire(s))))}bulkAdd(t,r,n){const s=Array.isArray(r)?r:void 0,a=(n=n||(s?void 0:r))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&s)throw new B.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");const u=t.length;let d=c&&l?t.map(Co(c)):t;return this.core.mutate({trans:o,type:"add",keys:s,values:d,wantResults:a}).then(({numFailures:f,results:h,lastResult:m,failures:x})=>{if(f===0)return a?h:m;throw new Qa(`${this.name}.bulkAdd(): ${f} of ${u} operations failed`,x)})})}bulkPut(t,r,n){const s=Array.isArray(r)?r:void 0,a=(n=n||(s?void 0:r))?n.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:l,keyPath:c}=this.schema.primKey;if(c&&s)throw new B.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(s&&s.length!==t.length)throw new B.InvalidArgument("Arguments objects and keys must have the same length");const u=t.length;let d=c&&l?t.map(Co(c)):t;return this.core.mutate({trans:o,type:"put",keys:s,values:d,wantResults:a}).then(({numFailures:f,results:h,lastResult:m,failures:x})=>{if(f===0)return a?h:m;throw new Qa(`${this.name}.bulkPut(): ${f} of ${u} operations failed`,x)})})}bulkDelete(t){const r=t.length;return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:t})).then(({numFailures:n,lastResult:s,failures:a})=>{if(n===0)return s;throw new Qa(`${this.name}.bulkDelete(): ${n} of ${r} operations failed`,a)})}}function Za(e){var t={},r=function(o,l){if(l){for(var c=arguments.length,u=new Array(c-1);--c;)u[c-1]=arguments[c];return t[o].subscribe.apply(null,u),e}if(typeof o=="string")return t[o]};r.addEventType=a;for(var n=1,s=arguments.length;n<s;++n)a(arguments[n]);return r;function a(o,l,c){if(typeof o!="object"){var u;l||(l=v_),c||(c=ae);var d={subscribers:[],fire:c,subscribe:function(f){d.subscribers.indexOf(f)===-1&&(d.subscribers.push(f),d.fire=l(d.fire,f))},unsubscribe:function(f){d.subscribers=d.subscribers.filter(function(h){return h!==f}),d.fire=d.subscribers.reduce(l,c)}};return t[o]=r[o]=d,d}Pe(u=o).forEach(function(f){var h=u[f];if(Ye(h))a(f,u[f][0],u[f][1]);else{if(h!=="asap")throw new B.InvalidArgument("Invalid event config");var m=a(f,Ei,function(){for(var x=arguments.length,y=new Array(x);x--;)y[x]=arguments[x];m.subscribers.forEach(function(w){kx(function(){w.apply(null,y)})})})}})}}function Sa(e,t){return zs(t).from({prototype:e}),t}function ms(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function uu(e,t){e.filter=es(e.filter,t)}function du(e,t,r){var n=e.replayFilter;e.replayFilter=n?()=>es(n(),t()):t,e.justLimit=r&&!n}function sl(e,t){if(e.isPrimKey)return t.primaryKey;const r=t.getIndexByKeyPath(e.index);if(!r)throw new B.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function Cg(e,t,r){const n=sl(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:n,range:e.range}})}function Do(e,t,r,n){const s=e.replayFilter?es(e.filter,e.replayFilter()):e.filter;if(e.or){const a={},o=(l,c,u)=>{if(!s||s(c,u,h=>c.stop(h),h=>c.fail(h))){var d=c.primaryKey,f=""+d;f==="[object ArrayBuffer]"&&(f=""+new Uint8Array(d)),wt(a,f)||(a[f]=!0,t(l,c,u))}};return Promise.all([e.or._iterate(o,r),Dg(Cg(e,n,r),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Dg(Cg(e,n,r),es(e.algorithm,s),t,!e.keysOnly&&e.valueMapper)}function Dg(e,t,r,n){var s=ye(n?(a,o,l)=>r(n(a),o,l):r);return e.then(a=>{if(a)return a.start(()=>{var o=()=>a.continue();t&&!t(a,l=>o=l,l=>{a.stop(l),o=ae},l=>{a.fail(l),o=ae})||s(a.value,a,l=>o=l),o()})})}function et(e,t){try{const r=Pg(e),n=Pg(t);if(r!==n)return r==="Array"?1:n==="Array"?-1:r==="binary"?1:n==="binary"?-1:r==="string"?1:n==="string"?-1:r==="Date"?1:n!=="Date"?NaN:-1;switch(r){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return function(s,a){const o=s.length,l=a.length,c=o<l?o:l;for(let u=0;u<c;++u)if(s[u]!==a[u])return s[u]<a[u]?-1:1;return o===l?0:o<l?-1:1}(Ag(e),Ag(t));case"Array":return function(s,a){const o=s.length,l=a.length,c=o<l?o:l;for(let u=0;u<c;++u){const d=et(s[u],a[u]);if(d!==0)return d}return o===l?0:o<l?-1:1}(e,t)}}catch{}return NaN}function Pg(e){const t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";const r=Dd(e);return r==="ArrayBuffer"?"binary":r}function Ag(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}class C_{_read(t,r){var n=this._ctx;return n.error?n.table._trans(null,Le.bind(null,n.error)):n.table._trans("readonly",t).then(r)}_write(t){var r=this._ctx;return r.error?r.table._trans(null,Le.bind(null,r.error)):r.table._trans("readwrite",t,"locked")}_addAlgorithm(t){var r=this._ctx;r.algorithm=es(r.algorithm,t)}_iterate(t,r){return Do(this._ctx,t,r,this._ctx.table.core)}clone(t){var r=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&rt(n,t),r._ctx=n,r}raw(){return this._ctx.valueMapper=null,this}each(t){var r=this._ctx;return this._read(n=>Do(r,t,n,r.table.core))}count(t){return this._read(r=>{const n=this._ctx,s=n.table.core;if(ms(n,!0))return s.count({trans:r,query:{index:sl(n,s.schema),range:n.range}}).then(o=>Math.min(o,n.limit));var a=0;return Do(n,()=>(++a,!1),r,s).then(()=>a)}).then(t)}sortBy(t,r){const n=t.split(".").reverse(),s=n[0],a=n.length-1;function o(u,d){return d?o(u[n[d]],d-1):u[s]}var l=this._ctx.dir==="next"?1:-1;function c(u,d){var f=o(u,a),h=o(d,a);return f<h?-l:f>h?l:0}return this.toArray(function(u){return u.sort(c)}).then(r)}toArray(t){return this._read(r=>{var n=this._ctx;if(n.dir==="next"&&ms(n,!0)&&n.limit>0){const{valueMapper:s}=n,a=sl(n,n.table.core.schema);return n.table.core.query({trans:r,limit:n.limit,values:!0,query:{index:a,range:n.range}}).then(({result:o})=>s?o.map(s):o)}{const s=[];return Do(n,a=>s.push(a),r,n.table.core).then(()=>s)}},t)}offset(t){var r=this._ctx;return t<=0||(r.offset+=t,ms(r)?du(r,()=>{var n=t;return(s,a)=>n===0||(n===1?(--n,!1):(a(()=>{s.advance(n),n=0}),!1))}):du(r,()=>{var n=t;return()=>--n<0})),this}limit(t){return this._ctx.limit=Math.min(this._ctx.limit,t),du(this._ctx,()=>{var r=t;return function(n,s,a){return--r<=0&&s(a),r>=0}},!0),this}until(t,r){return uu(this._ctx,function(n,s,a){return!t(n.value)||(s(a),r)}),this}first(t){return this.limit(1).toArray(function(r){return r[0]}).then(t)}last(t){return this.reverse().first(t)}filter(t){var r,n;return uu(this._ctx,function(s){return t(s.value)}),r=this._ctx,n=t,r.isMatch=es(r.isMatch,n),this}and(t){return this.filter(t)}or(t){return new this.db.WhereClause(this._ctx.table,t,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,s){t(s.key,s)})}eachUniqueKey(t){return this._ctx.unique="unique",this.eachKey(t)}eachPrimaryKey(t){var r=this._ctx;return r.keysOnly=!r.isMatch,this.each(function(n,s){t(s.primaryKey,s)})}keys(t){var r=this._ctx;r.keysOnly=!r.isMatch;var n=[];return this.each(function(s,a){n.push(a.key)}).then(function(){return n}).then(t)}primaryKeys(t){var r=this._ctx;if(r.dir==="next"&&ms(r,!0)&&r.limit>0)return this._read(s=>{var a=sl(r,r.table.core.schema);return r.table.core.query({trans:s,values:!1,limit:r.limit,query:{index:a,range:r.range}})}).then(({result:s})=>s).then(t);r.keysOnly=!r.isMatch;var n=[];return this.each(function(s,a){n.push(a.primaryKey)}).then(function(){return n}).then(t)}uniqueKeys(t){return this._ctx.unique="unique",this.keys(t)}firstKey(t){return this.limit(1).keys(function(r){return r[0]}).then(t)}lastKey(t){return this.reverse().firstKey(t)}distinct(){var t=this._ctx,r=t.index&&t.table.schema.idxByName[t.index];if(!r||!r.multi)return this;var n={};return uu(this._ctx,function(s){var a=s.primaryKey.toString(),o=wt(n,a);return n[a]=!0,!o}),this}modify(t){var r=this._ctx;return this._write(n=>{var s;if(typeof t=="function")s=t;else{var a=Pe(t),o=a.length;s=function(y){for(var w=!1,g=0;g<o;++g){var p=a[g],v=t[p];_r(y,p)!==v&&(Ht(y,p,v),w=!0)}return w}}const l=r.table.core,{outbound:c,extractKey:u}=l.schema.primaryKey,d=this.db._options.modifyChunkSize||200,f=[];let h=0;const m=[],x=(y,w)=>{const{failures:g,numFailures:p}=w;h+=y-p;for(let v of Pe(g))f.push(g[v])};return this.clone().primaryKeys().then(y=>{const w=g=>{const p=Math.min(d,y.length-g);return l.getMany({trans:n,keys:y.slice(g,g+p),cache:"immutable"}).then(v=>{const b=[],j=[],S=c?[]:null,N=[];for(let E=0;E<p;++E){const P=v[E],C={value:Yi(P),primKey:y[g+E]};s.call(C,C.value,C)!==!1&&(C.value==null?N.push(y[g+E]):c||et(u(P),u(C.value))===0?(j.push(C.value),c&&S.push(y[g+E])):(N.push(y[g+E]),b.push(C.value)))}const _=ms(r)&&r.limit===1/0&&(typeof t!="function"||t===hu)&&{index:r.index,range:r.range};return Promise.resolve(b.length>0&&l.mutate({trans:n,type:"add",values:b}).then(E=>{for(let P in E.failures)N.splice(parseInt(P),1);x(b.length,E)})).then(()=>(j.length>0||_&&typeof t=="object")&&l.mutate({trans:n,type:"put",keys:S,values:j,criteria:_,changeSpec:typeof t!="function"&&t}).then(E=>x(j.length,E))).then(()=>(N.length>0||_&&t===hu)&&l.mutate({trans:n,type:"delete",keys:N,criteria:_}).then(E=>x(N.length,E))).then(()=>y.length>g+p&&w(g+d))})};return w(0).then(()=>{if(f.length>0)throw new Il("Error modifying one or more objects",f,h,m);return y.length})})})}delete(){var t=this._ctx,r=t.range;return ms(t)&&(t.isPrimKey&&!E_||r.type===3)?this._write(n=>{const{primaryKey:s}=t.table.core.schema,a=r;return t.table.core.count({trans:n,query:{index:s,range:a}}).then(o=>t.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(({failures:l,lastResult:c,results:u,numFailures:d})=>{if(d)throw new Il("Could not delete some values",Object.keys(l).map(f=>l[f]),o-d);return o-d}))}):this.modify(hu)}}const hu=(e,t)=>t.value=null;function D_(e,t){return e<t?-1:e===t?0:1}function P_(e,t){return e>t?-1:e===t?0:1}function mt(e,t,r){var n=e instanceof Gx?new e.Collection(e):e;return n._ctx.error=r?new r(t):new TypeError(t),n}function gs(e){return new e.Collection(e,()=>Bx("")).limit(0)}function A_(e,t,r,n,s,a){for(var o=Math.min(e.length,n.length),l=-1,c=0;c<o;++c){var u=t[c];if(u!==n[c])return s(e[c],r[c])<0?e.substr(0,c)+r[c]+r.substr(c+1):s(e[c],n[c])<0?e.substr(0,c)+n[c]+r.substr(c+1):l>=0?e.substr(0,l)+t[l]+r.substr(l+1):null;s(e[c],u)<0&&(l=c)}return o<n.length&&a==="next"?e+r.substr(e.length):o<e.length&&a==="prev"?e.substr(0,r.length):l<0?null:e.substr(0,l)+n[l]+r.substr(l+1)}function Po(e,t,r,n){var s,a,o,l,c,u,d,f=r.length;if(!r.every(y=>typeof y=="string"))return mt(e,Wx);function h(y){s=function(g){return g==="next"?p=>p.toUpperCase():p=>p.toLowerCase()}(y),a=function(g){return g==="next"?p=>p.toLowerCase():p=>p.toUpperCase()}(y),o=y==="next"?D_:P_;var w=r.map(function(g){return{lower:a(g),upper:s(g)}}).sort(function(g,p){return o(g.lower,p.lower)});l=w.map(function(g){return g.upper}),c=w.map(function(g){return g.lower}),u=y,d=y==="next"?"":n}h("next");var m=new e.Collection(e,()=>Gr(l[0],c[f-1]+n));m._ondirectionchange=function(y){h(y)};var x=0;return m._addAlgorithm(function(y,w,g){var p=y.key;if(typeof p!="string")return!1;var v=a(p);if(t(v,c,x))return!0;for(var b=null,j=x;j<f;++j){var S=A_(p,v,l[j],c[j],o,u);S===null&&b===null?x=j+1:(b===null||o(b,S)>0)&&(b=S)}return w(b!==null?function(){y.continue(b+d)}:g),!1}),m}function Gr(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function Bx(e){return{type:1,lower:e,upper:e}}class Gx{get Collection(){return this._ctx.table.db.Collection}between(t,r,n,s){n=n!==!1,s=s===!0;try{return this._cmp(t,r)>0||this._cmp(t,r)===0&&(n||s)&&(!n||!s)?gs(this):new this.Collection(this,()=>Gr(t,r,!n,!s))}catch{return mt(this,lr)}}equals(t){return t==null?mt(this,lr):new this.Collection(this,()=>Bx(t))}above(t){return t==null?mt(this,lr):new this.Collection(this,()=>Gr(t,void 0,!0))}aboveOrEqual(t){return t==null?mt(this,lr):new this.Collection(this,()=>Gr(t,void 0,!1))}below(t){return t==null?mt(this,lr):new this.Collection(this,()=>Gr(void 0,t,!1,!0))}belowOrEqual(t){return t==null?mt(this,lr):new this.Collection(this,()=>Gr(void 0,t))}startsWith(t){return typeof t!="string"?mt(this,Wx):this.between(t,t+$n,!0,!0)}startsWithIgnoreCase(t){return t===""?this.startsWith(t):Po(this,(r,n)=>r.indexOf(n[0])===0,[t],$n)}equalsIgnoreCase(t){return Po(this,(r,n)=>r===n[0],[t],"")}anyOfIgnoreCase(){var t=yr.apply(ws,arguments);return t.length===0?gs(this):Po(this,(r,n)=>n.indexOf(r)!==-1,t,"")}startsWithAnyOfIgnoreCase(){var t=yr.apply(ws,arguments);return t.length===0?gs(this):Po(this,(r,n)=>n.some(s=>r.indexOf(s)===0),t,$n)}anyOf(){const t=yr.apply(ws,arguments);let r=this._cmp;try{t.sort(r)}catch{return mt(this,lr)}if(t.length===0)return gs(this);const n=new this.Collection(this,()=>Gr(t[0],t[t.length-1]));n._ondirectionchange=a=>{r=a==="next"?this._ascending:this._descending,t.sort(r)};let s=0;return n._addAlgorithm((a,o,l)=>{const c=a.key;for(;r(c,t[s])>0;)if(++s,s===t.length)return o(l),!1;return r(c,t[s])===0||(o(()=>{a.continue(t[s])}),!1)}),n}notEqual(t){return this.inAnyRange([[zd,t],[t,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const t=yr.apply(ws,arguments);if(t.length===0)return new this.Collection(this);try{t.sort(this._ascending)}catch{return mt(this,lr)}const r=t.reduce((n,s)=>n?n.concat([[n[n.length-1][1],s]]):[[zd,s]],null);return r.push([t[t.length-1],this.db._maxKey]),this.inAnyRange(r,{includeLowers:!1,includeUppers:!1})}inAnyRange(t,r){const n=this._cmp,s=this._ascending,a=this._descending,o=this._min,l=this._max;if(t.length===0)return gs(this);if(!t.every(p=>p[0]!==void 0&&p[1]!==void 0&&s(p[0],p[1])<=0))return mt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",B.InvalidArgument);const c=!r||r.includeLowers!==!1,u=r&&r.includeUppers===!0;let d,f=s;function h(p,v){return f(p[0],v[0])}try{d=t.reduce(function(p,v){let b=0,j=p.length;for(;b<j;++b){const S=p[b];if(n(v[0],S[1])<0&&n(v[1],S[0])>0){S[0]=o(S[0],v[0]),S[1]=l(S[1],v[1]);break}}return b===j&&p.push(v),p},[]),d.sort(h)}catch{return mt(this,lr)}let m=0;const x=u?p=>s(p,d[m][1])>0:p=>s(p,d[m][1])>=0,y=c?p=>a(p,d[m][0])>0:p=>a(p,d[m][0])>=0;let w=x;const g=new this.Collection(this,()=>Gr(d[0][0],d[d.length-1][1],!c,!u));return g._ondirectionchange=p=>{p==="next"?(w=x,f=s):(w=y,f=a),d.sort(h)},g._addAlgorithm((p,v,b)=>{for(var j=p.key;w(j);)if(++m,m===d.length)return v(b),!1;return!!function(S){return!x(S)&&!y(S)}(j)||(this._cmp(j,d[m][1])===0||this._cmp(j,d[m][0])===0||v(()=>{f===s?p.continue(d[m][0]):p.continue(d[m][1])}),!1)}),g}startsWithAnyOf(){const t=yr.apply(ws,arguments);return t.every(r=>typeof r=="string")?t.length===0?gs(this):this.inAnyRange(t.map(r=>[r,r+$n])):mt(this,"startsWithAnyOf() only works with strings")}}function tr(e){return ye(function(t){return Ci(t),e(t.target.error),!1})}function Ci(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}const Di="storagemutated",Zr="x-storagemutated-1",yn=Za(null,Di);class O_{_lock(){return Ra(!W.global),++this._reculock,this._reculock!==1||W.global||(W.lockOwnerFor=this),this}_unlock(){if(Ra(!W.global),--this._reculock==0)for(W.global||(W.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ha(t[1],t[0])}catch{}}return this}_locked(){return this._reculock&&W.lockOwnerFor!==this}create(t){if(!this.mode)return this;const r=this.db.idbdb,n=this.db._state.dbOpenError;if(Ra(!this.idbtrans),!t&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new B.DatabaseClosed(n);case"MissingAPIError":throw new B.MissingAPI(n.message,n);default:throw new B.OpenFailed(n)}if(!this.active)throw new B.TransactionInactive;return Ra(this._completion._state===null),(t=this.idbtrans=t||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):r.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=ye(s=>{Ci(s),this._reject(t.error)}),t.onabort=ye(s=>{Ci(s),this.active&&this._reject(new B.Abort(t.error)),this.active=!1,this.on("abort").fire(s)}),t.oncomplete=ye(()=>{this.active=!1,this._resolve(),"mutatedParts"in t&&yn.storagemutated.fire(t.mutatedParts)}),this}_promise(t,r,n){if(t==="readwrite"&&this.mode!=="readwrite")return Le(new B.ReadOnly("Transaction is readonly"));if(!this.active)return Le(new B.TransactionInactive);if(this._locked())return new I((a,o)=>{this._blockedFuncs.push([()=>{this._promise(t,r,n).then(a,o)},W])});if(n)return gn(()=>{var a=new I((o,l)=>{this._lock();const c=r(o,l,this);c&&c.then&&c.then(o,l)});return a.finally(()=>this._unlock()),a._lib=!0,a});var s=new I((a,o)=>{var l=r(a,o,this);l&&l.then&&l.then(a,o)});return s._lib=!0,s}_root(){return this.parent?this.parent._root():this}waitFor(t){var r=this._root();const n=I.resolve(t);if(r._waitingFor)r._waitingFor=r._waitingFor.then(()=>n);else{r._waitingFor=n,r._waitingQueue=[];var s=r.idbtrans.objectStore(r.storeNames[0]);(function o(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(s.get(-1/0).onsuccess=o)})()}var a=r._waitingFor;return new I((o,l)=>{n.then(c=>r._waitingQueue.push(ye(o.bind(null,c))),c=>r._waitingQueue.push(ye(l.bind(null,c)))).finally(()=>{r._waitingFor===a&&(r._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new B.Abort))}table(t){const r=this._memoizedTables||(this._memoizedTables={});if(wt(r,t))return r[t];const n=this.schema[t];if(!n)throw new B.NotFound("Table "+t+" not part of transaction");const s=new this.db.Table(t,n,this);return s.core=this.db.core.table(t),r[t]=s,s}}function Bd(e,t,r,n,s,a,o){return{name:e,keyPath:t,unique:r,multi:n,auto:s,compound:a,src:(r&&!o?"&":"")+(n?"*":"")+(s?"++":"")+qx(t)}}function qx(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Kx(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:jx(r,n=>[n.name,n])}}let Pi=e=>{try{return e.only([[]]),Pi=()=>[[]],[[]]}catch{return Pi=()=>$n,$n}};function Gd(e){return e==null?()=>{}:typeof e=="string"?function(t){return t.split(".").length===1?n=>n[t]:n=>_r(n,t)}(e):t=>_r(t,e)}function Og(e){return[].slice.call(e)}let L_=0;function ei(e){return e==null?":id":typeof e=="string"?e:`[${e.join("+")}]`}function I_(e,t,r){function n(c){if(c.type===3)return null;if(c.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:u,upper:d,lowerOpen:f,upperOpen:h}=c;return u===void 0?d===void 0?null:t.upperBound(d,!!h):d===void 0?t.lowerBound(u,!!f):t.bound(u,d,!!f,!!h)}const{schema:s,hasGetAll:a}=function(c,u){const d=Og(c.objectStoreNames);return{schema:{name:c.name,tables:d.map(f=>u.objectStore(f)).map(f=>{const{keyPath:h,autoIncrement:m}=f,x=Ye(h),y=h==null,w={},g={name:f.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:y,compound:x,keyPath:h,autoIncrement:m,unique:!0,extractKey:Gd(h)},indexes:Og(f.indexNames).map(p=>f.index(p)).map(p=>{const{name:v,unique:b,multiEntry:j,keyPath:S}=p,N={name:v,compound:Ye(S),keyPath:S,unique:b,multiEntry:j,extractKey:Gd(S)};return w[ei(S)]=N,N}),getIndexByKeyPath:p=>w[ei(p)]};return w[":id"]=g.primaryKey,h!=null&&(w[ei(h)]=g.primaryKey),g})},hasGetAll:d.length>0&&"getAll"in u.objectStore(d[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(e,r),o=s.tables.map(c=>function(u){const d=u.name;return{name:d,schema:u,mutate:function({trans:f,type:h,keys:m,values:x,range:y}){return new Promise((w,g)=>{w=ye(w);const p=f.objectStore(d),v=p.keyPath==null,b=h==="put"||h==="add";if(!b&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:j}=m||x||{length:1};if(m&&x&&m.length!==x.length)throw new Error("Given keys array must have same length as given values array.");if(j===0)return w({numFailures:0,failures:{},results:[],lastResult:void 0});let S;const N=[],_=[];let E=0;const P=A=>{++E,Ci(A)};if(h==="deleteRange"){if(y.type===4)return w({numFailures:E,failures:_,results:[],lastResult:void 0});y.type===3?N.push(S=p.clear()):N.push(S=p.delete(n(y)))}else{const[A,Y]=b?v?[x,m]:[x,null]:[m,null];if(b)for(let H=0;H<j;++H)N.push(S=Y&&Y[H]!==void 0?p[h](A[H],Y[H]):p[h](A[H])),S.onerror=P;else for(let H=0;H<j;++H)N.push(S=p[h](A[H])),S.onerror=P}const C=A=>{const Y=A.target.result;N.forEach((H,_e)=>H.error!=null&&(_[_e]=H.error)),w({numFailures:E,failures:_,results:h==="delete"?m:N.map(H=>H.result),lastResult:Y})};S.onerror=A=>{P(A),C(A)},S.onsuccess=C})},getMany:({trans:f,keys:h})=>new Promise((m,x)=>{m=ye(m);const y=f.objectStore(d),w=h.length,g=new Array(w);let p,v=0,b=0;const j=N=>{const _=N.target;g[_._pos]=_.result,++b===v&&m(g)},S=tr(x);for(let N=0;N<w;++N)h[N]!=null&&(p=y.get(h[N]),p._pos=N,p.onsuccess=j,p.onerror=S,++v);v===0&&m(g)}),get:({trans:f,key:h})=>new Promise((m,x)=>{m=ye(m);const y=f.objectStore(d).get(h);y.onsuccess=w=>m(w.target.result),y.onerror=tr(x)}),query:function(f){return h=>new Promise((m,x)=>{m=ye(m);const{trans:y,values:w,limit:g,query:p}=h,v=g===1/0?void 0:g,{index:b,range:j}=p,S=y.objectStore(d),N=b.isPrimaryKey?S:S.index(b.name),_=n(j);if(g===0)return m({result:[]});if(f){const E=w?N.getAll(_,v):N.getAllKeys(_,v);E.onsuccess=P=>m({result:P.target.result}),E.onerror=tr(x)}else{let E=0;const P=w||!("openKeyCursor"in N)?N.openCursor(_):N.openKeyCursor(_),C=[];P.onsuccess=A=>{const Y=P.result;return Y?(C.push(w?Y.value:Y.primaryKey),++E===g?m({result:C}):void Y.continue()):m({result:C})},P.onerror=tr(x)}})}(a),openCursor:function({trans:f,values:h,query:m,reverse:x,unique:y}){return new Promise((w,g)=>{w=ye(w);const{index:p,range:v}=m,b=f.objectStore(d),j=p.isPrimaryKey?b:b.index(p.name),S=x?y?"prevunique":"prev":y?"nextunique":"next",N=h||!("openKeyCursor"in j)?j.openCursor(n(v),S):j.openKeyCursor(n(v),S);N.onerror=tr(g),N.onsuccess=ye(_=>{const E=N.result;if(!E)return void w(null);E.___id=++L_,E.done=!1;const P=E.continue.bind(E);let C=E.continuePrimaryKey;C&&(C=C.bind(E));const A=E.advance.bind(E),Y=()=>{throw new Error("Cursor not stopped")};E.trans=f,E.stop=E.continue=E.continuePrimaryKey=E.advance=()=>{throw new Error("Cursor not started")},E.fail=ye(g),E.next=function(){let H=1;return this.start(()=>H--?this.continue():this.stop()).then(()=>this)},E.start=H=>{const _e=new Promise((z,O)=>{z=ye(z),N.onerror=tr(O),E.fail=O,E.stop=M=>{E.stop=E.continue=E.continuePrimaryKey=E.advance=Y,z(M)}}),we=()=>{if(N.result)try{H()}catch(z){E.fail(z)}else E.done=!0,E.start=()=>{throw new Error("Cursor behind last entry")},E.stop()};return N.onsuccess=ye(z=>{N.onsuccess=we,we()}),E.continue=P,E.continuePrimaryKey=C,E.advance=A,we(),_e},w(E)},g)})},count({query:f,trans:h}){const{index:m,range:x}=f;return new Promise((y,w)=>{const g=h.objectStore(d),p=m.isPrimaryKey?g:g.index(m.name),v=n(x),b=v?p.count(v):p.count();b.onsuccess=ye(j=>y(j.target.result)),b.onerror=tr(w)})}}}(c)),l={};return o.forEach(c=>l[c.name]=c),{stack:"dbcore",transaction:e.transaction.bind(e),table(c){if(!l[c])throw new Error(`Table '${c}' not found`);return l[c]},MIN_KEY:-1/0,MAX_KEY:Pi(t),schema:s}}function qd({_novip:e},t){const r=t.db,n=function(s,a,{IDBKeyRange:o,indexedDB:l},c){return{dbcore:function(d,f){return f.reduce((h,{create:m})=>({...h,...m(h)}),d)}(I_(a,o,c),s.dbcore)}}(e._middlewares,r,e._deps,t);e.core=n.dbcore,e.tables.forEach(s=>{const a=s.name;e.core.schema.tables.some(o=>o.name===a)&&(s.core=e.core.table(a),e[a]instanceof e.Table&&(e[a].core=s.core))})}function Wl({_novip:e},t,r,n){r.forEach(s=>{const a=n[s];t.forEach(o=>{const l=xf(o,s);(!l||"value"in l&&l.value===void 0)&&(o===e.Transaction.prototype||o instanceof e.Transaction?Nr(o,s,{get(){return this.table(s)},set(c){wx(this,s,{value:c,writable:!0,configurable:!0,enumerable:!0})}}):o[s]=new e.Table(s,a))})})}function Kd({_novip:e},t){t.forEach(r=>{for(let n in r)r[n]instanceof e.Table&&delete r[n]})}function R_(e,t){return e._cfg.version-t._cfg.version}function $_(e,t,r,n){const s=e._dbSchema,a=e._createTransaction("readwrite",e._storeNames,s);a.create(r),a._completion.catch(n);const o=a._reject.bind(a),l=W.transless||W;gn(()=>{W.trans=a,W.transless=l,t===0?(Pe(s).forEach(c=>{fu(r,c,s[c].primKey,s[c].indexes)}),qd(e,r),I.follow(()=>e.on.populate.fire(a)).catch(o)):function({_novip:c},u,d,f){const h=[],m=c._versions;let x=c._dbSchema=Vd(c,c.idbdb,f),y=!1;const w=m.filter(p=>p._cfg.version>=u);function g(){return h.length?I.resolve(h.shift()(d.idbtrans)).then(g):I.resolve()}return w.forEach(p=>{h.push(()=>{const v=x,b=p._cfg.dbschema;Yd(c,v,f),Yd(c,b,f),x=c._dbSchema=b;const j=Hx(v,b);j.add.forEach(N=>{fu(f,N[0],N[1].primKey,N[1].indexes)}),j.change.forEach(N=>{if(N.recreate)throw new B.Upgrade("Not yet support for changing primary key");{const _=f.objectStore(N.name);N.add.forEach(E=>Hd(_,E)),N.change.forEach(E=>{_.deleteIndex(E.name),Hd(_,E)}),N.del.forEach(E=>_.deleteIndex(E))}});const S=p._cfg.contentUpgrade;if(S&&p._cfg.version>u){qd(c,f),d._memoizedTables={},y=!0;let N=Sx(b);j.del.forEach(C=>{N[C]=v[C]}),Kd(c,[c.Transaction.prototype]),Wl(c,[c.Transaction.prototype],Pe(N),N),d.schema=N;const _=vf(S);let E;_&&da();const P=I.follow(()=>{if(E=S(d),E&&_){var C=Lr.bind(null,null);E.then(C,C)}});return E&&typeof E.then=="function"?I.resolve(E):P.then(()=>E)}}),h.push(v=>{(!y||!__)&&function(b,j){[].slice.call(j.db.objectStoreNames).forEach(S=>b[S]==null&&j.db.deleteObjectStore(S))}(p._cfg.dbschema,v),Kd(c,[c.Transaction.prototype]),Wl(c,[c.Transaction.prototype],c._storeNames,c._dbSchema),d.schema=c._dbSchema})}),g().then(()=>{var p,v;v=f,Pe(p=x).forEach(b=>{v.db.objectStoreNames.contains(b)||fu(v,b,p[b].primKey,p[b].indexes)})})}(e,t,a,r).catch(o)})}function Hx(e,t){const r={del:[],add:[],change:[]};let n;for(n in e)t[n]||r.del.push(n);for(n in t){const s=e[n],a=t[n];if(s){const o={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(s.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||s.primKey.auto!==a.primKey.auto&&!vc)o.recreate=!0,r.change.push(o);else{const l=s.idxByName,c=a.idxByName;let u;for(u in l)c[u]||o.del.push(u);for(u in c){const d=l[u],f=c[u];d?d.src!==f.src&&o.change.push(f):o.add.push(f)}(o.del.length>0||o.add.length>0||o.change.length>0)&&r.change.push(o)}}else r.add.push([n,a])}return r}function fu(e,t,r,n){const s=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(a=>Hd(s,a)),s}function Hd(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function Vd(e,t,r){const n={};return Ll(t.objectStoreNames,0).forEach(s=>{const a=r.objectStore(s);let o=a.keyPath;const l=Bd(qx(o),o||"",!1,!1,!!a.autoIncrement,o&&typeof o!="string",!0),c=[];for(let d=0;d<a.indexNames.length;++d){const f=a.index(a.indexNames[d]);o=f.keyPath;var u=Bd(f.name,o,!!f.unique,!!f.multiEntry,!1,o&&typeof o!="string",!1);c.push(u)}n[s]=Kx(s,l,c)}),n}function Yd({_novip:e},t,r){const n=r.db.objectStoreNames;for(let s=0;s<n.length;++s){const a=n[s],o=r.objectStore(a);e._hasGetAll="getAll"in o;for(let l=0;l<o.indexNames.length;++l){const c=o.indexNames[l],u=o.index(c).keyPath,d=typeof u=="string"?u:"["+Ll(u).join("+")+"]";if(t[a]){const f=t[a].idxByName[d];f&&(f.name=c,delete t[a].idxByName[d],t[a].idxByName[c]=f)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&he.WorkerGlobalScope&&he instanceof he.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}class M_{_parseStoresSpec(t,r){Pe(t).forEach(n=>{if(t[n]!==null){var s=t[n].split(",").map((o,l)=>{const c=(o=o.trim()).replace(/([&*]|\+\+)/g,""),u=/^\[/.test(c)?c.match(/^\[(.*)\]$/)[1].split("+"):c;return Bd(c,u||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),Ye(u),l===0)}),a=s.shift();if(a.multi)throw new B.Schema("Primary key cannot be multi-valued");s.forEach(o=>{if(o.auto)throw new B.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new B.Schema("Index must have a name and cannot be an empty string")}),r[n]=Kx(n,a,s)}})}stores(t){const r=this.db;this._cfg.storesSource=this._cfg.storesSource?rt(this._cfg.storesSource,t):t;const n=r._versions,s={};let a={};return n.forEach(o=>{rt(s,o._cfg.storesSource),a=o._cfg.dbschema={},o._parseStoresSpec(s,a)}),r._dbSchema=a,Kd(r,[r._allTables,r,r.Transaction.prototype]),Wl(r,[r._allTables,r,r.Transaction.prototype,this._cfg.tables],Pe(a),a),r._storeNames=Pe(a),this}upgrade(t){return this._cfg.contentUpgrade=kf(this._cfg.contentUpgrade||ae,t),this}}function _f(e,t){let r=e._dbNamesDB;return r||(r=e._dbNamesDB=new Er(wc,{addons:[],indexedDB:e,IDBKeyRange:t}),r.version(1).stores({dbnames:"name"})),r.table("dbnames")}function Ef(e){return e&&typeof e.databases=="function"}function Qd(e){return gn(function(){return W.letThrough=!0,e()})}function F_(){var e;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(t){var r=function(){return indexedDB.databases().finally(t)};e=setInterval(r,100),r()}).finally(function(){return clearInterval(e)}):Promise.resolve()}function W_(e){const t=e._state,{indexedDB:r}=e._deps;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(()=>t.dbOpenError?Le(t.dbOpenError):e);ir&&(t.openCanceller._stackHolder=ss()),t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;const n=t.openCanceller;function s(){if(t.openCanceller!==n)throw new B.DatabaseClosed("db.open() was cancelled")}let a=t.dbReadyResolve,o=null,l=!1;const c=()=>new I((u,d)=>{if(s(),!r)throw new B.MissingAPI;const f=e.name,h=t.autoSchema?r.open(f):r.open(f,Math.round(10*e.verno));if(!h)throw new B.MissingAPI;h.onerror=tr(d),h.onblocked=ye(e._fireOnBlocked),h.onupgradeneeded=ye(m=>{if(o=h.transaction,t.autoSchema&&!e._options.allowEmptyDB){h.onerror=Ci,o.abort(),h.result.close();const y=r.deleteDatabase(f);y.onsuccess=y.onerror=ye(()=>{d(new B.NoSuchDatabase(`Database ${f} doesnt exist`))})}else{o.onerror=tr(d);var x=m.oldVersion>Math.pow(2,62)?0:m.oldVersion;l=x<1,e._novip.idbdb=h.result,$_(e,x/10,o,d)}},d),h.onsuccess=ye(()=>{o=null;const m=e._novip.idbdb=h.result,x=Ll(m.objectStoreNames);if(x.length>0)try{const w=m.transaction((y=x).length===1?y[0]:y,"readonly");t.autoSchema?function({_novip:g},p,v){g.verno=p.version/10;const b=g._dbSchema=Vd(0,p,v);g._storeNames=Ll(p.objectStoreNames,0),Wl(g,[g._allTables],Pe(b),b)}(e,m,w):(Yd(e,e._dbSchema,w),function(g,p){const v=Hx(Vd(0,g.idbdb,p),g._dbSchema);return!(v.add.length||v.change.some(b=>b.add.length||b.change.length))}(e,w)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),qd(e,w)}catch{}var y;Xa.push(e),m.onversionchange=ye(w=>{t.vcFired=!0,e.on("versionchange").fire(w)}),m.onclose=ye(w=>{e.on("close").fire(w)}),l&&function({indexedDB:w,IDBKeyRange:g},p){!Ef(w)&&p!==wc&&_f(w,g).put({name:p}).catch(ae)}(e._deps,f),u()},d)}).catch(u=>u&&u.name==="UnknownError"&&t.PR1398_maxLoop>0?(t.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),c()):I.reject(u));return I.race([n,(typeof navigator>"u"?I.resolve():F_()).then(c)]).then(()=>(s(),t.onReadyBeingFired=[],I.resolve(Qd(()=>e.on.ready.fire(e.vip))).then(function u(){if(t.onReadyBeingFired.length>0){let d=t.onReadyBeingFired.reduce(kf,ae);return t.onReadyBeingFired=[],I.resolve(Qd(()=>d(e.vip))).then(u)}}))).finally(()=>{t.onReadyBeingFired=null,t.isBeingOpened=!1}).then(()=>e).catch(u=>{t.dbOpenError=u;try{o&&o.abort()}catch{}return n===t.openCanceller&&e._close(),Le(u)}).finally(()=>{t.openComplete=!0,a()})}function Jd(e){var t=a=>e.next(a),r=s(t),n=s(a=>e.throw(a));function s(a){return o=>{var l=a(o),c=l.value;return l.done?c:c&&typeof c.then=="function"?c.then(r,n):Ye(c)?Promise.all(c).then(r,n):r(c)}}return s(t)()}function U_(e,t,r){var n=arguments.length;if(n<2)throw new B.InvalidArgument("Too few arguments");for(var s=new Array(n-1);--n;)s[n-1]=arguments[n];return r=s.pop(),[e,Nx(s),r]}function Vx(e,t,r,n,s){return I.resolve().then(()=>{const a=W.transless||W,o=e._createTransaction(t,r,e._dbSchema,n),l={trans:o,transless:a};if(n)o.idbtrans=n.idbtrans;else try{o.create(),e._state.PR1398_maxLoop=3}catch(f){return f.name===bf.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),e._close(),e.open().then(()=>Vx(e,t,r,null,s))):Le(f)}const c=vf(s);let u;c&&da();const d=I.follow(()=>{if(u=s.call(o,o),u)if(c){var f=Lr.bind(null,null);u.then(f,f)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=Jd(u))},l);return(u&&typeof u.then=="function"?I.resolve(u).then(f=>o.active?f:Le(new B.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):d.then(()=>u)).then(f=>(n&&o._resolve(),o._completion.then(()=>f))).catch(f=>(o._reject(f),Le(f)))})}function Ao(e,t,r){const n=Ye(e)?e.slice():[e];for(let s=0;s<r;++s)n.push(t);return n}const z_={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return{...e,table(t){const r=e.table(t),{schema:n}=r,s={},a=[];function o(d,f,h){const m=ei(d),x=s[m]=s[m]||[],y=d==null?0:typeof d=="string"?1:d.length,w=f>0,g={...h,isVirtual:w,keyTail:f,keyLength:y,extractKey:Gd(d),unique:!w&&h.unique};return x.push(g),g.isPrimaryKey||a.push(g),y>1&&o(y===2?d[0]:d.slice(0,y-1),f+1,h),x.sort((p,v)=>p.keyTail-v.keyTail),g}const l=o(n.primaryKey.keyPath,0,n.primaryKey);s[":id"]=[l];for(const d of n.indexes)o(d.keyPath,0,d);function c(d){const f=d.query.index;return f.isVirtual?{...d,query:{index:f,range:(h=d.query.range,m=f.keyTail,{type:h.type===1?2:h.type,lower:Ao(h.lower,h.lowerOpen?e.MAX_KEY:e.MIN_KEY,m),lowerOpen:!0,upper:Ao(h.upper,h.upperOpen?e.MIN_KEY:e.MAX_KEY,m),upperOpen:!0})}}:d;var h,m}return{...r,schema:{...n,primaryKey:l,indexes:a,getIndexByKeyPath:function(d){const f=s[ei(d)];return f&&f[0]}},count:d=>r.count(c(d)),query:d=>r.query(c(d)),openCursor(d){const{keyTail:f,isVirtual:h,keyLength:m}=d.query.index;return h?r.openCursor(c(d)).then(x=>x&&function(y){return Object.create(y,{continue:{value:function(g){g!=null?y.continue(Ao(g,d.reverse?e.MAX_KEY:e.MIN_KEY,f)):d.unique?y.continue(y.key.slice(0,m).concat(d.reverse?e.MIN_KEY:e.MAX_KEY,f)):y.continue()}},continuePrimaryKey:{value(g,p){y.continuePrimaryKey(Ao(g,e.MAX_KEY,f),p)}},primaryKey:{get:()=>y.primaryKey},key:{get(){const g=y.key;return m===1?g[0]:g.slice(0,m)}},value:{get:()=>y.value}})}(x)):r.openCursor(d)}}}}}};function Tf(e,t,r,n){return r=r||{},n=n||"",Pe(e).forEach(s=>{if(wt(t,s)){var a=e[s],o=t[s];if(typeof a=="object"&&typeof o=="object"&&a&&o){const l=Dd(a);l!==Dd(o)?r[n+s]=t[s]:l==="Object"?Tf(a,o,r,n+s+"."):a!==o&&(r[n+s]=t[s])}else a!==o&&(r[n+s]=t[s])}else r[n+s]=void 0}),Pe(t).forEach(s=>{wt(e,s)||(r[n+s]=t[s])}),r}const B_={stack:"dbcore",name:"HooksMiddleware",level:2,create:e=>({...e,table(t){const r=e.table(t),{primaryKey:n}=r.schema;return{...r,mutate(a){const o=W.trans,{deleting:l,creating:c,updating:u}=o.table(t).hook;switch(a.type){case"add":if(c.fire===ae)break;return o._promise("readwrite",()=>d(a),!0);case"put":if(c.fire===ae&&u.fire===ae)break;return o._promise("readwrite",()=>d(a),!0);case"delete":if(l.fire===ae)break;return o._promise("readwrite",()=>d(a),!0);case"deleteRange":if(l.fire===ae)break;return o._promise("readwrite",()=>function(h){return f(h.trans,h.range,1e4)}(a),!0)}return r.mutate(a);function d(h){const m=W.trans,x=h.keys||function(y,w){return w.type==="delete"?w.keys:w.keys||w.values.map(y.extractKey)}(n,h);if(!x)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:x}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(y,w,g){return w.type==="add"?Promise.resolve([]):y.getMany({trans:w.trans,keys:g,cache:"immutable"})}(r,h,x).then(y=>{const w=x.map((g,p)=>{const v=y[p],b={onerror:null,onsuccess:null};if(h.type==="delete")l.fire.call(b,g,v,m);else if(h.type==="add"||v===void 0){const j=c.fire.call(b,g,h.values[p],m);g==null&&j!=null&&(g=j,h.keys[p]=g,n.outbound||Ht(h.values[p],n.keyPath,g))}else{const j=Tf(v,h.values[p]),S=u.fire.call(b,j,g,v,m);if(S){const N=h.values[p];Object.keys(S).forEach(_=>{wt(N,_)?N[_]=S[_]:Ht(N,_,S[_])})}}return b});return r.mutate(h).then(({failures:g,results:p,numFailures:v,lastResult:b})=>{for(let j=0;j<x.length;++j){const S=p?p[j]:x[j],N=w[j];S==null?N.onerror&&N.onerror(g[j]):N.onsuccess&&N.onsuccess(h.type==="put"&&y[j]?h.values[j]:S)}return{failures:g,results:p,numFailures:v,lastResult:b}}).catch(g=>(w.forEach(p=>p.onerror&&p.onerror(g)),Promise.reject(g)))})}function f(h,m,x){return r.query({trans:h,values:!1,query:{index:n,range:m},limit:x}).then(({result:y})=>d({type:"delete",keys:y,trans:h}).then(w=>w.numFailures>0?Promise.reject(w.failures[0]):y.length<x?{failures:[],numFailures:0,lastResult:void 0}:f(h,{...m,lower:y[y.length-1],lowerOpen:!0},x)))}}}}})};function Yx(e,t,r){try{if(!t||t.keys.length<e.length)return null;const n=[];for(let s=0,a=0;s<t.keys.length&&a<e.length;++s)et(t.keys[s],e[a])===0&&(n.push(r?Yi(t.values[s]):t.values[s]),++a);return n.length===e.length?n:null}catch{return null}}const G_={stack:"dbcore",level:-1,create:e=>({table:t=>{const r=e.table(t);return{...r,getMany:n=>{if(!n.cache)return r.getMany(n);const s=Yx(n.keys,n.trans._cache,n.cache==="clone");return s?I.resolve(s):r.getMany(n).then(a=>(n.trans._cache={keys:n.keys,values:n.cache==="clone"?Yi(a):a},a))},mutate:n=>(n.type!=="add"&&(n.trans._cache=null),r.mutate(n))}}})};function Cf(e){return!("from"in e)}const pr=function(e,t){if(!this){const r=new pr;return e&&"d"in e&&rt(r,e),r}rt(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0})};function Ai(e,t,r){const n=et(t,r);if(isNaN(n))return;if(n>0)throw RangeError();if(Cf(e))return rt(e,{from:t,to:r,d:1});const s=e.l,a=e.r;if(et(r,e.from)<0)return s?Ai(s,t,r):e.l={from:t,to:r,d:1,l:null,r:null},Lg(e);if(et(t,e.to)>0)return a?Ai(a,t,r):e.r={from:t,to:r,d:1,l:null,r:null},Lg(e);et(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),et(r,e.to)>0&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1);const o=!e.r;s&&!e.l&&Ul(e,s),a&&o&&Ul(e,a)}function Ul(e,t){Cf(t)||function r(n,{from:s,to:a,l:o,r:l}){Ai(n,s,a),o&&r(n,o),l&&r(n,l)}(e,t)}function q_(e,t){const r=Xd(t);let n=r.next();if(n.done)return!1;let s=n.value;const a=Xd(e);let o=a.next(s.from),l=o.value;for(;!n.done&&!o.done;){if(et(l.from,s.to)<=0&&et(l.to,s.from)>=0)return!0;et(s.from,l.from)<0?s=(n=r.next(l.from)).value:l=(o=a.next(s.from)).value}return!1}function Xd(e){let t=Cf(e)?null:{s:0,n:e};return{next(r){const n=arguments.length>0;for(;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&et(r,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||et(r,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Lg(e){var t,r;const n=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((r=e.l)===null||r===void 0?void 0:r.d)||0),s=n>1?"r":n<-1?"l":"";if(s){const a=s==="r"?"l":"r",o={...e},l=e[s];e.from=l.from,e.to=l.to,e[s]=l[s],o[s]=l[a],e[a]=o,o.d=Ig(o)}e.d=Ig(e)}function Ig({r:e,l:t}){return(e?t?Math.max(e.d,t.d):e.d:t?t.d:0)+1}ra(pr.prototype,{add(e){return Ul(this,e),this},addKey(e){return Ai(this,e,e),this},addKeys(e){return e.forEach(t=>Ai(this,t,t)),this},[Pd](){return Xd(this)}});const K_={stack:"dbcore",level:0,create:e=>{const t=e.schema.name,r=new pr(e.MIN_KEY,e.MAX_KEY);return{...e,table:n=>{const s=e.table(n),{schema:a}=s,{primaryKey:o}=a,{extractKey:l,outbound:c}=o,u={...s,mutate:h=>{const m=h.trans,x=m.mutatedParts||(m.mutatedParts={}),y=S=>{const N=`idb://${t}/${n}/${S}`;return x[N]||(x[N]=new pr)},w=y(""),g=y(":dels"),{type:p}=h;let[v,b]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const j=h.trans._cache;return s.mutate(h).then(S=>{if(Ye(v)){p!=="delete"&&(v=S.results),w.addKeys(v);const N=Yx(v,j);N||p==="add"||g.addKeys(v),(N||b)&&function(_,E,P,C){function A(Y){const H=_(Y.name||"");function _e(z){return z!=null?Y.extractKey(z):null}const we=z=>Y.multiEntry&&Ye(z)?z.forEach(O=>H.addKey(O)):H.addKey(z);(P||C).forEach((z,O)=>{const M=P&&_e(P[O]),U=C&&_e(C[O]);et(M,U)!==0&&(M!=null&&we(M),U!=null&&we(U))})}E.indexes.forEach(A)}(y,a,N,b)}else if(v){const N={from:v.lower,to:v.upper};g.add(N),w.add(N)}else w.add(r),g.add(r),a.indexes.forEach(N=>y(N.name).add(r));return S})}},d=({query:{index:h,range:m}})=>{var x,y;return[h,new pr((x=m.lower)!==null&&x!==void 0?x:e.MIN_KEY,(y=m.upper)!==null&&y!==void 0?y:e.MAX_KEY)]},f={get:h=>[o,new pr(h.key)],getMany:h=>[o,new pr().addKeys(h.keys)],count:d,query:d,openCursor:d};return Pe(f).forEach(h=>{u[h]=function(m){const{subscr:x}=W;if(x){const y=b=>{const j=`idb://${t}/${n}/${b}`;return x[j]||(x[j]=new pr)},w=y(""),g=y(":dels"),[p,v]=f[h](m);if(y(p.name||"").add(v),!p.isPrimaryKey){if(h!=="count"){const b=h==="query"&&c&&m.values&&s.query({...m,values:!1});return s[h].apply(this,arguments).then(j=>{if(h==="query"){if(c&&m.values)return b.then(({result:N})=>(w.addKeys(N),j));const S=m.values?j.result.map(l):j.result;m.values?w.addKeys(S):g.addKeys(S)}else if(h==="openCursor"){const S=j,N=m.values;return S&&Object.create(S,{key:{get:()=>(g.addKey(S.primaryKey),S.key)},primaryKey:{get(){const _=S.primaryKey;return g.addKey(_),_}},value:{get:()=>(N&&w.addKey(S.primaryKey),S.value)}})}return j})}g.add(r)}}return s[h].apply(this,arguments)}}),u}}}};class Er{constructor(t,r){this._middlewares={},this.verno=0;const n=Er.dependencies;this._options=r={addons:Er.addons,autoOpen:!0,indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange,...r},this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange};const{addons:s}=r;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const a={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ae,dbReadyPromise:null,cancelOpen:ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;a.dbReadyPromise=new I(l=>{a.dbReadyResolve=l}),a.openCanceller=new I((l,c)=>{a.cancelOpen=c}),this._state=a,this.name=t,this.on=Za(this,"populate","blocked","versionchange","close",{ready:[kf,ae]}),this.on.ready.subscribe=bx(this.on.ready.subscribe,l=>(c,u)=>{Er.vip(()=>{const d=this._state;if(d.openComplete)d.dbOpenError||I.resolve().then(c),u&&l(c);else if(d.onReadyBeingFired)d.onReadyBeingFired.push(c),u&&l(c);else{l(c);const f=this;u||l(function h(){f.on.ready.unsubscribe(c),f.on.ready.unsubscribe(h)})}})}),this.Collection=(o=this,Sa(C_.prototype,function(l,c){this.db=o;let u=zx,d=null;if(c)try{u=c()}catch(x){d=x}const f=l._ctx,h=f.table,m=h.hook.reading.fire;this._ctx={table:h,index:f.index,isPrimKey:!f.index||h.schema.primKey.keyPath&&f.index===h.schema.primKey.name,range:u,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:d,or:f.or,valueMapper:m!==Ei?m:null}})),this.Table=function(l){return Sa(T_.prototype,function(c,u,d){this.db=l,this._tx=d,this.name=c,this.schema=u,this.hook=l._allTables[c]?l._allTables[c].hook:Za(null,{creating:[p_,ae],reading:[g_,Ei],updating:[x_,ae],deleting:[y_,ae]})})}(this),this.Transaction=function(l){return Sa(O_.prototype,function(c,u,d,f,h){this.db=l,this.mode=c,this.storeNames=u,this.schema=d,this.chromeTransactionDurability=f,this.idbtrans=null,this.on=Za(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new I((m,x)=>{this._resolve=m,this._reject=x}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},m=>{var x=this.active;return this.active=!1,this.on.error.fire(m),this.parent?this.parent._reject(m):x&&this.idbtrans&&this.idbtrans.abort(),Le(m)})})}(this),this.Version=function(l){return Sa(M_.prototype,function(c){this.db=l,this._cfg={version:c,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(l){return Sa(Gx.prototype,function(c,u,d){this.db=l,this._ctx={table:c,index:u===":id"?null:u,or:d};const f=l._deps.indexedDB;if(!f)throw new B.MissingAPI;this._cmp=this._ascending=f.cmp.bind(f),this._descending=(h,m)=>f.cmp(m,h),this._max=(h,m)=>f.cmp(h,m)>0?h:m,this._min=(h,m)=>f.cmp(h,m)<0?h:m,this._IDBKeyRange=l._deps.IDBKeyRange})}(this),this.on("versionchange",l=>{l.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",l=>{!l.newVersion||l.newVersion<l.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${l.oldVersion/10}`)}),this._maxKey=Pi(r.IDBKeyRange),this._createTransaction=(l,c,u,d)=>new this.Transaction(l,c,u,this._options.chromeTransactionDurability,d),this._fireOnBlocked=l=>{this.on("blocked").fire(l),Xa.filter(c=>c.name===this.name&&c!==this&&!c._state.vcFired).map(c=>c.on("versionchange").fire(l))},this.use(z_),this.use(B_),this.use(K_),this.use(G_),this.vip=Object.create(this,{_vip:{value:!0}}),s.forEach(l=>l(this))}version(t){if(isNaN(t)||t<.1)throw new B.Type("Given version is not a positive number");if(t=Math.round(10*t)/10,this.idbdb||this._state.isBeingOpened)throw new B.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);const r=this._versions;var n=r.filter(s=>s._cfg.version===t)[0];return n||(n=new this.Version(t),r.push(n),r.sort(R_),n.stores({}),this._state.autoSchema=!1,n)}_whenReady(t){return this.idbdb&&(this._state.openComplete||W.letThrough||this._vip)?t():new I((r,n)=>{if(this._state.openComplete)return n(new B.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void n(new B.DatabaseClosed);this.open().catch(ae)}this._state.dbReadyPromise.then(r,n)}).then(t)}use({stack:t,create:r,level:n,name:s}){s&&this.unuse({stack:t,name:s});const a=this._middlewares[t]||(this._middlewares[t]=[]);return a.push({stack:t,create:r,level:n??10,name:s}),a.sort((o,l)=>o.level-l.level),this}unuse({stack:t,name:r,create:n}){return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(s=>n?s.create!==n:!!r&&s.name!==r)),this}open(){return W_(this)}_close(){const t=this._state,r=Xa.indexOf(this);if(r>=0&&Xa.splice(r,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}t.dbReadyPromise=new I(n=>{t.dbReadyResolve=n}),t.openCanceller=new I((n,s)=>{t.cancelOpen=s})}close(){this._close();const t=this._state;this._options.autoOpen=!1,t.dbOpenError=new B.DatabaseClosed,t.isBeingOpened&&t.cancelOpen(t.dbOpenError)}delete(){const t=arguments.length>0,r=this._state;return new I((n,s)=>{const a=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=ye(()=>{(function({indexedDB:l,IDBKeyRange:c},u){!Ef(l)&&u!==wc&&_f(l,c).delete(u).catch(ae)})(this._deps,this.name),n()}),o.onerror=tr(s),o.onblocked=this._fireOnBlocked};if(t)throw new B.InvalidArgument("Arguments not allowed in db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const t=this._state.dbOpenError;return t&&t.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Pe(this._allTables).map(t=>this._allTables[t])}transaction(){const t=U_.apply(this,arguments);return this._transaction.apply(this,t)}_transaction(t,r,n){let s=W.trans;s&&s.db===this&&t.indexOf("!")===-1||(s=null);const a=t.indexOf("?")!==-1;let o,l;t=t.replace("!","").replace("?","");try{if(l=r.map(u=>{var d=u instanceof this.Table?u.name:u;if(typeof d!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return d}),t=="r"||t===lu)o=lu;else{if(t!="rw"&&t!=cu)throw new B.InvalidArgument("Invalid transaction mode: "+t);o=cu}if(s){if(s.mode===lu&&o===cu){if(!a)throw new B.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");s=null}s&&l.forEach(u=>{if(s&&s.storeNames.indexOf(u)===-1){if(!a)throw new B.SubTransaction("Table "+u+" not included in parent transaction.");s=null}}),a&&s&&!s.active&&(s=null)}}catch(u){return s?s._promise(null,(d,f)=>{f(u)}):Le(u)}const c=Vx.bind(null,this,o,l,s,n);return s?s._promise(o,c,"lock"):W.trans?ha(W.transless,()=>this._whenReady(c)):this._whenReady(c)}table(t){if(!wt(this._allTables,t))throw new B.InvalidTable(`Table ${t} does not exist`);return this._allTables[t]}}const H_=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class V_{constructor(t){this._subscribe=t}subscribe(t,r,n){return this._subscribe(t&&typeof t!="function"?t:{next:t,error:r,complete:n})}[H_](){return this}}function Qx(e,t){return Pe(t).forEach(r=>{Ul(e[r]||(e[r]=new pr),t[r])}),e}function Y_(e){let t,r=!1;const n=new V_(s=>{const a=vf(e);let o=!1,l={},c={};const u={get closed(){return o},unsubscribe:()=>{o=!0,yn.storagemutated.unsubscribe(m)}};s.start&&s.start(u);let d=!1,f=!1;function h(){return Pe(c).some(y=>l[y]&&q_(l[y],c[y]))}const m=y=>{Qx(l,y),h()&&x()},x=()=>{if(d||o)return;l={};const y={},w=function(g){a&&da();const p=()=>gn(e,{subscr:g,trans:null}),v=W.trans?ha(W.transless,p):p();return a&&v.then(Lr,Lr),v}(y);f||(yn(Di,m),f=!0),d=!0,Promise.resolve(w).then(g=>{r=!0,t=g,d=!1,o||(h()?x():(l={},c=y,s.next&&s.next(g)))},g=>{d=!1,r=!1,s.error&&s.error(g),u.unsubscribe()})};return x(),u});return n.hasValue=()=>r,n.getValue=()=>t,n}let Zd;try{Zd={indexedDB:he.indexedDB||he.mozIndexedDB||he.webkitIndexedDB||he.msIndexedDB,IDBKeyRange:he.IDBKeyRange||he.webkitIDBKeyRange}}catch{Zd={indexedDB:null,IDBKeyRange:null}}const _n=Er;function al(e){let t=wr;try{wr=!0,yn.storagemutated.fire(e)}finally{wr=t}}ra(_n,{...Zo,delete:e=>new _n(e,{addons:[]}).delete(),exists:e=>new _n(e,{addons:[]}).open().then(t=>(t.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(e){try{return function({indexedDB:t,IDBKeyRange:r}){return Ef(t)?Promise.resolve(t.databases()).then(n=>n.map(s=>s.name).filter(s=>s!==wc)):_f(t,r).toCollection().primaryKeys()}(_n.dependencies).then(e)}catch{return Le(new B.MissingAPI)}},defineClass:()=>function(e){rt(this,e)},ignoreTransaction:e=>W.trans?ha(W.transless,e):e(),vip:Qd,async:function(e){return function(){try{var t=Jd(e.apply(this,arguments));return t&&typeof t.then=="function"?t:I.resolve(t)}catch(r){return Le(r)}}},spawn:function(e,t,r){try{var n=Jd(e.apply(r,t||[]));return n&&typeof n.then=="function"?n:I.resolve(n)}catch(s){return Le(s)}},currentTransaction:{get:()=>W.trans||null},waitFor:function(e,t){const r=I.resolve(typeof e=="function"?_n.ignoreTransaction(e):e).timeout(t||6e4);return W.trans?W.trans.waitFor(r):r},Promise:I,debug:{get:()=>ir,set:e=>{Ex(e,e==="dexie"?()=>!0:Ux)}},derive:zs,extend:rt,props:ra,override:bx,Events:Za,on:yn,liveQuery:Y_,extendObservabilitySet:Qx,getByKeyPath:_r,setByKeyPath:Ht,delByKeyPath:function(e,t){typeof t=="string"?Ht(e,t,void 0):"length"in t&&[].map.call(t,function(r){Ht(e,r,void 0)})},shallowClone:Sx,deepClone:Yi,getObjectDiff:Tf,cmp:et,asap:kx,minKey:zd,addons:[],connections:Xa,errnames:bf,dependencies:Zd,semVer:Tg,version:Tg.split(".").map(e=>parseInt(e)).reduce((e,t,r)=>e+t/Math.pow(10,2*r))}),_n.maxKey=Pi(_n.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(yn(Di,e=>{if(!wr){let t;vc?(t=document.createEvent("CustomEvent"),t.initCustomEvent(Zr,!0,!0,e)):t=new CustomEvent(Zr,{detail:e}),wr=!0,dispatchEvent(t),wr=!1}}),addEventListener(Zr,({detail:e})=>{wr||al(e)}));let wr=!1;if(typeof BroadcastChannel<"u"){const e=new BroadcastChannel(Zr);typeof e.unref=="function"&&e.unref(),yn(Di,t=>{wr||e.postMessage(t)}),e.onmessage=t=>{t.data&&al(t.data)}}else if(typeof self<"u"&&typeof navigator<"u"){yn(Di,t=>{try{wr||(typeof localStorage<"u"&&localStorage.setItem(Zr,JSON.stringify({trig:Math.random(),changedParts:t})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(r=>r.postMessage({type:Zr,changedParts:t})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",t=>{if(t.key===Zr){const r=JSON.parse(t.newValue);r&&al(r.changedParts)}});const e=self.document&&navigator.serviceWorker;e&&e.addEventListener("message",function({data:t}){t&&t.type===Zr&&al(t.changedParts)})}I.rejectionMapper=function(e,t){if(!e||e instanceof Bs||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Sg[e.name])return e;var r=new Sg[e.name](t||e.message,e);return"stack"in e&&Nr(r,"stack",{get:function(){return this.inner.stack}}),r},Ex(ir,Ux);const Fe=[];for(let e=0;e<256;++e)Fe.push((e+256).toString(16).slice(1));function Q_(e,t=0){return(Fe[e[t+0]]+Fe[e[t+1]]+Fe[e[t+2]]+Fe[e[t+3]]+"-"+Fe[e[t+4]]+Fe[e[t+5]]+"-"+Fe[e[t+6]]+Fe[e[t+7]]+"-"+Fe[e[t+8]]+Fe[e[t+9]]+"-"+Fe[e[t+10]]+Fe[e[t+11]]+Fe[e[t+12]]+Fe[e[t+13]]+Fe[e[t+14]]+Fe[e[t+15]]).toLowerCase()}let mu;const J_=new Uint8Array(16);function X_(){if(!mu){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mu=crypto.getRandomValues.bind(crypto)}return mu(J_)}const Z_=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rg={randomUUID:Z_};function br(e,t,r){var s;if(Rg.randomUUID&&!e)return Rg.randomUUID();e=e||{};const n=e.random??((s=e.rng)==null?void 0:s.call(e))??X_();if(n.length<16)throw new Error("Random bytes length must be >= 16");return n[6]=n[6]&15|64,n[8]=n[8]&63|128,Q_(n)}class Jx extends Er{constructor(r){const n=r?`WeightDatabase_${r}`:"WeightDatabase";super(n);$r(this,"weights");$r(this,"goals");this.version(1).stores({weights:"id, dateISO, kg"}),this.version(2).stores({weights:"id, dateISO, kg",goals:"id, targetWeight, goalType, targetDate, startingWeight, isActive, createdAt, updatedAt"})}}let Mn;const Xx=e=>(Mn&&Mn.close(),Mn=new Jx(e),Mn),Gt=()=>(Mn||(Mn=new Jx),Mn),Fr={async addWeight(e,t){if(!T)throw new Error("Supabase not available");const{data:r,error:n}=await T.from("weight_entries").insert({user_id:t,date_iso:e.dateISO,kg:e.kg}).select().single();if(n&&n.code==="23505"){const{data:s,error:a}=await T.from("weight_entries").update({kg:e.kg}).eq("user_id",t).eq("date_iso",e.dateISO).select().single();if(a)throw a;return{id:s.id,dateISO:s.date_iso,kg:s.kg}}if(n)throw n;return{id:r.id,dateISO:r.date_iso,kg:r.kg}},async deleteWeight(e){if(!T)throw new Error("Supabase not available");const{error:t}=await T.from("weight_entries").delete().eq("id",e);if(t)throw t},async getAllWeights(e){if(!T)throw new Error("Supabase not available");const{data:t,error:r}=await T.from("weight_entries").select("*").eq("user_id",e).order("date_iso",{ascending:!1});if(r)throw r;return(t||[]).map(n=>({id:n.id,dateISO:n.date_iso,kg:n.kg}))},async getWeightById(e){if(!T)throw new Error("Supabase not available");const{data:t,error:r}=await T.from("weight_entries").select("*").eq("id",e).single();if(r){if(r.code==="PGRST116")return;throw r}return{id:t.id,dateISO:t.date_iso,kg:t.kg}},async updateWeight(e,t){if(!T)throw new Error("Supabase not available");const r={};t.dateISO!==void 0&&(r.date_iso=t.dateISO),t.kg!==void 0&&(r.kg=t.kg);const{data:n,error:s}=await T.from("weight_entries").update(r).eq("id",e).select().single();if(s)throw s.code==="PGRST116"?new Error("Weight entry not found in cloud storage"):s;return{id:n.id,dateISO:n.date_iso,kg:n.kg}},async clearAll(e){if(!T)throw new Error("Supabase not available");const{error:t}=await T.from("weight_entries").delete().eq("user_id",e);if(t)throw t}},it={async addWeight(e){const t=Gt(),r=await t.weights.where("dateISO").equals(e.dateISO).first();if(r){const n={...r,kg:e.kg};return await t.weights.put(n),n}else{const n={id:br(),...e};return await t.weights.add(n),n}},async deleteWeight(e){await Gt().weights.delete(e)},async getAllWeights(){return await Gt().weights.orderBy("dateISO").reverse().toArray()},async getWeightById(e){return await Gt().weights.get(e)},async updateWeight(e,t){const r=Gt(),n=await r.weights.get(e);if(!n)throw new Error("Weight entry not found");const s={...n,...t};return await r.weights.put(s),s},async clearAll(){await Gt().weights.clear()}},cr={async addWeight(e,t){try{if(T&&t){const r=await Fr.addWeight(e,t);return await it.addWeight(e),r}}catch(r){console.warn("Supabase save failed, using local storage:",r)}return await it.addWeight(e)},async deleteWeight(e,t){try{T&&t&&await Fr.deleteWeight(e)}catch(r){console.warn("Supabase delete failed:",r)}await it.deleteWeight(e)},async getAllWeights(e){try{if(T&&e)return await Fr.getAllWeights(e)}catch(t){console.warn("Supabase fetch failed, using local storage:",t)}return await it.getAllWeights()},async getWeightById(e,t){try{if(T&&t)return await Fr.getWeightById(e)}catch(r){console.warn("Supabase fetch failed, using local storage:",r)}return await it.getWeightById(e)},async updateWeight(e,t,r){let n=null;if(T&&r)try{n=await Fr.updateWeight(e,t)}catch(a){if(console.warn("Supabase update failed:",a),a instanceof Error&&a.message.includes("not found in cloud storage"))try{const o=await it.getWeightById(e);if(o){const l={...o,...t};delete l.id,n=await Fr.addWeight(l,r),console.log(" Created missing entry in Supabase:",n)}}catch(o){console.warn("Failed to create entry in Supabase:",o)}}let s;try{s=await it.updateWeight(e,t)}catch(a){if(a instanceof Error&&a.message.includes("Weight entry not found")){console.info(" Local entry not found, syncing from cloud data (normal behavior)");try{if(n)await it.addWeight({dateISO:n.dateISO,kg:n.kg}),s=n,console.info(" Successfully synced entry to local storage:",{id:n.id,dateISO:n.dateISO});else{const o={dateISO:t.dateISO||new Date().toISOString().split("T")[0],kg:t.kg||0};s=await it.addWeight(o),console.info(" Created new local entry as fallback:",{id:s.id,dateISO:s.dateISO})}}catch(o){if(console.error(" Failed to sync entry to local storage:",o),n)return console.info(" Returning cloud result despite local sync failure"),n;throw a}}else throw console.error(" Unexpected local storage error:",a),a}return n||s},async clearAll(e){try{T&&e&&await Fr.clearAll(e)}catch(t){console.warn("Supabase clear failed:",t)}await it.clearAll()},async syncData(e){if(!T||!e)return console.info(" Skipping data sync - no cloud storage available"),{synced:0,errors:0};console.info(" Starting weight data synchronization...");let t=0,r=0;try{const n=await Fr.getAllWeights(e);console.info(` Found ${n.length} entries in cloud storage`);const s=await it.getAllWeights();console.info(` Found ${s.length} entries in local storage`);const a=new Map(s.map(o=>[o.id,o]));for(const o of n)try{const l=a.get(o.id);l?(l.kg!==o.kg||l.dateISO!==o.dateISO)&&(await it.updateWeight(o.id,{dateISO:o.dateISO,kg:o.kg}),t++,console.debug(` Updated local entry: ${o.dateISO}`)):(await it.addWeight({dateISO:o.dateISO,kg:o.kg}),t++,console.debug(` Synced entry to local: ${o.dateISO}`))}catch(l){console.warn(` Failed to sync entry ${o.id}:`,l),r++}return console.info(` Data sync complete: ${t} entries synced, ${r} errors`),{synced:t,errors:r}}catch(n){return console.error(" Data synchronization failed:",n),{synced:t,errors:r+1}}}},Na={async addGoal(e,t){if(!T)throw new Error("Supabase not available");const{data:r,error:n}=await T.from("weight_goals").insert({user_id:t,target_weight:e.targetWeight,goal_type:e.goalType,target_date:e.targetDate||null,starting_weight:e.startingWeight||null,is_active:!0}).select().single();if(n)throw n;return{id:r.id,userId:r.user_id,targetWeight:r.target_weight,goalType:r.goal_type,targetDate:r.target_date,startingWeight:r.starting_weight,isActive:r.is_active,createdAt:r.created_at,updatedAt:r.updated_at}},async updateGoal(e,t){if(!T)throw new Error("Supabase not available");const r={};t.targetWeight!==void 0&&(r.target_weight=t.targetWeight),t.goalType!==void 0&&(r.goal_type=t.goalType),t.targetDate!==void 0&&(r.target_date=t.targetDate),t.startingWeight!==void 0&&(r.starting_weight=t.startingWeight);const{data:n,error:s}=await T.from("weight_goals").update(r).eq("id",e).select().single();if(s)throw s;return{id:n.id,userId:n.user_id,targetWeight:n.target_weight,goalType:n.goal_type,targetDate:n.target_date,startingWeight:n.starting_weight,isActive:n.is_active,createdAt:n.created_at,updatedAt:n.updated_at}},async getActiveGoal(e){if(!T)throw new Error("Supabase not available");const{data:t,error:r}=await T.from("weight_goals").select("*").eq("user_id",e).eq("is_active",!0).order("created_at",{ascending:!1}).limit(1).maybeSingle();if(r)throw r;return t?{id:t.id,userId:t.user_id,targetWeight:t.target_weight,goalType:t.goal_type,targetDate:t.target_date,startingWeight:t.starting_weight,isActive:t.is_active,createdAt:t.created_at,updatedAt:t.updated_at}:null},async deactivateGoal(e){if(!T)throw new Error("Supabase not available");const{error:t}=await T.from("weight_goals").update({is_active:!1}).eq("id",e);if(t)throw t},async getAllGoals(e){if(!T)throw new Error("Supabase not available");const{data:t,error:r}=await T.from("weight_goals").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;return(t||[]).map(n=>({id:n.id,userId:n.user_id,targetWeight:n.target_weight,goalType:n.goal_type,targetDate:n.target_date,startingWeight:n.starting_weight,isActive:n.is_active,createdAt:n.created_at,updatedAt:n.updated_at}))}},En={async addGoal(e){const t=Gt(),r=await t.goals.where("isActive").equals(1).toArray();for(const s of r)await t.goals.update(s.id,{isActive:!1,updatedAt:new Date().toISOString()});const n={id:br(),targetWeight:e.targetWeight,goalType:e.goalType,targetDate:e.targetDate,startingWeight:e.startingWeight,isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await t.goals.add(n),n},async updateGoal(e,t){const r=Gt(),n={...t,updatedAt:new Date().toISOString()};await r.goals.update(e,n);const s=await r.goals.get(e);if(!s)throw new Error("Goal not found");return s},async getActiveGoal(){return await Gt().goals.where("isActive").equals(1).first()||null},async deactivateGoal(e){await Gt().goals.update(e,{isActive:!1,updatedAt:new Date().toISOString()})},async getAllGoals(){return await Gt().goals.orderBy("createdAt").reverse().toArray()}},Oo={async addGoal(e,t){try{if(T&&t){const r=await Na.addGoal(e,t);return await En.addGoal(e),r}}catch(r){console.warn("Supabase goal save failed, using local storage:",r)}return await En.addGoal(e)},async updateGoal(e,t,r){try{if(T&&r){const n=await Na.updateGoal(e,t);return await En.updateGoal(e,t),n}}catch(n){console.warn("Supabase goal update failed, using local storage:",n)}return await En.updateGoal(e,t)},async getActiveGoal(e){try{if(T&&e)return await Na.getActiveGoal(e)}catch(t){console.warn("Supabase goal fetch failed, using local storage:",t)}return await En.getActiveGoal()},async deactivateGoal(e,t){try{T&&t&&await Na.deactivateGoal(e)}catch(r){console.warn("Supabase goal deactivation failed:",r)}await En.deactivateGoal(e)},async getAllGoals(e){try{if(T&&e)return await Na.getAllGoals(e)}catch(t){console.warn("Supabase goals fetch failed, using local storage:",t)}return await En.getAllGoals()}};class Zx extends Er{constructor(r){const n=r?`TasksDatabase_${r}`:"TasksDatabase";super(n);$r(this,"todos");$r(this,"templates");this.version(2).stores({todos:"id, text, done, priority, category, dueDate, createdAt, updatedAt",templates:"id, name, createdAt"})}}let Fn;const Df=e=>(Fn&&Fn.close(),Fn=new Zx(e),Fn),Me=()=>(Fn||(Fn=new Zx),Fn),Mt={async addTodo(e,t){if(!T)throw new Error("Supabase not available");const{data:r,error:n}=await T.from("todos").insert({user_id:t,text:e.summary,summary:e.summary,done:e.done,priority:e.priority,category:e.category,due_date:e.dueDate||null,created_at:e.createdAt}).select().single();if(n)throw n;const s=[];if(e.subtasks&&e.subtasks.length>0){const{data:a,error:o}=await T.from("subtasks").insert(e.subtasks.map(l=>({todo_id:r.id,text:l.text,done:l.done}))).select();if(o)throw o;s.push(...(a||[]).map(l=>({id:l.id,text:l.text,done:l.done,createdAt:l.created_at})))}return{id:r.id,summary:r.summary,description:"",descriptionFormat:"plaintext",done:r.done,priority:r.priority,category:r.category,points:5,dueDate:r.due_date,dueDateTime:void 0,subtasks:s,completedAt:void 0,createdAt:r.created_at,updatedAt:r.updated_at}},async updateTodo(e,t){if(!T)throw new Error("Supabase not available");const r={};t.summary!==void 0&&(r.text=t.summary,r.summary=t.summary),t.done!==void 0&&(r.done=t.done),t.priority!==void 0&&(r.priority=t.priority),t.category!==void 0&&(r.category=t.category),t.dueDate!==void 0&&(r.due_date=t.dueDate),r.updated_at=new Date().toISOString();const{error:n}=await T.from("todos").update(r).eq("id",e);if(n)throw n},async deleteTodo(e){if(!T)throw new Error("Supabase not available");const{error:t}=await T.from("todos").delete().eq("id",e);if(t)throw t},async getAllTodos(e){if(!T)throw new Error("Supabase not available");const{data:t,error:r}=await T.from("todos").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(r)throw r;const n=(t||[]).map(o=>o.id);let s=[];if(n.length>0){const{data:o,error:l}=await T.from("subtasks").select("*").in("todo_id",n).order("created_at",{ascending:!0});if(l)throw l;s=o||[]}const a=s.reduce((o,l)=>(o[l.todo_id]||(o[l.todo_id]=[]),o[l.todo_id].push({id:l.id,text:l.text,done:l.done,createdAt:l.created_at}),o),{});return(t||[]).map(o=>({id:o.id,summary:o.summary,description:"",descriptionFormat:"plaintext",done:o.done,priority:o.priority,category:o.category,points:5,dueDate:o.due_date,dueDateTime:void 0,subtasks:a[o.id]||[],completedAt:void 0,createdAt:o.created_at,updatedAt:o.updated_at}))},async addSubtask(e,t){if(!T)throw new Error("Supabase not available");const{data:r,error:n}=await T.from("subtasks").insert({todo_id:e,text:t,done:!1}).select().single();if(n)throw n;return{id:r.id,text:r.text,done:r.done,createdAt:r.created_at}},async updateSubtask(e,t){if(!T)throw new Error("Supabase not available");const{error:r}=await T.from("subtasks").update({text:t.text,done:t.done}).eq("id",e);if(r)throw r},async deleteSubtask(e){if(!T)throw new Error("Supabase not available");const{error:t}=await T.from("subtasks").delete().eq("id",e);if(t)throw t},async clearAll(e){if(!T)throw new Error("Supabase not available");const{error:t}=await T.from("todos").delete().eq("user_id",e);if(t)throw t}},Se={async addTodo(e){const t=Me(),r=new Date().toISOString(),n={id:br(),updatedAt:r,...e,subtasks:e.subtasks||[],priority:e.priority||"medium",category:e.category||"other"};return await t.todos.add(n),n},async updateTodo(e,t){const r=Me(),n={...t,updatedAt:new Date().toISOString()};await r.todos.update(e,n)},async deleteTodo(e){await Me().todos.delete(e)},async getAllTodos(e){try{if(T&&e){const{data:r,error:n}=await T.from("todos").select("*").eq("user_id",e).order("created_at",{ascending:!1});if(n)throw n;return(r||[]).map(s=>({id:s.id,summary:s.text,description:"",descriptionFormat:"plaintext",done:s.done,priority:s.priority,category:s.category,points:5,dueDate:s.due_date,dueDateTime:void 0,subtasks:[],completedAt:void 0,createdAt:s.created_at,updatedAt:s.updated_at}))}}catch(r){console.warn("Supabase fetch failed, using local storage:",r)}return await Me().todos.orderBy("createdAt").reverse().toArray()},async getTodoById(e){return await Me().todos.get(e)},async getTodosByCategory(e){return await Me().todos.where("category").equals(e).toArray()},async getTodosByPriority(e){return await Me().todos.where("priority").equals(e).toArray()},async getOverdueTodos(){const e=Me(),t=new Date().toISOString().split("T")[0];return await e.todos.where("dueDate").below(t).and(r=>!r.done).toArray()},async addSubtask(e,t){const n=await Me().todos.get(e);if(!n)return;const s={id:br(),text:t,done:!1,createdAt:new Date().toISOString()},a=[...n.subtasks,s];await this.updateTodo(e,{subtasks:a})},async updateSubtask(e,t,r){const s=await Me().todos.get(e);if(!s)return;const a=s.subtasks.map(o=>o.id===t?{...o,...r}:o);await this.updateTodo(e,{subtasks:a})},async deleteSubtask(e,t){const n=await Me().todos.get(e);if(!n)return;const s=n.subtasks.filter(a=>a.id!==t);await this.updateTodo(e,{subtasks:s})},async addTemplate(e){const t=Me(),r={id:br(),...e};return await t.templates.add(r),r},async updateTemplate(e,t){await Me().templates.update(e,t)},async deleteTemplate(e){await Me().templates.delete(e)},async getAllTemplates(){return await Me().templates.orderBy("createdAt").reverse().toArray()},async getTemplateById(e){return await Me().templates.get(e)},async createTodoFromTemplate(e){const t=await this.getTemplateById(e);if(!t)throw new Error("Template not found");const r={summary:t.name,description:"",descriptionFormat:"plaintext",done:!1,priority:t.priority,category:t.category,points:5,subtasks:t.subtasks.map(n=>({id:br(),text:n.text,done:n.done,createdAt:new Date().toISOString()})),templateId:t.id,createdAt:new Date().toISOString()};return await this.addTodo(r)},async clearAll(){const e=Me();await e.todos.clear(),await e.templates.clear()}},ft={async addTodo(e,t){try{if(T&&t){const n=await Mt.addTodo(e,t);return await Se.addTodo(e),console.log(" Todo saved to cloud and local:",{id:n.id,summary:n.summary}),n}}catch(n){console.warn("Supabase save failed, using local storage:",n)}const r=await Se.addTodo(e);return console.log(" Todo saved locally only:",{id:r.id,summary:r.summary}),r},async updateTodo(e,t,r){let n=!1;if(T&&r)try{await Mt.updateTodo(e,t),n=!0,console.log(" Todo updated in cloud:",{id:e,updates:t})}catch(s){if(console.warn("Supabase update failed:",s),s instanceof Error&&(s.message.includes("not found")||s.message.includes("PGRST116")))try{const a=await Se.getTodoById(e);if(a){const o={...a,...t};delete o.id;const l=await Mt.addTodo(o,r);n=!0,console.log(" Created missing todo in Supabase:",{id:l.id,summary:l.summary})}}catch(a){console.warn("Failed to create todo in Supabase:",a)}}try{await Se.updateTodo(e,t),console.log(" Todo updated locally:",{id:e,updates:t,cloudSync:n})}catch(s){throw console.error(" Failed to update todo locally:",s),s}},async deleteTodo(e,t){let r=!1;if(T&&t)try{await Mt.deleteTodo(e),r=!0,console.log(" Todo deleted from cloud:",{id:e})}catch(n){console.warn("Supabase delete failed:",n)}try{await Se.deleteTodo(e),console.log(" Todo deleted locally:",{id:e,cloudSync:r})}catch(n){throw console.error(" Failed to delete todo locally:",n),n}},async getAllTodos(e){try{if(T&&e){const r=await Mt.getAllTodos(e);return console.log(" Todos loaded from cloud:",{count:r.length}),r}}catch(r){console.warn("Supabase fetch failed, using local storage:",r)}const t=await Se.getAllTodos();return console.log(" Todos loaded from local storage:",{count:t.length}),t},async getTodoById(e,t){try{if(T&&t){const s=(await Mt.getAllTodos(t)).find(a=>a.id===e);if(s)return console.log(" Todo found in cloud:",{id:e}),s}}catch(n){console.warn("Supabase fetch failed, using local storage:",n)}const r=await Se.getTodoById(e);return r&&console.log(" Todo found locally:",{id:e}),r},async syncData(e){if(!T||!e)return console.info(" Skipping todo sync - no cloud storage available"),{synced:0,errors:0};console.info(" Starting todo data synchronization...");let t=0,r=0;try{const n=await Mt.getAllTodos(e);console.info(` Found ${n.length} todos in cloud storage`);const s=await Se.getAllTodos();console.info(` Found ${s.length} todos in local storage`);const a=new Map(s.map(o=>[o.id,o]));for(const o of n)try{const l=a.get(o.id);if(!l)await Se.addTodo({summary:o.summary,description:o.description,descriptionFormat:o.descriptionFormat,done:o.done,priority:o.priority,category:o.category,points:o.points,dueDate:o.dueDate,dueDateTime:o.dueDateTime,subtasks:o.subtasks,completedAt:o.completedAt,createdAt:o.createdAt}),t++,console.debug(` Synced todo to local: ${o.summary}`);else{const c=new Date(o.updatedAt),u=new Date(l.updatedAt);c>u&&(await Se.updateTodo(o.id,{summary:o.summary,description:o.description,descriptionFormat:o.descriptionFormat,done:o.done,priority:o.priority,category:o.category,points:o.points,dueDate:o.dueDate,dueDateTime:o.dueDateTime,subtasks:o.subtasks,completedAt:o.completedAt,updatedAt:o.updatedAt}),t++,console.debug(` Updated local todo: ${o.summary}`))}}catch(l){console.warn(` Failed to sync todo ${o.id}:`,l),r++}return console.info(` Todo sync complete: ${t} todos synced, ${r} errors`),{synced:t,errors:r}}catch(n){return console.error(" Todo synchronization failed:",n),{synced:t,errors:r+1}}},async addSubtask(e,t,r){try{if(T&&r){const n=await Mt.addSubtask(e,t);return await Se.addSubtask(e,t),console.log(" Subtask saved to cloud and local:",{todoId:e,text:t}),n}}catch(n){console.warn("Supabase subtask save failed, using local storage:",n)}return await Se.addSubtask(e,t),console.log(" Subtask saved locally only:",{todoId:e,text:t}),{id:br(),text:t,done:!1,createdAt:new Date().toISOString()}},async updateSubtask(e,t,r,n){let s=!1;if(T&&n)try{await Mt.updateSubtask(t,r),s=!0,console.log(" Subtask updated in cloud:",{todoId:e,subtaskId:t,updates:r})}catch(a){console.warn("Supabase subtask update failed:",a)}try{await Se.updateSubtask(e,t,r),console.log(" Subtask updated locally:",{todoId:e,subtaskId:t,updates:r,cloudSync:s})}catch(a){throw console.error(" Failed to update subtask locally:",a),a}},async deleteSubtask(e,t,r){let n=!1;if(T&&r)try{await Mt.deleteSubtask(t),n=!0,console.log(" Subtask deleted from cloud:",{todoId:e,subtaskId:t})}catch(s){console.warn("Supabase subtask delete failed:",s)}try{await Se.deleteSubtask(e,t),console.log(" Subtask deleted locally:",{todoId:e,subtaskId:t,cloudSync:n})}catch(s){throw console.error(" Failed to delete subtask locally:",s),s}},async clearAll(e){let t=!1;if(T&&e)try{await Mt.clearAll(e),t=!0,console.log(" All todos cleared from cloud")}catch(r){console.warn("Supabase clear failed:",r)}try{await Se.clearAll(),console.log(" All todos cleared locally:",{cloudSync:t})}catch(r){throw console.error(" Failed to clear todos locally:",r),r}}};class ev extends Er{constructor(r){const n=r?`NotesDatabase_${r}`:"NotesDatabase";super(n);$r(this,"notes");this.version(1).stores({notes:"id, title, content, createdAt, updatedAt"})}}let Wn;const e2=e=>(Wn&&Wn.close(),Wn=new ev(e),Wn),ps=()=>(Wn||(Wn=new ev),Wn),ys={async addNote(e,t){if(!T)throw new Error("Supabase not available");const{data:r,error:n}=await T.from("notes").insert({user_id:t,title:e.title,content:e.content}).select().single();if(n)throw n;return{id:r.id,title:r.title,content:r.content,createdAt:r.created_at,updatedAt:r.updated_at}},async updateNote(e,t){if(!T)throw new Error("Supabase not available");const{error:r}=await T.from("notes").update({title:t.title,content:t.content}).eq("id",e);if(r)throw r},async deleteNote(e){if(!T)throw new Error("Supabase not available");const{error:t}=await T.from("notes").delete().eq("id",e);if(t)throw t},async getAllNotes(e){if(!T)throw new Error("Supabase not available");const{data:t,error:r}=await T.from("notes").select("*").eq("user_id",e).order("updated_at",{ascending:!1});if(r)throw r;return(t||[]).map(n=>({id:n.id,title:n.title,content:n.content,createdAt:n.created_at,updatedAt:n.updated_at}))},async getNoteById(e){if(!T)throw new Error("Supabase not available");const{data:t,error:r}=await T.from("notes").select("*").eq("id",e).single();if(!r)return{id:t.id,title:t.title,content:t.content,createdAt:t.created_at,updatedAt:t.updated_at}},async clearAll(e){if(!T)throw new Error("Supabase not available");const{error:t}=await T.from("notes").delete().eq("user_id",e);if(t)throw t}},qr={async addNote(e){const t=ps(),r={id:br(),...e};return await t.notes.add(r),r},async updateNote(e,t){await ps().notes.update(e,{...t,updatedAt:new Date().toISOString()})},async deleteNote(e){await ps().notes.delete(e)},async getAllNotes(){return await ps().notes.orderBy("updatedAt").reverse().toArray()},async getNoteById(e){return await ps().notes.get(e)},async clearAll(){await ps().notes.clear()}},Lo={async addNote(e,t){try{if(T&&t){const r=await ys.addNote(e,t);return await qr.addNote(e),r}}catch(r){console.warn("Supabase save failed, using local storage:",r)}return await qr.addNote(e)},async updateNote(e,t,r){try{T&&r&&await ys.updateNote(e,t)}catch(n){console.warn("Supabase update failed:",n)}await qr.updateNote(e,t)},async deleteNote(e,t){try{T&&t&&await ys.deleteNote(e)}catch(r){console.warn("Supabase delete failed:",r)}await qr.deleteNote(e)},async getAllNotes(e){try{if(T&&e)return await ys.getAllNotes(e)}catch(t){console.warn("Supabase fetch failed, using local storage:",t)}return await qr.getAllNotes()},async getNoteById(e,t){try{if(T&&t)return await ys.getNoteById(e)}catch(r){console.warn("Supabase fetch failed, using local storage:",r)}return await qr.getNoteById(e)},async clearAll(e){try{T&&e&&await ys.clearAll(e)}catch(t){console.warn("Supabase clear failed:",t)}await qr.clearAll()}},gu=e=>{console.log(`Initializing databases for user: ${e}`);try{Xx(e),Df(e),e2(e),console.log("User databases initialized successfully")}catch(t){throw console.error("Failed to initialize user databases:",t),t}},t2=async e=>{console.log(`Clearing databases for user: ${e}`);try{const t=[`WeightDatabase_${e}`,`TasksDatabase_${e}`,`NotesDatabase_${e}`];await Promise.all(t.map(r=>new Promise((n,s)=>{const a=indexedDB.deleteDatabase(r);a.onsuccess=()=>{console.log(`Deleted database: ${r}`),n()},a.onerror=()=>{console.error(`Failed to delete database: ${r}`),s(a.error)}}))),console.log("User databases cleared successfully")}catch(t){throw console.error("Failed to clear user databases:",t),t}},Io=e=>e.replace(/[^a-zA-Z0-9_-]/g,"_"),Ro=()=>T!==null?(console.log(" Supabase configured, using Supabase auth"),"supabase"):(console.log(" Supabase not configured or missing env vars, using local auth"),"local"),r2=500,eh=3,n2=1e3,s2=e=>e.isAuthenticated&&(!e.user||!e.token)?(console.warn(" Session integrity check failed: authenticated but missing user/token"),!1):!e.isAuthenticated&&(e.user||e.token)?(console.warn(" Session integrity check failed: not authenticated but has user/token"),!1):!0,pu=async(e,t=eh,r=n2)=>{let n;for(let s=1;s<=t;s++)try{return await e()}catch(a){if(n=a,console.warn(` Retry attempt ${s}/${t} failed:`,a),s===t)break;const o=r*Math.pow(2,s-1);await new Promise(l=>setTimeout(l,o))}throw n};let th=!1;const te=kn()(Wj((e,t)=>({user:null,isAuthenticated:!1,isLoading:!1,error:null,token:null,isCheckingAuth:!1,lastAuthCheck:0,retryCount:0,login:async r=>{e({isLoading:!0,error:null});try{console.log(" Starting login process for:",r.username);const n=Ro();console.log(" Using auth service:",n);let s=null,a="";if(n==="supabase")try{const{user:l,error:c}=await Pn.loginWithUsername(r.username,r.password);if(c)throw console.error(" Supabase login error:",c),new Error(c.message);s=l,a=(s==null?void 0:s.id)||""}catch(l){console.error(" Supabase login failed:",l),console.log(" Attempting fallback to local auth for login...");try{const c=await pu(()=>Nn.login(r));s=c.user,a=c.token,console.log(" Fallback to local auth login successful:",s.username)}catch(c){console.error(" Local auth login also failed:",c);const u=l instanceof Error?l.message:"Authentication failed";throw new Error(`Authentication failed: ${u}`)}}else{const l=await pu(()=>Nn.login(r));s=l.user,a=l.token}if(console.log(" Login result:",{user:s,token:a}),!s)throw console.error(" No user returned from login"),new Error("Login failed - no user returned");console.log(" Login successful, setting user state"),e({user:s,token:a,isAuthenticated:!0,isLoading:!1,error:null,retryCount:0});const o=Io(s.id);gu(o),console.log(" Login process completed successfully")}catch(n){console.error(" Login error in store:",n),e({isLoading:!1,error:n instanceof Error?n.message:"Login failed",user:null,token:null,isAuthenticated:!1})}},register:async r=>{e({isLoading:!0,error:null});try{if(r.password.length<6)throw new Error("Password must be at least 6 characters long");const n=Ro();if(console.log(" Using auth service for registration:",n),n==="supabase"){const{user:s,error:a}=await Pn.register(r.username,r.email,r.password);if(a)throw new Error(a.message);if(!s)throw new Error("Registration failed")}else await pu(()=>Nn.register(r));e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})}catch(n){console.error("Registration error:",n),e({isLoading:!1,error:n instanceof Error?n.message:"Registration failed",user:null,token:null,isAuthenticated:!1})}},logout:async()=>{var n;const r=t();e({isLoading:!0});try{if((n=r.user)!=null&&n.id)try{const a=Io(r.user.id);await t2(a)}catch(a){console.error("Error clearing user databases:",a)}const s=Ro();s==="supabase"?await Pn.logout():Nn.logout(),e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,isCheckingAuth:!1,lastAuthCheck:0,retryCount:0}),s==="supabase"&&localStorage.clear()}catch(s){console.error("Logout error:",s),e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,isCheckingAuth:!1,lastAuthCheck:0,retryCount:0})}},clearError:()=>{e({error:null})},checkAuthStatus:async()=>{const r=t(),n=Date.now();if(r.isCheckingAuth||n-r.lastAuthCheck<r2){console.log(" Auth check skipped - too recent or already in progress");return}if(!s2(r)){console.log(" Fixing corrupted session state"),e({user:null,token:null,isAuthenticated:!1,error:null});return}console.log(" Starting auth status check..."),e({isCheckingAuth:!0,lastAuthCheck:n});try{const s=Ro();let a=null,o="";if(console.log(" Using auth service:",s),s==="supabase"){console.log(" Checking Supabase auth status...");const l=t();if(th&&l.user)console.log(" Using user from auth state change, skipping Supabase call"),a=l.user,o=l.token||a.id;else try{const c=new Promise((u,d)=>{setTimeout(()=>d(new Error("Supabase auth timeout")),8e3)});a=await Promise.race([Pn.getSession(),c]),o=(a==null?void 0:a.id)||"",console.log(" Supabase auth check successful:",a==null?void 0:a.email)}catch(c){console.error(" Supabase auth check failed:",c),console.log(" Attempting fallback to local auth...");try{const u=Nn.getCurrentUser();u?(a=u.user,o=u.token,console.log(" Fallback to local auth successful:",a.username)):(console.log(" No local session found either"),a=null,o="")}catch(u){console.error(" Local auth fallback also failed:",u),a=null,o=""}try{await Pn.logout(),console.log(" Logged out from Supabase after failure")}catch(u){console.error("Failed to logout from Supabase:",u)}}}else{const l=Nn.getCurrentUser();l?(a=l.user,o=l.token,console.log(" Found existing session for user:",a.username)):console.log(" No existing session found")}if(!a){console.log(" No user found, setting unauthenticated state"),e({isAuthenticated:!1,user:null,token:null,isCheckingAuth:!1,retryCount:0});return}if(console.log(" Auth check successful, user authenticated:",a.username),e({isAuthenticated:!0,user:a,token:o,isCheckingAuth:!1,retryCount:0}),a!=null&&a.id){const l=Io(a.id);gu(l);try{const{initializeTasksStore:c}=await Or(async()=>{const{initializeTasksStore:u}=await Promise.resolve().then(()=>Yg);return{initializeTasksStore:u}},void 0);await c()}catch(c){console.error("Failed to initialize tasks store:",c)}}}catch(s){console.error("Check auth status error:",s);const o=t().retryCount+1;o>=eh?(console.error(" Max auth check retries exceeded, clearing auth state"),e({isAuthenticated:!1,user:null,token:null,isCheckingAuth:!1,retryCount:0})):(console.log(` Auth check retry ${o}/${eh}`),e({isCheckingAuth:!1,retryCount:o}))}},setUser:async(r,n)=>{if(!r||!n){console.error(" setUser called with invalid parameters");return}e({user:r,token:n,isAuthenticated:!0,isLoading:!1,error:null,retryCount:0});const s=Io(r.id);gu(s);try{const{initializeTasksStore:a}=await Or(async()=>{const{initializeTasksStore:o}=await Promise.resolve().then(()=>Yg);return{initializeTasksStore:o}},void 0);await a()}catch(a){console.error("Failed to initialize tasks store in setUser:",a)}},forceLogout:async()=>{console.log(" Force logout initiated...");try{await Pn.logout(),console.log(" Supabase logout completed")}catch(r){console.error(" Supabase logout failed:",r)}try{Nn.logout(),console.log(" Local auth logout completed")}catch(r){console.error(" Local auth logout failed:",r)}try{localStorage.clear(),console.log(" localStorage cleared")}catch(r){console.error(" localStorage clear failed:",r)}e({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,isCheckingAuth:!1,lastAuthCheck:0,retryCount:0}),console.log(" Force logout completed")}}),{name:"auth-storage",partialize:e=>({user:e.user,token:e.token}),onRehydrateStorage:()=>e=>{e&&(console.log(" Auth state rehydrated, forcing auth check"),e.isAuthenticated=!1,e.isCheckingAuth=!1,e.lastAuthCheck=0,e.retryCount=0,setTimeout(()=>{te.getState().checkAuthStatus()},100))}}));let yu=!1;Pn.onAuthStateChange(async e=>{if(yu){console.log(" Auth state change already in progress, skipping");return}yu=!0;try{const t=te.getState();e&&!t.isAuthenticated?(console.log(" Auth state change: user logged in"),th=!0,await t.setUser(e,e.id)):!e&&t.isAuthenticated&&(console.log(" Auth state change: user logged out"),th=!1,await t.logout())}catch(t){console.error("Auth state change error:",t)}finally{yu=!1}});function tv(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=tv(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function rv(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=tv(e))&&(n&&(n+=" "),n+=t);return n}const Pf="-",a2=e=>{const t=o2(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Pf);return l[0]===""&&l.length!==1&&l.shift(),nv(l,t)||i2(o)},getConflictingClassGroupIds:(o,l)=>{const c=r[o]||[];return l&&n[o]?[...c,...n[o]]:c}}},nv=(e,t)=>{var o;if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),s=n?nv(e.slice(1),n):void 0;if(s)return s;if(t.validators.length===0)return;const a=e.join(Pf);return(o=t.validators.find(({validator:l})=>l(a)))==null?void 0:o.classGroupId},$g=/^\[(.+)\]$/,i2=e=>{if($g.test(e)){const t=$g.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},o2=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return c2(Object.entries(e.classGroups),r).forEach(([a,o])=>{rh(o,n,a,t)}),n},rh=(e,t,r,n)=>{e.forEach(s=>{if(typeof s=="string"){const a=s===""?t:Mg(t,s);a.classGroupId=r;return}if(typeof s=="function"){if(l2(s)){rh(s(n),t,r,n);return}t.validators.push({validator:s,classGroupId:r});return}Object.entries(s).forEach(([a,o])=>{rh(o,Mg(t,a),r,n)})})},Mg=(e,t)=>{let r=e;return t.split(Pf).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},l2=e=>e.isThemeGetter,c2=(e,t)=>t?e.map(([r,n])=>{const s=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[r,s]}):e,u2=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const s=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return s(a,o),o},set(a,o){r.has(a)?r.set(a,o):s(a,o)}}},sv="!",d2=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,s=t[0],a=t.length,o=l=>{const c=[];let u=0,d=0,f;for(let w=0;w<l.length;w++){let g=l[w];if(u===0){if(g===s&&(n||l.slice(w,w+a)===t)){c.push(l.slice(d,w)),d=w+a;continue}if(g==="/"){f=w;continue}}g==="["?u++:g==="]"&&u--}const h=c.length===0?l:l.substring(d),m=h.startsWith(sv),x=m?h.substring(1):h,y=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:m,baseClassName:x,maybePostfixModifierPosition:y}};return r?l=>r({className:l,parseClassName:o}):o},h2=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},f2=e=>({cache:u2(e.cacheSize),parseClassName:d2(e),...a2(e)}),m2=/\s+/,g2=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s}=t,a=[],o=e.trim().split(m2);let l="";for(let c=o.length-1;c>=0;c-=1){const u=o[c],{modifiers:d,hasImportantModifier:f,baseClassName:h,maybePostfixModifierPosition:m}=r(u);let x=!!m,y=n(x?h.substring(0,m):h);if(!y){if(!x){l=u+(l.length>0?" "+l:l);continue}if(y=n(h),!y){l=u+(l.length>0?" "+l:l);continue}x=!1}const w=h2(d).join(":"),g=f?w+sv:w,p=g+y;if(a.includes(p))continue;a.push(p);const v=s(y,x);for(let b=0;b<v.length;++b){const j=v[b];a.push(g+j)}l=u+(l.length>0?" "+l:l)}return l};function p2(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=av(t))&&(n&&(n+=" "),n+=r);return n}const av=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=av(e[n]))&&(r&&(r+=" "),r+=t);return r};function y2(e,...t){let r,n,s,a=o;function o(c){const u=t.reduce((d,f)=>f(d),e());return r=f2(u),n=r.cache.get,s=r.cache.set,a=l,l(c)}function l(c){const u=n(c);if(u)return u;const d=g2(c,r);return s(c,d),d}return function(){return a(p2.apply(null,arguments))}}const ce=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},iv=/^\[(?:([a-z-]+):)?(.+)\]$/i,x2=/^\d+\/\d+$/,v2=new Set(["px","full","screen"]),w2=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,b2=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,k2=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,j2=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,S2=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ur=e=>qs(e)||v2.has(e)||x2.test(e),Wr=e=>fa(e,"length",A2),qs=e=>!!e&&!Number.isNaN(Number(e)),xu=e=>fa(e,"number",qs),_a=e=>!!e&&Number.isInteger(Number(e)),N2=e=>e.endsWith("%")&&qs(e.slice(0,-1)),V=e=>iv.test(e),Ur=e=>w2.test(e),_2=new Set(["length","size","percentage"]),E2=e=>fa(e,_2,ov),T2=e=>fa(e,"position",ov),C2=new Set(["image","url"]),D2=e=>fa(e,C2,L2),P2=e=>fa(e,"",O2),Ea=()=>!0,fa=(e,t,r)=>{const n=iv.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},A2=e=>b2.test(e)&&!k2.test(e),ov=()=>!1,O2=e=>j2.test(e),L2=e=>S2.test(e),I2=()=>{const e=ce("colors"),t=ce("spacing"),r=ce("blur"),n=ce("brightness"),s=ce("borderColor"),a=ce("borderRadius"),o=ce("borderSpacing"),l=ce("borderWidth"),c=ce("contrast"),u=ce("grayscale"),d=ce("hueRotate"),f=ce("invert"),h=ce("gap"),m=ce("gradientColorStops"),x=ce("gradientColorStopPositions"),y=ce("inset"),w=ce("margin"),g=ce("opacity"),p=ce("padding"),v=ce("saturate"),b=ce("scale"),j=ce("sepia"),S=ce("skew"),N=ce("space"),_=ce("translate"),E=()=>["auto","contain","none"],P=()=>["auto","hidden","clip","visible","scroll"],C=()=>["auto",V,t],A=()=>[V,t],Y=()=>["",ur,Wr],H=()=>["auto",qs,V],_e=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],we=()=>["solid","dashed","dotted","double","none"],z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],M=()=>["","0",V],U=()=>["auto","avoid","all","avoid-page","page","left","right","column"],X=()=>[qs,V];return{cacheSize:500,separator:":",theme:{colors:[Ea],spacing:[ur,Wr],blur:["none","",Ur,V],brightness:X(),borderColor:[e],borderRadius:["none","","full",Ur,V],borderSpacing:A(),borderWidth:Y(),contrast:X(),grayscale:M(),hueRotate:X(),invert:M(),gap:A(),gradientColorStops:[e],gradientColorStopPositions:[N2,Wr],inset:C(),margin:C(),opacity:X(),padding:A(),saturate:X(),scale:X(),sepia:M(),skew:X(),space:A(),translate:A()},classGroups:{aspect:[{aspect:["auto","square","video",V]}],container:["container"],columns:[{columns:[Ur]}],"break-after":[{"break-after":U()}],"break-before":[{"break-before":U()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[..._e(),V]}],overflow:[{overflow:P()}],"overflow-x":[{"overflow-x":P()}],"overflow-y":[{"overflow-y":P()}],overscroll:[{overscroll:E()}],"overscroll-x":[{"overscroll-x":E()}],"overscroll-y":[{"overscroll-y":E()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[y]}],"inset-x":[{"inset-x":[y]}],"inset-y":[{"inset-y":[y]}],start:[{start:[y]}],end:[{end:[y]}],top:[{top:[y]}],right:[{right:[y]}],bottom:[{bottom:[y]}],left:[{left:[y]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",_a,V]}],basis:[{basis:C()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",V]}],grow:[{grow:M()}],shrink:[{shrink:M()}],order:[{order:["first","last","none",_a,V]}],"grid-cols":[{"grid-cols":[Ea]}],"col-start-end":[{col:["auto",{span:["full",_a,V]},V]}],"col-start":[{"col-start":H()}],"col-end":[{"col-end":H()}],"grid-rows":[{"grid-rows":[Ea]}],"row-start-end":[{row:["auto",{span:[_a,V]},V]}],"row-start":[{"row-start":H()}],"row-end":[{"row-end":H()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",V]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",V]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[p]}],px:[{px:[p]}],py:[{py:[p]}],ps:[{ps:[p]}],pe:[{pe:[p]}],pt:[{pt:[p]}],pr:[{pr:[p]}],pb:[{pb:[p]}],pl:[{pl:[p]}],m:[{m:[w]}],mx:[{mx:[w]}],my:[{my:[w]}],ms:[{ms:[w]}],me:[{me:[w]}],mt:[{mt:[w]}],mr:[{mr:[w]}],mb:[{mb:[w]}],ml:[{ml:[w]}],"space-x":[{"space-x":[N]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[N]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",V,t]}],"min-w":[{"min-w":[V,t,"min","max","fit"]}],"max-w":[{"max-w":[V,t,"none","full","min","max","fit","prose",{screen:[Ur]},Ur]}],h:[{h:[V,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[V,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[V,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[V,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Ur,Wr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",xu]}],"font-family":[{font:[Ea]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",V]}],"line-clamp":[{"line-clamp":["none",qs,xu]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ur,V]}],"list-image":[{"list-image":["none",V]}],"list-style-type":[{list:["none","disc","decimal",V]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[g]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[g]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...we(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ur,Wr]}],"underline-offset":[{"underline-offset":["auto",ur,V]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:A()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",V]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",V]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[g]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[..._e(),T2]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",E2]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},D2]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[x]}],"gradient-via-pos":[{via:[x]}],"gradient-to-pos":[{to:[x]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[g]}],"border-style":[{border:[...we(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[g]}],"divide-style":[{divide:we()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...we()]}],"outline-offset":[{"outline-offset":[ur,V]}],"outline-w":[{outline:[ur,Wr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Y()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[g]}],"ring-offset-w":[{"ring-offset":[ur,Wr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Ur,P2]}],"shadow-color":[{shadow:[Ea]}],opacity:[{opacity:[g]}],"mix-blend":[{"mix-blend":[...z(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":z()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",Ur,V]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[v]}],sepia:[{sepia:[j]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[g]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[j]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",V]}],duration:[{duration:X()}],ease:[{ease:["linear","in","out","in-out",V]}],delay:[{delay:X()}],animate:[{animate:["none","spin","ping","pulse","bounce",V]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[b]}],"scale-x":[{"scale-x":[b]}],"scale-y":[{"scale-y":[b]}],rotate:[{rotate:[_a,V]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",V]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",V]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":A()}],"scroll-mx":[{"scroll-mx":A()}],"scroll-my":[{"scroll-my":A()}],"scroll-ms":[{"scroll-ms":A()}],"scroll-me":[{"scroll-me":A()}],"scroll-mt":[{"scroll-mt":A()}],"scroll-mr":[{"scroll-mr":A()}],"scroll-mb":[{"scroll-mb":A()}],"scroll-ml":[{"scroll-ml":A()}],"scroll-p":[{"scroll-p":A()}],"scroll-px":[{"scroll-px":A()}],"scroll-py":[{"scroll-py":A()}],"scroll-ps":[{"scroll-ps":A()}],"scroll-pe":[{"scroll-pe":A()}],"scroll-pt":[{"scroll-pt":A()}],"scroll-pr":[{"scroll-pr":A()}],"scroll-pb":[{"scroll-pb":A()}],"scroll-pl":[{"scroll-pl":A()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",V]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[ur,Wr,xu]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},R2=y2(I2);function le(...e){return R2(rv(e))}const $=k.forwardRef(({className:e,variant:t="default",size:r="default",...n},s)=>{const a="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 font-inter",o={default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline","cyber-ki":"bg-ki-green text-dark-navy font-semibold ki-glow-soft hover:ki-glow hover:scale-105 active:scale-95 neon-button","cyber-magenta":"bg-hyper-magenta text-white font-semibold magenta-glow hover:magenta-glow hover:scale-105 active:scale-95 neon-button","cyber-cyan":"bg-plasma-cyan text-dark-navy font-semibold cyan-glow hover:cyan-glow hover:scale-105 active:scale-95 neon-button","cyber-outline":"border-2 border-ki-green bg-transparent text-ki-green font-semibold hover:bg-ki-green hover:text-dark-navy hover:ki-glow transition-all duration-300 neon-button"},l={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"};return i.jsx("button",{className:le(a,o[t],l[r],e),ref:s,...n})});$.displayName="Button";const G=k.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:le("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));G.displayName="Card";const me=k.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:le("flex flex-col space-y-1.5 p-6",e),...t}));me.displayName="CardHeader";const ge=k.forwardRef(({className:e,...t},r)=>i.jsx("h3",{ref:r,className:le("text-2xl font-semibold leading-none tracking-tight",e),...t}));ge.displayName="CardTitle";const $2=k.forwardRef(({className:e,...t},r)=>i.jsx("p",{ref:r,className:le("text-sm text-muted-foreground",e),...t}));$2.displayName="CardDescription";const q=k.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:le("p-6 pt-0",e),...t}));q.displayName="CardContent";const M2=k.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:le("flex items-center p-6 pt-0",e),...t}));M2.displayName="CardFooter";const Fg=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,Wg=rv,lv=(e,t)=>r=>{var n;if((t==null?void 0:t.variants)==null)return Wg(e,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:s,defaultVariants:a}=t,o=Object.keys(s).map(u=>{const d=r==null?void 0:r[u],f=a==null?void 0:a[u];if(d===null)return null;const h=Fg(d)||Fg(f);return s[u][h]}),l=r&&Object.entries(r).reduce((u,d)=>{let[f,h]=d;return h===void 0||(u[f]=h),u},{}),c=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((u,d)=>{let{class:f,className:h,...m}=d;return Object.entries(m).every(x=>{let[y,w]=x;return Array.isArray(w)?w.includes({...a,...l}[y]):{...a,...l}[y]===w})?[...u,f,h]:u},[]);return Wg(e,o,c,r==null?void 0:r.class,r==null?void 0:r.className)},F2=lv("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),W2=k.forwardRef(({className:e,variant:t,...r},n)=>i.jsx("div",{ref:n,role:"alert",className:le(F2({variant:t}),e),...r}));W2.displayName="Alert";const U2=k.forwardRef(({className:e,...t},r)=>i.jsx("h5",{ref:r,className:le("mb-1 font-medium leading-none tracking-tight",e),...t}));U2.displayName="AlertTitle";const z2=k.forwardRef(({className:e,...t},r)=>i.jsx("div",{ref:r,className:le("text-sm [&_p]:leading-relaxed",e),...t}));z2.displayName="AlertDescription";const fe=k.forwardRef(({className:e,type:t,...r},n)=>i.jsx("input",{type:t,className:le("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:n,...r}));fe.displayName="Input";const xe=k.forwardRef(({className:e,...t},r)=>i.jsx("label",{ref:r,className:le("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));xe.displayName="Label";function B2({children:e}){const{isAuthenticated:t,isLoading:r,isCheckingAuth:n,checkAuthStatus:s,user:a,token:o}=te(),l=k.useRef(!1),[c,u]=k.useState(null),d=k.useCallback(()=>{if(!l.current){l.current=!0,s();const f=setTimeout(()=>{console.warn(" Auth check timeout - forcing unauthenticated state"),te.setState({isAuthenticated:!1,isCheckingAuth:!1,isLoading:!1,user:null,token:null})},1e4);u(f)}},[s]);return k.useEffect(()=>(d(),()=>{c&&clearTimeout(c)}),[d,c]),k.useEffect(()=>{!n&&c&&(clearTimeout(c),u(null))},[n,c]),r||n?i.jsx("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 dark:bg-gray-900",children:i.jsxs("div",{className:"space-y-4 text-center",children:[i.jsx(Jk,{className:"mx-auto h-8 w-8 animate-spin text-blue-600"}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:n?"Verifying session...":"Loading..."}),i.jsx("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:n?"Please wait while we verify your authentication status":"Checking your authentication status"})]}),(n||r)&&i.jsx("button",{onClick:()=>{console.log(" Emergency logout triggered by user"),te.getState().forceLogout()},className:"mt-4 px-4 py-2 text-sm text-gray-500 hover:text-gray-700 underline",children:"Having trouble? Click here to reset"})]})}):(!t&&(a||o)&&!n&&(console.warn(" Inconsistent auth state detected, clearing..."),te.setState({user:null,token:null,isAuthenticated:!1,error:null})),t?i.jsx(i.Fragment,{children:e}):i.jsx(Z1,{to:"/login",replace:!0}))}const G2=k.lazy(()=>Or(()=>import("./SimpleLoginPage-DF_qR13O.js"),[])),q2=[{path:"/login",element:i.jsx(G2,{})}];function K2(){const{user:e,logout:t}=te(),r=async()=>{confirm("Are you sure you want to log out? This will clear all your local data.")&&await t()},n=({to:s,icon:a,label:o})=>i.jsxs(I0,{to:s,className:({isActive:l})=>`
        flex flex-col items-center justify-center p-2 min-h-[48px] min-w-[48px] rounded-lg transition-all duration-200
        ${l?"text-green-500 bg-green-500/10 border border-green-500/20":"text-gray-500 hover:text-white hover:bg-white/5"}
        active:scale-95 touch-manipulation
      `,children:[i.jsx(a,{className:"h-5 w-5 mb-1 sm:h-6 sm:w-6"}),i.jsx("span",{className:"text-xs font-semibold leading-tight",children:o})]});return i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed inset-x-0 top-0 z-50 border-b border-gray-700 bg-gray-900 safe-area-top",children:i.jsxs("div",{className:"flex h-14 items-center justify-between px-4 sm:px-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-green-500 flex-shrink-0",children:i.jsx(aj,{className:"h-4 w-4 text-black"})}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("div",{className:"text-sm font-semibold text-white truncate",children:(e==null?void 0:e.name)||(e==null?void 0:e.username)||"User"}),i.jsx("div",{className:"text-xs text-gray-400",children:"Online"})]})]}),i.jsxs($,{onClick:r,variant:"ghost",size:"sm",className:"text-xs text-gray-400 hover:text-red-400 flex-shrink-0 min-h-[32px] px-2 sm:px-3",children:[i.jsx(Xk,{className:"mr-1 h-4 w-4"}),i.jsx("span",{className:"hidden sm:inline",children:"Logout"})]})]})}),i.jsx("div",{className:"fixed inset-x-0 bottom-0 z-40 bg-gray-900 border-t border-gray-700 safe-area-bottom",children:i.jsxs("div",{className:"flex h-16 sm:h-18 items-center justify-around px-2 sm:px-4 max-w-md mx-auto sm:max-w-2xl",children:[i.jsx(n,{to:"/",icon:Kk,label:"Home"}),i.jsx(n,{to:"/health",icon:Gn,label:"Health"}),i.jsx(n,{to:"/todo",icon:lf,label:"Todo"}),i.jsx(n,{to:"/goals",icon:Ue,label:"Goals"}),i.jsx(n,{to:"/journal",icon:tj,label:"Journal"}),i.jsx(n,{to:"/notes",icon:$0,label:"Notes"})]})})]})}function H2(){return null}function V2(){const[e,t]=k.useState(navigator.onLine);return k.useEffect(()=>{const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r),window.addEventListener("offline",n),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}},[]),e}function Y2(){return V2()?null:i.jsx("div",{className:"fixed left-0 right-0 top-0 z-50 bg-red-600 px-4 py-2 text-white duration-300 animate-in slide-in-from-top",children:i.jsxs("div",{className:"container mx-auto flex items-center justify-center gap-2 text-sm",children:[i.jsx(ij,{className:"h-4 w-4"}),i.jsx("span",{children:"You're offline"})]})})}function Q2({open:e,onOpenChange:t,children:r}){return i.jsx(i.Fragment,{children:e&&r})}const J2=({side:e="bottom",className:t,...r})=>{const n=e==="bottom"?"inset-x-0 bottom-0":e==="top"?"inset-x-0 top-0":e==="left"?"inset-y-0 left-0":"inset-y-0 right-0";return i.jsx("div",{className:le("slide-in-from- fixed z-50 bg-background shadow-lg transition-transform animate-in"+e+"-5",n,t),...r})},X2=({className:e,...t})=>i.jsx("div",{className:le("flex flex-col space-y-1.5 text-center sm:text-left",e),...t}),Z2=({className:e,...t})=>i.jsx("h2",{className:le("text-lg font-semibold",e),...t}),eE=({className:e,...t})=>i.jsx("p",{className:le("text-sm text-muted-foreground",e),...t}),$o="perfect-zenkai-install-declined";function tE(){const[e,t]=k.useState(null),[r,n]=k.useState(!1),[s,a]=k.useState(!1);return k.useEffect(()=>{localStorage.getItem($o)==="true"&&a(!0);const d=h=>{h.preventDefault(),t(h),n(!0)},f=()=>{t(null),n(!1),localStorage.removeItem($o),a(!1)};return window.addEventListener("beforeinstallprompt",d),window.addEventListener("appinstalled",f),()=>{window.removeEventListener("beforeinstallprompt",d),window.removeEventListener("appinstalled",f)}},[]),{deferredPrompt:e,isInstallable:r&&!s,isInstallPromptDeclined:s,showInstallPrompt:async()=>{if(!e)return!1;try{return await e.prompt(),(await e.userChoice).outcome==="accepted"?(t(null),n(!1),!0):!1}catch(u){return console.error("Error showing install prompt:",u),!1}},declineInstallPrompt:()=>{localStorage.setItem($o,"true"),a(!0)},clearDeclineState:()=>{localStorage.removeItem($o),a(!1)}}}const Ug="perfect-zenkai-first-visit",rE=3e4;function nE(){const[e,t]=k.useState(!1),{isInstallable:r,showInstallPrompt:n,declineInstallPrompt:s}=tE();k.useEffect(()=>{if(!localStorage.getItem(Ug)&&r){localStorage.setItem(Ug,"true");const u=setTimeout(()=>{t(!0)},rE);return()=>clearTimeout(u)}},[r]);const a=async()=>{await n()&&t(!1)},o=()=>{s(),t(!1)},l=()=>{o()};return!r||!e?null:i.jsx(Q2,{open:e,onOpenChange:l,children:i.jsxs(J2,{side:"bottom",className:"h-auto",children:[i.jsxs(X2,{children:[i.jsxs(Z2,{className:"flex items-center gap-2",children:[i.jsx(xd,{className:"h-5 w-5"}),"Install Perfect Zenkai"]}),i.jsx(eE,{children:"Install the app on your device for quick access and a better experience. You can access it from your home screen just like any other app."})]}),i.jsxs("div",{className:"mt-6 flex gap-3",children:[i.jsxs($,{onClick:a,className:"flex-1",children:[i.jsx(xd,{className:"mr-2 h-4 w-4"}),"Install App"]}),i.jsxs($,{variant:"outline",onClick:o,className:"flex-1",children:[i.jsx(mn,{className:"mr-2 h-4 w-4"}),"Later"]})]}),i.jsx("div",{className:"mt-4 text-center text-xs text-muted-foreground",children:"You can always install later from your browser's menu"})]})})}const cv=k.createContext(null);function sE(){const e=k.useContext(cv);if(!e)throw new Error("useToast must be used within ToastProvider");return{toast:t=>e.addToast(t),success:(t,r)=>e.addToast({title:t,description:r,variant:"success"}),error:(t,r)=>e.addToast({title:t,description:r,variant:"error"}),warning:(t,r)=>e.addToast({title:t,description:r,variant:"warning"}),info:(t,r)=>e.addToast({title:t,description:r,variant:"info"})}}function aE({children:e}){const[t,r]=k.useState([]),n=k.useCallback(a=>{const o=Math.random().toString(36).substr(2,9),l={...a,id:o};r(c=>[...c,l]),setTimeout(()=>{r(c=>c.filter(u=>u.id!==o))},a.duration||4e3)},[]),s=k.useCallback(a=>{r(o=>o.filter(l=>l.id!==a))},[]);return i.jsxs(cv.Provider,{value:{toasts:t,addToast:n,removeToast:s},children:[e,i.jsx(iE,{toasts:t,removeToast:s})]})}function iE({toasts:e,removeToast:t}){return i.jsx("div",{className:"pointer-events-none fixed right-4 top-4 z-[100] flex flex-col gap-2",children:e.map(r=>i.jsx(oE,{toast:r,onRemove:()=>t(r.id)},r.id))})}function oE({toast:e,onRemove:t}){const[r,n]=k.useState(!1);k.useEffect(()=>{const c=setTimeout(()=>n(!0),50);return()=>clearTimeout(c)},[]);const s=()=>{n(!1),setTimeout(t,200)},o={success:{icon:ji,colors:"bg-gray-900 border-ki-green text-ki-green ki-glow-soft",iconColor:"text-ki-green"},error:{icon:G0,colors:"bg-gray-900 border-red-400 text-red-400 shadow-[0_0_12px_rgba(239,68,68,0.3)]",iconColor:"text-red-400"},warning:{icon:Pl,colors:"bg-gray-900 border-yellow-400 text-yellow-400 shadow-[0_0_12px_rgba(251,191,36,0.3)]",iconColor:"text-yellow-400"},info:{icon:z0,colors:"bg-gray-900 border-plasma-cyan text-plasma-cyan cyan-glow",iconColor:"text-plasma-cyan"}}[e.variant||"info"],l=o.icon;return i.jsxs("div",{className:le("pointer-events-auto relative flex w-80 items-start gap-3 rounded-lg border p-4 transition-all duration-200 ease-out",o.colors,r?"translate-x-0 opacity-100":"translate-x-full opacity-0"),children:[i.jsx(l,{className:le("cyber-icon mt-0.5 h-5 w-5",o.iconColor)}),i.jsxs("div",{className:"flex-1 space-y-1",children:[e.title&&i.jsx("div",{className:"font-inter text-sm font-semibold",children:e.title}),e.description&&i.jsx("div",{className:"font-mono text-sm opacity-90",children:e.description})]}),i.jsx("button",{onClick:s,className:"opacity-60 transition-opacity hover:opacity-100",children:i.jsx(mn,{className:"h-4 w-4"})}),i.jsx("div",{className:le("absolute bottom-0 left-0 top-0 w-1 rounded-l-lg",e.variant==="success"&&"bg-ki-green",e.variant==="error"&&"bg-red-400",e.variant==="warning"&&"bg-yellow-400",e.variant==="info"&&"bg-plasma-cyan")})]})}function lE(){return i.jsx(aE,{children:i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsx(Y2,{}),i.jsx(K2,{}),i.jsx("main",{className:"px-4 sm:px-6 pb-20 sm:pb-24 pt-16 sm:pt-20 max-w-7xl mx-auto",children:i.jsx("div",{className:"min-h-[calc(100vh-10rem)] sm:min-h-[calc(100vh-12rem)]",children:i.jsx(ek,{})})}),i.jsx(H2,{}),i.jsx(nE,{}),!1]})})}const Lt=kn(e=>({weights:[],activeGoal:null,isLoading:!1,isGoalLoading:!1,error:null,goalError:null,addWeight:async t=>{try{e({isLoading:!0,error:null});const r=te.getState().user,n=r==null?void 0:r.id,s=await cr.addWeight(t,n);e(o=>{const l=o.weights.findIndex(u=>u.dateISO===s.dateISO);let c;return l>=0?(c=[...o.weights],c[l]=s):c=[s,...o.weights],{weights:c.sort((u,d)=>new Date(d.dateISO).getTime()-new Date(u.dateISO).getTime()),isLoading:!1}});const a=new Date().toISOString().split("T")[0];s.dateISO===a&&localStorage.setItem(`weight-logged-${a}`,"true"),gt("Weight saved successfully:",{local:!0,cloud:!!n,entry:s})}catch(r){throw mr("Failed to save weight:",r),e({error:r instanceof Error?r.message:"Failed to add weight",isLoading:!1}),r}},updateWeight:async(t,r)=>{try{e({isLoading:!0,error:null});const n=te.getState().user,s=n==null?void 0:n.id,a=await cr.updateWeight(t,r,s);e(o=>({weights:o.weights.map(l=>l.id===t?a:l).sort((l,c)=>new Date(c.dateISO).getTime()-new Date(l.dateISO).getTime()),isLoading:!1})),gt("Weight updated successfully:",{id:t,updates:r,cloud:!!s,entry:a})}catch(n){mr("Failed to update weight:",n);let s="Failed to update weight";throw n instanceof Error&&(n.message.includes("Weight entry not found")?s="Weight entry not found. It may have been deleted or is out of sync.":n.message.includes("not found in cloud storage")?s="Entry updated locally but failed to sync to cloud.":s=n.message),e({error:s,isLoading:!1}),n}},deleteWeight:async t=>{try{e({isLoading:!0,error:null});const r=te.getState().user,n=r==null?void 0:r.id;await cr.deleteWeight(t,n),e(s=>({weights:s.weights.filter(a=>a.id!==t),isLoading:!1})),console.log(" Weight deleted successfully:",{id:t,cloud:!!n})}catch(r){throw console.error(" Failed to delete weight:",r),e({error:r instanceof Error?r.message:"Failed to delete weight",isLoading:!1}),r}},loadWeights:async()=>{try{e({isLoading:!0,error:null});const t=te.getState().user,r=t==null?void 0:t.id;if(r){Xx(r);try{const s=await cr.syncData(r);s.synced>0&&console.info(` Synced ${s.synced} weight entries during load`)}catch(s){console.warn(" Data sync failed during load, continuing with available data:",s)}}const n=await cr.getAllWeights(r);e({weights:n.sort((s,a)=>new Date(a.dateISO).getTime()-new Date(s.dateISO).getTime()),isLoading:!1}),console.log(" Weights loaded successfully:",{count:n.length,cloud:!!r})}catch(t){console.error(" Failed to load weights:",t),e({error:t instanceof Error?t.message:"Failed to load weights",isLoading:!1})}},clearWeights:async()=>{try{e({isLoading:!0,error:null});const t=te.getState().user,r=t==null?void 0:t.id;await cr.clearAll(r),e({weights:[],isLoading:!1}),console.log(" Weights cleared successfully")}catch(t){throw console.error(" Failed to clear weights:",t),e({error:t instanceof Error?t.message:"Failed to clear weights",isLoading:!1}),t}},refreshWeights:async()=>{try{e({isLoading:!0,error:null});const t=te.getState().user,r=t==null?void 0:t.id,n=await cr.getAllWeights(r);e({weights:n.sort((s,a)=>new Date(a.dateISO).getTime()-new Date(s.dateISO).getTime()),isLoading:!1}),console.log(" Weights refreshed successfully:",{count:n.length,cloud:!!r})}catch(t){console.error(" Failed to refresh weights:",t),e({error:t instanceof Error?t.message:"Failed to refresh weights",isLoading:!1})}},syncData:async()=>{const t=te.getState().user,r=t==null?void 0:t.id,n=await cr.syncData(r);if(n.synced>0){const s=await cr.getAllWeights(r);e(()=>({weights:s.sort((a,o)=>new Date(o.dateISO).getTime()-new Date(a.dateISO).getTime())}))}return n},setGoal:async t=>{try{e({isGoalLoading:!0,goalError:null});const r=te.getState().user,n=r==null?void 0:r.id,s=await Oo.addGoal(t,n);e({activeGoal:s,isGoalLoading:!1}),console.log(" Goal set successfully:",{goal:s,cloud:!!n})}catch(r){throw console.error(" Failed to set goal:",r),e({goalError:r instanceof Error?r.message:"Failed to set goal",isGoalLoading:!1}),r}},updateGoal:async(t,r)=>{try{e({isGoalLoading:!0,goalError:null});const n=te.getState().user,s=n==null?void 0:n.id,a=await Oo.updateGoal(t,r,s);e({activeGoal:a,isGoalLoading:!1}),console.log(" Goal updated successfully:",{goal:a,cloud:!!s})}catch(n){throw console.error(" Failed to update goal:",n),e({goalError:n instanceof Error?n.message:"Failed to update goal",isGoalLoading:!1}),n}},loadActiveGoal:async()=>{try{e({isGoalLoading:!0,goalError:null});const t=te.getState().user,r=t==null?void 0:t.id,n=await Oo.getActiveGoal(r);e({activeGoal:n,isGoalLoading:!1}),console.log(" Active goal loaded:",{hasGoal:!!n,cloud:!!r})}catch(t){console.error(" Failed to load active goal:",t),e({goalError:t instanceof Error?t.message:"Failed to load goal",isGoalLoading:!1})}},deactivateGoal:async t=>{try{e({isGoalLoading:!0,goalError:null});const r=te.getState().user,n=r==null?void 0:r.id;await Oo.deactivateGoal(t,n),e({activeGoal:null,isGoalLoading:!1}),console.log(" Goal deactivated successfully:",{id:t,cloud:!!n})}catch(r){throw console.error(" Failed to deactivate goal:",r),e({goalError:r instanceof Error?r.message:"Failed to deactivate goal",isGoalLoading:!1}),r}}})),cE=async()=>{await Lt.getState().loadWeights(),await Lt.getState().loadActiveGoal()},Af=kn((e,t)=>({meals:[],analytics:null,suggestions:null,isLoading:!1,isAnalyticsLoading:!1,isSuggestionsLoading:!1,error:null,loadMeals:async()=>{e({isLoading:!0,error:null});try{e({meals:[],isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Failed to load meals",isLoading:!1})}},addMeal:async r=>{e({isLoading:!0,error:null});try{const n={id:crypto.randomUUID(),userId:void 0,type:r.type,timestamp:r.timestamp||new Date().toISOString(),foods:r.foods.map(a=>({...a,id:crypto.randomUUID()})),photos:r.photos,notes:r.notes,location:r.location,nutrition:{calories:r.foods.reduce((a,o)=>a+o.calories,0),protein:r.foods.reduce((a,o)=>a+o.macros.protein,0),carbs:r.foods.reduce((a,o)=>a+o.macros.carbs,0),fat:r.foods.reduce((a,o)=>a+o.macros.fat,0),fiber:r.foods.reduce((a,o)=>a+o.macros.fiber,0)},context:r.context?{location:r.context.location,voiceNotes:r.context.voiceNotes,tags:r.context.tags||[],mood:r.context.mood,hunger:r.context.hunger,satisfaction:r.context.satisfaction}:void 0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},s=t().meals;e({meals:[n,...s],isLoading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to add meal",isLoading:!1})}},updateMeal:async(r,n)=>{e({isLoading:!0,error:null});try{const a=t().meals.map(o=>o.id===r?{...o,type:n.type||o.type,timestamp:n.timestamp||o.timestamp,foods:n.foods?n.foods.map(c=>({...c,id:crypto.randomUUID()})):o.foods,photos:n.photos!==void 0?n.photos:o.photos,notes:n.notes!==void 0?n.notes:o.notes,location:n.location!==void 0?n.location:o.location,nutrition:n.foods?{calories:n.foods.reduce((c,u)=>c+u.calories,0),protein:n.foods.reduce((c,u)=>c+u.macros.protein,0),carbs:n.foods.reduce((c,u)=>c+u.macros.carbs,0),fat:n.foods.reduce((c,u)=>c+u.macros.fat,0),fiber:n.foods.reduce((c,u)=>c+u.macros.fiber,0)}:o.nutrition,context:n.context?{location:n.context.location,voiceNotes:n.context.voiceNotes,tags:n.context.tags||[],mood:n.context.mood,hunger:n.context.hunger,satisfaction:n.context.satisfaction}:o.context,updatedAt:new Date().toISOString()}:o);e({meals:a,isLoading:!1})}catch(s){e({error:s instanceof Error?s.message:"Failed to update meal",isLoading:!1})}},deleteMeal:async r=>{e({isLoading:!0,error:null});try{const s=t().meals.filter(a=>a.id!==r);e({meals:s,isLoading:!1})}catch(n){e({error:n instanceof Error?n.message:"Failed to delete meal",isLoading:!1})}},loadAnalytics:async()=>{e({isAnalyticsLoading:!0,error:null});try{const r=t().meals,n=r.length,s=r.reduce((j,S)=>j+S.nutrition.calories,0),a=n>0?s/n:0,o=new Date,l=new Date(o.getTime()-7*24*60*60*1e3),c=new Date(o.getTime()-30*24*60*60*1e3),u=r.filter(j=>new Date(j.timestamp)>=l),d=r.filter(j=>new Date(j.timestamp)>=c),f=u.reduce((j,S)=>j+S.nutrition.calories,0),h=d.reduce((j,S)=>j+S.nutrition.calories,0),m=r.reduce((j,S)=>j+S.nutrition.protein,0),x=r.reduce((j,S)=>j+S.nutrition.carbs,0),y=r.reduce((j,S)=>j+S.nutrition.fat,0),w=m+x+y,g=w>0?{protein:m/w*100,carbs:x/w*100,fat:y/w*100}:{protein:0,carbs:0,fat:0},p=r.reduce((j,S)=>(j[S.type]=(j[S.type]||0)+1,j),{});e({analytics:{totalMeals:n,averageCalories:a,weeklyCalories:f,monthlyCalories:h,macroBalance:g,mealFrequency:p,streak:0},isAnalyticsLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Failed to load analytics",isAnalyticsLoading:!1})}},loadSuggestions:async()=>{e({isSuggestionsLoading:!0,error:null});try{e({suggestions:{byTimeOfDay:{"07:00":["oatmeal","coffee","eggs"],"12:00":["sandwich","salad","soup"],"18:00":["chicken","rice","vegetables"],"21:00":["yogurt","fruit","nuts"]},recentFoods:[],popularFoods:[],customFoods:[]},isSuggestionsLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Failed to load suggestions",isSuggestionsLoading:!1})}},clearError:()=>{e({error:null})}}));function Of(){const{addWeight:e,updateWeight:t,deleteWeight:r,refreshWeights:n}=Lt(),{success:s,error:a}=sE();return{addWeight:async d=>{try{await e(d);const f=(d.kg*2.20462).toFixed(1),h=new Date(d.dateISO).toLocaleDateString();s("Weight Logged",`${f}lbs recorded for ${h}`)}catch{a("Failed to Log Weight","Please check your connection and try again")}},updateWeight:async(d,f)=>{try{await t(d,f);const h=f.kg?(f.kg*2.20462).toFixed(1):null,m=f.dateISO?new Date(f.dateISO).toLocaleDateString():null;let x="Entry updated successfully";h&&m?x=`Updated to ${h}lbs for ${m}`:h?x=`Weight updated to ${h}lbs`:m&&(x=`Date updated to ${m}`),s("Weight Updated",x)}catch(h){console.error("Update weight error:",h);const m=h instanceof Error?h.message:"Unknown error occurred";if(m.includes("not found")){a("Entry Not Found","This weight entry may have been deleted or is out of sync. Refreshing data...");try{await n()}catch(x){console.warn("Failed to refresh after sync error:",x)}}else m.includes("cloud storage")?a("Sync Issue","Entry updated locally but failed to sync to cloud. It will sync when connection is restored."):a("Failed to Update Weight","Please check your connection and try again")}},deleteWeight:async(d,f,h)=>{try{await r(d),s("Weight Deleted",f&&h?`${f}kg entry for ${new Date(h).toLocaleDateString()} removed`:"Weight entry removed successfully")}catch{a("Failed to Delete","Unable to delete weight entry. Please try again.")}},refreshWeights:async()=>{try{await n(),s("Data Refreshed","Weight data has been synchronized successfully")}catch{a("Refresh Failed","Unable to refresh weight data. Please try again.")}}}}const uE=lv("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border-current"}},defaultVariants:{variant:"default"}});function ee({className:e,variant:t,...r}){return i.jsx("div",{className:le(uE({variant:t}),e),...r})}const de=e=>e*2.20462,Oi=e=>e/2.20462;function Ir(e={}){const{haptic:t=!0,scale:r=.98,duration:n=100,disabled:s=!1}=e,a=k.useRef(null),[o,l]=k.useState(!1);return k.useEffect(()=>{const c=a.current;if(!c||s)return;const u=()=>{l(!0),t&&"vibrate"in navigator&&navigator.vibrate(10),c.style.transform=`scale(${r})`,c.style.transition=`transform ${n}ms ease`},d=()=>{l(!1),c.style.transform="scale(1)",setTimeout(()=>{c.style.transition=""},n)},f=()=>{l(!1),c.style.transform="scale(1)",c.style.transition=""};return c.addEventListener("touchstart",u,{passive:!0}),c.addEventListener("touchend",d,{passive:!0}),c.addEventListener("touchcancel",f,{passive:!0}),c.addEventListener("mousedown",u),c.addEventListener("mouseup",d),c.addEventListener("mouseleave",f),()=>{c.removeEventListener("touchstart",u),c.removeEventListener("touchend",d),c.removeEventListener("touchcancel",f),c.removeEventListener("mousedown",u),c.removeEventListener("mouseup",d),c.removeEventListener("mouseleave",f)}},[r,n,t,s]),{elementRef:a,isPressed:o}}function It(){const[e,t]=k.useState("desktop"),[r,n]=k.useState(!1);return k.useEffect(()=>{const s=()=>{const a=window.innerWidth;a<=412?(t("mobile"),n(!0)):a<=768?(t("mobile"),n(!1)):a<=1024?(t("tablet"),n(!1)):(t("desktop"),n(!1))};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),{breakpoint:e,isGalaxyS24Ultra:r,isMobile:e==="mobile",isTablet:e==="tablet",isDesktop:e==="desktop"}}function dE(){const[e,t]=k.useState(()=>new Date().toISOString().split("T")[0]),[r,n]=k.useState(""),[s,a]=k.useState({}),[o,l]=k.useState(!1),{isLoading:c}=Lt(),{addWeight:u}=Of(),{isMobile:d}=It(),f=Ir({scale:.95,haptic:!0,disabled:c||!r.trim()}),h=Ir({scale:.9}),m=()=>{const p={};e||(p.date="Date is required");const v=parseFloat(r);return r?isNaN(v)||v<=0?p.weight="Weight must be a positive number":v>=2200&&(p.weight="Weight must be less than 2200 lbs"):p.weight="Weight is required",a(p),Object.keys(p).length===0},x=async p=>{if(p.preventDefault(),!!m())try{await u({dateISO:e,kg:Oi(parseFloat(r))}),t(new Date().toISOString().split("T")[0]),n(""),a({}),l(!1)}catch(v){console.error("Failed to add weight:",v)}},y=p=>{p.key==="Enter"&&r.trim()&&x(p)},w=new Date().toISOString().split("T")[0],g=e===w;return i.jsxs(G,{className:"cyber-card mobile-card mobile-responsive",children:[i.jsx(me,{className:"mobile-layout",children:i.jsxs(ge,{className:"cyber-subtitle flex items-center gap-2 text-ki-green mobile-heading",children:[i.jsx(dn,{className:"cyber-icon h-5 w-5"}),"Log Weight Entry"]})}),i.jsxs(q,{className:"space-y-4 mobile-form",role:"form","data-testid":"weight-entry-form",children:[i.jsxs("div",{className:"flex gap-2 mobile-button-group",children:[i.jsx(fe,{id:"weight-quick",type:"number",step:"0.1",min:"0",max:"2199.9",placeholder:"Enter weight (lbs)",value:r,onChange:p=>n(p.target.value),onKeyPress:y,className:`
              flex-1 font-mono touch-target mobile-body
              focus:border-ki-green focus:ring-ki-green/20 border-gray-600 bg-gray-900 text-white
              ${s.weight?"border-red-500":""}
            `,disabled:c,"aria-label":"Weight in pounds"}),i.jsx($,{ref:h.elementRef,onClick:()=>l(!o),variant:"outline",size:"icon",className:`touch-target border-gray-600 bg-transparent text-gray-300 hover:bg-gray-800 ${o?"bg-gray-800":""} ${d?"galaxy-s24-ultra-touch":""}`,title:"Date options","aria-label":"Date options",children:i.jsx(Je,{className:"h-4 w-4"})}),i.jsxs($,{ref:f.elementRef,onClick:x,variant:"cyber-ki",disabled:c||!r.trim(),className:`touch-target-comfortable ${d?"galaxy-s24-ultra-touch":""}`,"aria-label":"Add weight entry",children:[i.jsx(Ot,{className:"mr-2 h-4 w-4"}),c?"LOGGING...":"LOG"]})]}),s.weight&&i.jsx("p",{className:"font-mono text-sm text-red-400",children:s.weight}),o&&i.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-4 mobile-layout",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"date",className:"cyber-label text-gray-300 mobile-body",children:"Entry Date"}),i.jsx(fe,{id:"date",type:"date",value:e,onChange:p=>t(p.target.value),className:`
                  touch-target mobile-body
                  focus:border-ki-green focus:ring-ki-green/20 border-gray-600
                  bg-gray-900 text-white
                  ${s.date?"border-red-500":""}
                `,"aria-label":"Entry date"}),s.date&&i.jsx("p",{className:"font-mono text-sm text-red-400 mobile-small",children:s.date})]}),i.jsxs("div",{className:"flex flex-wrap gap-2 mobile-button-group",children:[i.jsx($,{type:"button",variant:"outline",size:"sm",onClick:()=>t(w),className:`touch-target border-gray-600 bg-transparent text-gray-300 hover:bg-gray-800 ${g?"bg-gray-800 text-ki-green":""}`,"aria-label":"Set date to today",children:"Today"}),i.jsx($,{type:"button",variant:"outline",size:"sm",onClick:()=>{const p=new Date;p.setDate(p.getDate()-1),t(p.toISOString().split("T")[0])},className:"touch-target border-gray-600 bg-transparent text-gray-300 hover:bg-gray-800","aria-label":"Set date to yesterday",children:"Yesterday"})]})]}),r.trim()&&i.jsx("div",{className:"cyber-card rounded-lg bg-gray-900/50 p-3",children:i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium text-gray-300",children:"Entry Preview:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ee,{variant:"outline",className:"font-mono text-xs",children:[parseFloat(r).toFixed(1),"lbs"]}),i.jsxs(ee,{variant:"outline",className:"text-xs",children:[i.jsx(Je,{className:"mr-1 h-3 w-3"}),new Date(e).toLocaleDateString()]}),g&&i.jsx(ee,{variant:"outline",className:"text-ki-green text-xs",children:"Today"})]})]})}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{className:"h-3 w-3"}),i.jsx("span",{children:"Press Enter to log quickly"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(St,{className:"h-3 w-3"}),i.jsx("span",{children:"Consistent tracking = better results"})]})]})]})]})}const as=k.forwardRef(({className:e,value:t=0,max:r=100,variant:n="default",size:s="md",...a},o)=>{const l=Math.min(Math.max(t/r*100,0),100),c={sm:"h-1",md:"h-2",lg:"h-3"};if(n==="ring"){const u=s==="lg"?40:s==="md"?32:24,d=s==="lg"?6:s==="md"?4:3,f=2*Math.PI*u,h=f-l/100*f,m=(u+d)*2;return i.jsxs("div",{className:le("relative",e),ref:o,...a,children:[i.jsxs("svg",{width:m,height:m,className:"-rotate-90 transform",children:[i.jsx("circle",{cx:m/2,cy:m/2,r:u,stroke:"rgb(51, 65, 85)",strokeWidth:d,fill:"transparent"}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:"progressGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--ki-green)"}),i.jsx("stop",{offset:"100%",stopColor:"var(--plasma-cyan)"})]})}),i.jsx("circle",{cx:m/2,cy:m/2,r:u,stroke:"url(#progressGradient)",strokeWidth:d,fill:"transparent",strokeDasharray:f,strokeDashoffset:h,strokeLinecap:"round",className:"transition-all duration-500",style:{filter:"drop-shadow(0 0 8px rgba(34, 255, 183, 0.3))"}})]}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"gradient-text-ki font-cyber text-xl font-bold",children:[Math.round(l),"%"]})})})]})}return n==="cyber"?i.jsxs("div",{className:le("relative w-full overflow-hidden rounded-lg border border-gray-700 bg-gray-900",c[s],e),ref:o,...a,children:[i.jsx("div",{className:"relative h-full transition-all duration-500 ease-out",style:{width:`${l}%`,background:"linear-gradient(90deg, var(--ki-green), var(--plasma-cyan))",boxShadow:"0 0 12px rgba(34, 255, 183, 0.3)"},children:i.jsx("div",{className:"shimmer absolute inset-0 opacity-50"})}),i.jsx("div",{className:"via-ki-green/10 absolute inset-0 bg-gradient-to-r from-transparent to-transparent",style:{transform:`translateX(${l-100}%)`,transition:"transform 500ms ease-out"}})]}):i.jsx("div",{className:le("relative w-full overflow-hidden rounded-full bg-secondary",c[s],e),ref:o,...a,children:i.jsx("div",{className:"h-full w-full flex-1 bg-primary transition-all duration-300",style:{transform:`translateX(-${100-l}%)`}})})});as.displayName="Progress";const hE="Left",fE="Right",mE="Up",gE="Down",Os={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},nh={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},zg="mousemove",Bg="mouseup",pE="touchend",yE="touchmove",xE="touchstart";function vE(e,t,r,n){return e>t?r>0?fE:hE:n>0?gE:mE}function Gg(e,t){if(t===0)return e;const r=Math.PI/180*t,n=e[0]*Math.cos(r)+e[1]*Math.sin(r),s=e[1]*Math.cos(r)-e[0]*Math.sin(r);return[n,s]}function wE(e,t){const r=d=>{const f="touches"in d;f&&d.touches.length>1||e((h,m)=>{m.trackMouse&&!f&&(document.addEventListener(zg,n),document.addEventListener(Bg,o));const{clientX:x,clientY:y}=f?d.touches[0]:d,w=Gg([x,y],m.rotationAngle);return m.onTouchStartOrOnMouseDown&&m.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},h),nh),{initial:w.slice(),xy:w,start:d.timeStamp||0})})},n=d=>{e((f,h)=>{const m="touches"in d;if(m&&d.touches.length>1)return f;if(d.timeStamp-f.start>h.swipeDuration)return f.swiping?Object.assign(Object.assign({},f),{swiping:!1}):f;const{clientX:x,clientY:y}=m?d.touches[0]:d,[w,g]=Gg([x,y],h.rotationAngle),p=w-f.xy[0],v=g-f.xy[1],b=Math.abs(p),j=Math.abs(v),S=(d.timeStamp||0)-f.start,N=Math.sqrt(b*b+j*j)/(S||1),_=[p/(S||1),v/(S||1)],E=vE(b,j,p,v),P=typeof h.delta=="number"?h.delta:h.delta[E.toLowerCase()]||Os.delta;if(b<P&&j<P&&!f.swiping)return f;const C={absX:b,absY:j,deltaX:p,deltaY:v,dir:E,event:d,first:f.first,initial:f.initial,velocity:N,vxvy:_};C.first&&h.onSwipeStart&&h.onSwipeStart(C),h.onSwiping&&h.onSwiping(C);let A=!1;return(h.onSwiping||h.onSwiped||h[`onSwiped${E}`])&&(A=!0),A&&h.preventScrollOnSwipe&&h.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},f),{first:!1,eventData:C,swiping:!0})})},s=d=>{e((f,h)=>{let m;if(f.swiping&&f.eventData){if(d.timeStamp-f.start<h.swipeDuration){m=Object.assign(Object.assign({},f.eventData),{event:d}),h.onSwiped&&h.onSwiped(m);const x=h[`onSwiped${m.dir}`];x&&x(m)}}else h.onTap&&h.onTap({event:d});return h.onTouchEndOrOnMouseUp&&h.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},f),nh),{eventData:m})})},a=()=>{document.removeEventListener(zg,n),document.removeEventListener(Bg,o)},o=d=>{a(),s(d)},l=(d,f)=>{let h=()=>{};if(d&&d.addEventListener){const m=Object.assign(Object.assign({},Os.touchEventOptions),f.touchEventOptions),x=[[xE,r,m],[yE,n,Object.assign(Object.assign({},m),f.preventScrollOnSwipe?{passive:!1}:{})],[pE,s,m]];x.forEach(([y,w,g])=>d.addEventListener(y,w,g)),h=()=>x.forEach(([y,w])=>d.removeEventListener(y,w))}return h},u={ref:d=>{d!==null&&e((f,h)=>{if(f.el===d)return f;const m={};return f.el&&f.el!==d&&f.cleanUpTouch&&(f.cleanUpTouch(),m.cleanUpTouch=void 0),h.trackTouch&&d&&(m.cleanUpTouch=l(d,h)),Object.assign(Object.assign(Object.assign({},f),{el:d}),m)})}};return t.trackMouse&&(u.onMouseDown=r),[u,l]}function bE(e,t,r,n){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==r.preventScrollOnSwipe||t.touchEventOptions.passive!==r.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:n(e.el,t)})}function Lf(e){const{trackMouse:t}=e,r=k.useRef(Object.assign({},nh)),n=k.useRef(Object.assign({},Os)),s=k.useRef(Object.assign({},n.current));s.current=Object.assign({},n.current),n.current=Object.assign(Object.assign({},Os),e);let a;for(a in Os)n.current[a]===void 0&&(n.current[a]=Os[a]);const[o,l]=k.useMemo(()=>wE(c=>r.current=c(r.current,n.current),{trackMouse:t}),[t]);return r.current=bE(r.current,n.current,s.current,l),o}function kE({entry:e,onCancel:t,onSave:r}){const[n,s]=k.useState(e.dateISO),[a,o]=k.useState(de(e.kg).toFixed(1)),[l,c]=k.useState({}),{isLoading:u}=Lt(),{updateWeight:d}=Of(),f=()=>{const y={};n||(y.date="Date is required");const w=parseFloat(a);return a?isNaN(w)||w<=0?y.weight="Weight must be a positive number":w>=2200&&(y.weight="Weight must be less than 2200 lbs"):y.weight="Weight is required",c(y),Object.keys(y).length===0},h=async y=>{if(y.preventDefault(),!!f())try{const w={};n!==e.dateISO&&(w.dateISO=n);const g=Oi(parseFloat(a));Math.abs(g-e.kg)>.01&&(w.kg=g),Object.keys(w).length>0&&await d(e.id,w),r==null||r()}catch(w){console.error("Failed to update weight:",w)}},m=y=>{y.key==="Enter"?h(y):y.key==="Escape"&&t()},x=()=>{const y=Oi(parseFloat(a||"0"));return n!==e.dateISO||Math.abs(y-e.kg)>.01};return i.jsxs(G,{className:"cyber-card border-ki-green/50 mobile-card mobile-responsive",children:[i.jsx(me,{className:"pb-3 mobile-layout",children:i.jsxs(ge,{className:"cyber-subtitle flex items-center gap-2 text-ki-green text-sm mobile-heading",children:[i.jsx(dn,{className:"cyber-icon h-4 w-4"}),"Edit Weight Entry"]})}),i.jsxs(q,{className:"space-y-4 mobile-form","data-testid":"weight-edit-form",children:[i.jsxs("form",{onSubmit:h,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"edit-date",className:"cyber-label text-gray-300 text-xs mobile-small",children:"Entry Date"}),i.jsx(fe,{id:"edit-date",type:"date",value:n,onChange:y=>s(y.target.value),onKeyPress:m,className:`
                touch-target mobile-body
                focus:border-ki-green focus:ring-ki-green/20 border-gray-600
                bg-gray-900 text-white text-sm
                ${l.date?"border-red-500":""}
              `,disabled:u,"aria-label":"Entry date"}),l.date&&i.jsx("p",{className:"font-mono text-xs text-red-400 mobile-small",children:l.date})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"edit-weight",className:"cyber-label text-gray-300 text-xs mobile-small",children:"Weight (lbs)"}),i.jsx(fe,{id:"edit-weight",type:"number",step:"0.1",min:"0",max:"2199.9",placeholder:"Enter weight (lbs)",value:a,onChange:y=>o(y.target.value),onKeyPress:m,className:`
                font-mono touch-target mobile-body
                focus:border-ki-green focus:ring-ki-green/20 border-gray-600 
                bg-gray-900 text-white text-sm
                ${l.weight?"border-red-500":""}
              `,disabled:u,autoFocus:!0,"aria-label":"Weight in pounds"}),l.weight&&i.jsx("p",{className:"font-mono text-xs text-red-400 mobile-small",children:l.weight})]}),a&&i.jsx("div",{className:"cyber-card rounded-lg bg-gray-900/50 p-2",children:i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:"font-medium text-gray-400",children:"Preview:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ee,{variant:"outline",className:"font-mono text-xs",children:[parseFloat(a).toFixed(1),"lbs"]}),i.jsxs(ee,{variant:"outline",className:"text-xs",children:[i.jsx(Je,{className:"mr-1 h-3 w-3"}),new Date(n).toLocaleDateString()]}),x()&&i.jsx(ee,{variant:"outline",className:"text-ki-green text-xs",children:"Modified"})]})]})}),i.jsxs("div",{className:"flex gap-2 pt-2 mobile-button-group",children:[i.jsxs($,{type:"button",variant:"outline",onClick:t,className:"flex-1 touch-target border-gray-600 bg-transparent text-gray-300 hover:bg-gray-800 text-sm",disabled:u,"aria-label":"Cancel editing",children:[i.jsx(mn,{className:"mr-1 h-3 w-3"}),"Cancel"]}),i.jsxs($,{type:"submit",variant:"cyber-ki",className:"flex-1 touch-target text-sm",disabled:u||!x(),"aria-label":"Save changes",children:[i.jsx(df,{className:"mr-1 h-3 w-3"}),u?"SAVING...":"SAVE"]})]})]}),i.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Press Enter to save  Escape to cancel"})]})]})}function jE({entry:e}){const[t,r]=k.useState(null),[n,s]=k.useState(!1),[a,o]=k.useState(!1),[l,c]=k.useState(!1),{deleteWeight:u}=Of(),d=b=>new Date(b).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),f=b=>`${de(b).toFixed(1)} lbs`,h=()=>{window.confirm(`Delete weight entry for ${d(e.dateISO)}?`)&&u(e.id,e.kg,e.dateISO)},m=()=>{c(!0)},x=()=>{o(!0),c(!1)},y=()=>{o(!1)},w=()=>{o(!1)},g=()=>{s(!0);const b=setTimeout(()=>{m()},500);r(b)},p=()=>{s(!1),t&&(clearTimeout(t),r(null))},v=Lf({onSwipedLeft:()=>{m()},preventScrollOnSwipe:!0,trackMouse:!0});return a?i.jsx(kE,{entry:e,onCancel:y,onSave:w}):i.jsx(G,{...v,className:`
        cyber-card cursor-pointer py-3 transition-all duration-200
        ${n?"scale-95 shadow-inner":"hover:scale-[1.01]"}
        ${l?"border-ki-green/50":""}
      `,onTouchStart:g,onTouchEnd:p,onMouseDown:g,onMouseUp:p,onMouseLeave:p,onClick:()=>!l&&c(!0),children:i.jsx(q,{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-mono text-sm text-gray-400",children:d(e.dateISO)}),i.jsx("span",{className:"gradient-text-ki metric-display text-lg font-semibold",children:f(e.kg)})]}),l?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),x()},className:"border-ki-green/50 bg-transparent text-ki-green hover:bg-ki-green/10 h-8 px-2",children:i.jsx(B0,{className:"h-3 w-3"})}),i.jsx($,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),h()},className:"border-red-500/50 bg-transparent text-red-400 hover:bg-red-500/10 h-8 px-2",children:i.jsx(Bi,{className:"h-3 w-3"})}),i.jsx($,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),c(!1)},className:"text-gray-400 hover:bg-gray-800 h-8 px-2 text-xs",children:""})]}):i.jsxs("div",{className:"text-right font-mono text-xs text-gray-500",children:[i.jsx("div",{children:"Tap to edit"}),i.jsx("div",{className:"text-plasma-cyan",children:" Swipe left"})]})]})})})}function SE({period:e,onClose:t}){const{weights:r}=Lt(),s=(()=>{const d=new Date;return d.setDate(d.getDate()-e),r.filter(f=>new Date(f.dateISO)>=d).sort((f,h)=>new Date(h.dateISO).getTime()-new Date(f.dateISO).getTime())})(),o=(()=>{if(s.length===0)return null;const d=[...s].sort((y,w)=>new Date(y.dateISO).getTime()-new Date(w.dateISO).getTime()),f=d[0],h=d[d.length-1],m=h.kg-f.kg,x=s.reduce((y,w)=>y+w.kg,0)/s.length;return{firstWeight:f.kg,lastWeight:h.kg,change:m,averageWeight:x,entryCount:s.length,firstDate:f.dateISO,lastDate:h.dateISO}})(),l=d=>Math.abs(d)<.1?i.jsx(zi,{className:"h-4 w-4 text-plasma-cyan"}):d>0?i.jsx(St,{className:"h-4 w-4 text-red-400"}):i.jsx(Gi,{className:"h-4 w-4 text-ki-green"}),c=d=>Math.abs(d)<.1?"text-plasma-cyan":d>0?"text-red-400":"text-ki-green",u=d=>new Date(d).toLocaleDateString("en-US",{month:"short",day:"numeric"});return i.jsxs(G,{className:"cyber-card border-ki-green/30 mobile-card mobile-responsive","data-testid":"period-view-container",children:[i.jsx(me,{className:"pb-3 mobile-layout",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(ge,{className:"cyber-subtitle flex items-center gap-2 text-ki-green mobile-heading",children:[i.jsx(Je,{className:"cyber-icon h-5 w-5"}),"Last ",e," Days"]}),t&&i.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-200 text-lg font-bold touch-target","aria-label":"Close period view",children:""})]})}),i.jsxs(q,{className:"space-y-4 mobile-form",children:[o&&i.jsxs("div",{className:"cyber-card bg-gray-900/50 p-3 rounded-lg mobile-card",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center mobile-grid",children:[i.jsxs("div",{className:"mobile-card",children:[i.jsx("div",{className:"gradient-text-ki metric-display text-lg font-bold mobile-large",children:o.entryCount}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Entries"})]}),i.jsxs("div",{className:"mobile-card",children:[i.jsxs("div",{className:"gradient-text-cyan metric-display text-lg font-bold mobile-large",children:[de(o.averageWeight).toFixed(1),"lbs"]}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Average"})]}),i.jsxs("div",{className:"mobile-card",children:[i.jsxs("div",{className:`metric-display text-lg font-bold mobile-large ${c(o.change)}`,children:[o.change>=0?"+":"",de(o.change).toFixed(1),"lbs"]}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Change"})]}),i.jsxs("div",{className:"mobile-card",children:[i.jsx("div",{className:"flex items-center justify-center",children:l(o.change)}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Trend"})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-700 flex items-center justify-center gap-2",children:[i.jsx(ee,{variant:"outline",className:"text-xs",children:u(o.firstDate)}),i.jsx("span",{className:"text-gray-500",children:""}),i.jsx(ee,{variant:"outline",className:"text-xs",children:u(o.lastDate)})]})]}),s.length>0?i.jsxs("div",{className:"space-y-3 mobile-layout",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("h4",{className:"text-sm font-medium text-gray-300 mobile-body",children:["Weight Entries (",s.length,")"]}),i.jsx(ee,{variant:"outline",className:"text-xs mobile-caption",children:"Tap to edit"})]}),i.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto mobile-scroll","data-testid":"entries-scroll-container",children:s.map(d=>i.jsx("div",{"data-testid":`weight-entry-${d.id}`,className:"mobile-card",children:i.jsx(jE,{entry:d})},d.id))})]}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx(Je,{className:"h-12 w-12 text-gray-600 mx-auto mb-3"}),i.jsxs("p",{className:"text-gray-400 text-sm",children:["No weight entries in the last ",e," days"]}),i.jsx("p",{className:"text-gray-500 text-xs mt-1",children:"Add some entries to see them here"})]})]})]})}function NE({goalWeight:e,goalType:t="lose"}){const{weights:r,activeGoal:n}=Lt(),[s,a]=k.useState(null),o=(n==null?void 0:n.targetWeight)||e,l=(n==null?void 0:n.goalType)||t,u=(()=>{var E,P;if(r.length===0)return null;const h=[...r].sort((C,A)=>new Date(C.dateISO).getTime()-new Date(A.dateISO).getTime()),m=((E=h[h.length-1])==null?void 0:E.kg)||0,x=((P=h[0])==null?void 0:P.kg)||0,y=m-x,w=new Date;w.setDate(w.getDate()-30);const g=r.filter(C=>new Date(C.dateISO)>=w).sort((C,A)=>new Date(C.dateISO).getTime()-new Date(A.dateISO).getTime()),p=g.length>=2?g[g.length-1].kg-g[0].kg:0,v=new Date;v.setDate(v.getDate()-7);const b=r.filter(C=>new Date(C.dateISO)>=v).sort((C,A)=>new Date(C.dateISO).getTime()-new Date(A.dateISO).getTime()),j=b.length>=2?b[b.length-1].kg-b[0].kg:0,S=o?{remaining:Math.abs(m-o),percentage:l==="lose"?Math.max(0,Math.min(100,(x-m)/(x-o)*100)):l==="gain"?Math.max(0,Math.min(100,(m-x)/(o-x)*100)):Math.max(0,100-Math.abs(m-o)*10),achieved:l==="lose"?m<=o:l==="gain"?m>=o:Math.abs(m-o)<=1}:null,N=new Date;let _=0;for(let C=0;C<30;C++){const A=new Date(N);A.setDate(A.getDate()-C);const Y=A.toISOString().split("T")[0];if(r.some(_e=>_e.dateISO===Y))_++;else break}return{currentWeight:m,startWeight:x,totalChange:y,monthlyChange:p,weeklyChange:j,goalProgress:S,streak:_,totalEntries:r.length,averageWeight:r.reduce((C,A)=>C+A.kg,0)/r.length}})();if(!u)return i.jsx(G,{className:"cyber-card",children:i.jsxs(q,{className:"flex flex-col items-center justify-center py-8",children:[i.jsx(Gn,{className:"cyber-icon mb-4 h-12 w-12 text-gray-600"}),i.jsx("p",{className:"text-gray-400",children:"Add weight entries to see analytics"})]})});const d=h=>Math.abs(h)<.1?i.jsx(zi,{className:"h-4 w-4 text-plasma-cyan"}):h>0?i.jsx(St,{className:"h-4 w-4 text-red-400"}):i.jsx(Gi,{className:"h-4 w-4 text-ki-green"}),f=h=>Math.abs(h)<.1?"text-plasma-cyan":h>0?"text-red-400":"text-ki-green";return i.jsxs("div",{className:"space-y-4 mobile-responsive",children:[i.jsxs(G,{className:"cyber-card mobile-card",children:[i.jsx(me,{className:"pb-3 mobile-layout",children:i.jsxs(ge,{className:"cyber-subtitle flex items-center gap-2 text-ki-green mobile-heading",children:[i.jsx(Gn,{className:"cyber-icon h-5 w-5"}),"Weight Analytics"]})}),i.jsxs(q,{"data-testid":"analytics-container",className:"mobile-stack",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mobile-grid",children:[i.jsxs("div",{className:"text-center mobile-card",children:[i.jsx("div",{className:"gradient-text-ki metric-display text-2xl font-bold mobile-large",children:de(u.currentWeight).toFixed(1)}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Current (lbs)"})]}),i.jsxs("div",{className:"text-center mobile-card",children:[i.jsxs("div",{className:`metric-display text-2xl font-bold mobile-large ${f(u.totalChange)}`,children:[u.totalChange>=0?"+":"",de(u.totalChange).toFixed(1)]}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Total Change"})]}),i.jsxs("div",{className:"text-center mobile-card",children:[i.jsx("div",{className:"gradient-text-magenta metric-display text-2xl font-bold mobile-large",children:u.streak}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Day Streak"})]}),i.jsxs("div",{className:"text-center mobile-card",children:[i.jsx("div",{className:"gradient-text-cyan metric-display text-2xl font-bold mobile-large",children:u.totalEntries}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Total Entries"})]})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4 mobile-grid",children:[i.jsxs("button",{onClick:()=>a(s===7?null:7),className:`cyber-card rounded-lg bg-gray-900/50 p-3 transition-all duration-200 hover:bg-gray-800/50 hover:scale-[1.02] touch-friendly ${s===7?"ring-2 ring-ki-green/50 bg-ki-green/10":""}`,role:"button","data-testid":"trend-card-7","aria-label":"View 7-day weight trend",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[d(u.weeklyChange),i.jsx("span",{className:"font-mono text-sm text-gray-300 mobile-small",children:"7 Days"})]}),i.jsxs("div",{className:`font-mono text-sm font-semibold mobile-small ${f(u.weeklyChange)}`,children:[u.weeklyChange>=0?"+":"",de(u.weeklyChange).toFixed(1),"lbs"]})]}),i.jsx("div",{className:"mt-1 text-xs text-gray-500 text-center mobile-caption",children:"Click to view entries"})]}),i.jsxs("button",{onClick:()=>a(s===30?null:30),className:`cyber-card rounded-lg bg-gray-900/50 p-3 transition-all duration-200 hover:bg-gray-800/50 hover:scale-[1.02] touch-friendly ${s===30?"ring-2 ring-ki-green/50 bg-ki-green/10":""}`,role:"button","data-testid":"trend-card-30","aria-label":"View 30-day weight trend",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[d(u.monthlyChange),i.jsx("span",{className:"font-mono text-sm text-gray-300 mobile-small",children:"30 Days"})]}),i.jsxs("div",{className:`font-mono text-sm font-semibold mobile-small ${f(u.monthlyChange)}`,children:[u.monthlyChange>=0?"+":"",de(u.monthlyChange).toFixed(1),"lbs"]})]}),i.jsx("div",{className:"mt-1 text-xs text-gray-500 text-center",children:"Click to view entries"})]})]})]})]}),e&&u.goalProgress&&i.jsxs(G,{className:"cyber-card",children:[i.jsx(me,{className:"pb-3",children:i.jsxs(ge,{className:"cyber-subtitle flex items-center gap-2 text-hyper-magenta",children:[i.jsx(Ue,{className:"cyber-icon h-5 w-5"}),"Goal Progress"]})}),i.jsx(q,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"font-mono text-sm text-gray-300",children:["Target: ",o?de(o).toFixed(1):0,"lbs (",l,")"]}),i.jsxs("div",{className:"font-mono text-xs text-gray-500",children:[de(u.goalProgress.remaining).toFixed(1),"lbs remaining"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"gradient-text-magenta metric-display text-lg font-bold",children:[u.goalProgress.percentage.toFixed(0),"%"]}),u.goalProgress.achieved&&i.jsx(ee,{variant:"outline",className:"text-ki-green border-ki-green",children:" Achieved!"})]})]}),i.jsx(as,{value:u.goalProgress.percentage,className:"h-2"})]})})]}),s&&i.jsx(SE,{period:s,onClose:()=>a(null)})]})}function _E({onClose:e}){const{activeGoal:t,weights:r,setGoal:n,updateGoal:s,deactivateGoal:a,isGoalLoading:o}=Lt(),[l,c]=k.useState(!t),[u,d]=k.useState({targetWeight:t?de(t.targetWeight):154,goalType:(t==null?void 0:t.goalType)||"lose",targetDate:(t==null?void 0:t.targetDate)||"",startingWeight:t!=null&&t.startingWeight?de(t.startingWeight):r[0]?de(r[0].kg):154}),[f,h]=k.useState({});k.useEffect(()=>{t&&d({targetWeight:de(t.targetWeight),goalType:t.goalType,targetDate:t.targetDate||"",startingWeight:t.startingWeight?de(t.startingWeight):r[0]?de(r[0].kg):154})},[t,r]);const m=()=>{const b={};if(!u.targetWeight||u.targetWeight<=0?b.targetWeight="Target weight must be greater than 0":u.targetWeight>=2200&&(b.targetWeight="Target weight must be less than 2200 lbs"),u.startingWeight&&u.startingWeight>=2200&&(b.startingWeight="Starting weight must be less than 2200 lbs"),u.targetDate){const j=new Date(u.targetDate),S=new Date;S.setHours(0,0,0,0),j<=S&&(b.targetDate="Target date must be in the future")}return h(b),Object.keys(b).length===0},x=async b=>{if(b.preventDefault(),!!m())try{if(t&&!l)return;const j={...u,targetWeight:Oi(u.targetWeight),startingWeight:u.startingWeight?Oi(u.startingWeight):void 0};t?await s(t.id,j):await n(j),c(!1),e==null||e()}catch(j){console.error("Failed to save goal:",j)}},y=async()=>{if(t)try{await a(t.id),c(!0)}catch(b){console.error("Failed to deactivate goal:",b)}},w=b=>{switch(b){case"lose":return i.jsx(Gi,{className:"h-4 w-4 text-ki-green"});case"gain":return i.jsx(St,{className:"h-4 w-4 text-plasma-cyan"});case"maintain":return i.jsx(zi,{className:"h-4 w-4 text-hyper-magenta"});default:return i.jsx(Ue,{className:"h-4 w-4"})}},g=b=>{switch(b){case"lose":return"Lose Weight";case"gain":return"Gain Weight";case"maintain":return"Maintain Weight";default:return b}},v=(()=>{if(!t||!r.length)return null;const b=r[0].kg,j=t.startingWeight||b,S=t.targetWeight,N=Math.abs(S-j),_=Math.abs(b-j);return{progress:N>0?Math.min(100,_/N*100):0,remaining:Math.abs(b-S),achieved:t.goalType==="lose"?b<=S:t.goalType==="gain"?b>=S:Math.abs(b-S)<=1}})();return!l&&t?i.jsxs(G,{className:"cyber-card",children:[i.jsx(me,{className:"pb-3",children:i.jsxs(ge,{className:"cyber-subtitle flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 text-hyper-magenta",children:[i.jsx(Ue,{className:"cyber-icon h-5 w-5"}),"Current Goal"]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx($,{variant:"ghost",size:"sm",onClick:()=>c(!0),className:"h-8 w-8 p-0 text-gray-400 hover:text-white",children:i.jsx(uf,{className:"h-4 w-4"})}),i.jsx($,{variant:"ghost",size:"sm",onClick:y,className:"h-8 w-8 p-0 text-gray-400 hover:text-red-400",children:i.jsx(mn,{className:"h-4 w-4"})})]})]})}),i.jsxs(q,{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[w(t.goalType),i.jsx("span",{className:"font-mono text-sm text-gray-300",children:g(t.goalType)})]}),i.jsxs(ee,{variant:"outline",className:"text-hyper-magenta border-hyper-magenta",children:[de(t.targetWeight).toFixed(1),"lbs target"]})]}),v&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"font-mono text-xs text-gray-400",children:"Progress"}),i.jsxs("span",{className:"font-mono text-xs text-gray-300",children:[de(v.remaining).toFixed(1),"lbs remaining"]})]}),i.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:i.jsx("div",{className:"h-full bg-gradient-to-r from-hyper-magenta to-plasma-cyan transition-all duration-300",style:{width:`${v.progress}%`}})}),v.achieved&&i.jsx(ee,{variant:"outline",className:"text-ki-green border-ki-green",children:" Goal Achieved!"})]}),t.targetDate&&i.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[i.jsx(Je,{className:"h-4 w-4"}),i.jsxs("span",{className:"font-mono text-sm",children:["Target: ",new Date(t.targetDate).toLocaleDateString()]})]})]})]}):i.jsxs(G,{className:"cyber-card",children:[i.jsx(me,{className:"pb-3",children:i.jsxs(ge,{className:"cyber-subtitle flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 text-hyper-magenta",children:[i.jsx(Ue,{className:"cyber-icon h-5 w-5"}),t?"Edit Goal":"Set Weight Goal"]}),e&&i.jsx($,{variant:"ghost",size:"sm",onClick:e,className:"h-8 w-8 p-0 text-gray-400 hover:text-white",children:i.jsx(mn,{className:"h-4 w-4"})})]})}),i.jsx(q,{children:i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"goal-type",className:"cyber-label",children:"Goal Type"}),i.jsxs("select",{value:u.goalType,onChange:b=>d({...u,goalType:b.target.value}),className:"cyber-input w-full",children:[i.jsx("option",{value:"lose",children:" Lose Weight"}),i.jsx("option",{value:"gain",children:" Gain Weight"}),i.jsx("option",{value:"maintain",children:" Maintain Weight"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"target-weight",className:"cyber-label",children:"Target Weight (lbs)"}),i.jsx(fe,{id:"target-weight",type:"number",step:"0.1",min:"1",max:"2199",value:u.targetWeight,onChange:b=>d({...u,targetWeight:parseFloat(b.target.value)||0}),className:"cyber-input",placeholder:"165.0"}),f.targetWeight&&i.jsx("p",{className:"text-red-400 text-xs font-mono",children:f.targetWeight})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"starting-weight",className:"cyber-label",children:"Starting Weight (lbs)"}),i.jsx(fe,{id:"starting-weight",type:"number",step:"0.1",min:"1",max:"2199",value:u.startingWeight||"",onChange:b=>d({...u,startingWeight:parseFloat(b.target.value)||void 0}),className:"cyber-input",placeholder:"Current weight"}),f.startingWeight&&i.jsx("p",{className:"text-red-400 text-xs font-mono",children:f.startingWeight})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"target-date",className:"cyber-label",children:"Target Date (optional)"}),i.jsx(fe,{id:"target-date",type:"date",value:u.targetDate,onChange:b=>d({...u,targetDate:b.target.value}),className:"cyber-input",min:new Date().toISOString().split("T")[0]}),f.targetDate&&i.jsx("p",{className:"text-red-400 text-xs font-mono",children:f.targetDate})]})]}),i.jsxs("div",{className:"flex gap-3 pt-2",children:[i.jsx($,{type:"submit",variant:"cyber-ki",disabled:o,className:"flex-1",children:o?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-2 border-gray-300 border-t-transparent"}),"Saving..."]}):i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{className:"h-4 w-4"}),t?"Update Goal":"Set Goal"]})}),t&&i.jsx($,{type:"button",variant:"outline",onClick:()=>c(!1),className:"px-4",children:"Cancel"})]})]})})]})}function EE(){const[e,t]=k.useState(()=>{const v=new Date().getHours();return v<10?"breakfast":v<15?"lunch":v<20?"dinner":"snack"}),[r,n]=k.useState(""),[s,a]=k.useState(""),[o,l]=k.useState(!1),[c,u]=k.useState({}),{isLoading:d,addMeal:f}=Af(),{isMobile:h}=It(),m=Ir({scale:.95,haptic:!0}),x=()=>{const v={};r.trim()||(v.foodName="Food name is required");const b=parseFloat(s);return s?isNaN(b)||b<=0?v.calories="Calories must be a positive number":b>=5e3&&(v.calories="Calories must be less than 5000"):v.calories="Calories are required",u(v),Object.keys(v).length===0},y=async v=>{if(v.preventDefault(),!!x())try{const b={type:e,foods:[{name:r.trim(),quantity:1,unit:"serving",calories:parseFloat(s),macros:{protein:0,carbs:0,fat:0,fiber:0}}],notes:""};await f(b),n(""),a(""),u({}),l(!1)}catch(b){console.error("Failed to add meal:",b)}},w=v=>{v.key==="Enter"&&r.trim()&&s.trim()&&y(v)},g=v=>{switch(v){case"breakfast":return"";case"lunch":return"";case"dinner":return"";case"snack":return""}},p=v=>{switch(v){case"breakfast":return"text-yellow-400";case"lunch":return"text-orange-400";case"dinner":return"text-purple-400";case"snack":return"text-green-400"}};return i.jsxs(G,{className:`cyber-card mobile-card mobile-responsive ${h?"galaxy-s24-ultra-optimized":""}`,children:[i.jsx(me,{className:"mobile-layout",children:i.jsxs(ge,{className:"cyber-subtitle flex items-center gap-2 text-plasma-cyan mobile-heading",children:[i.jsx(Ws,{className:"cyber-icon h-5 w-5"}),"Log Meal Entry"]})}),i.jsxs(q,{className:"space-y-4 mobile-form-spacing",children:[i.jsxs("div",{className:"flex gap-2 mobile-button-group",children:[i.jsx(fe,{id:"meal-quick",type:"text",placeholder:"Enter food (e.g., chicken salad)",value:r,onChange:v=>n(v.target.value),onKeyPress:w,className:`
              flex-1 font-mono touch-target mobile-body
              focus:border-plasma-cyan focus:ring-plasma-cyan/20 border-gray-600 bg-gray-900 text-white
              ${c.foodName?"border-red-500":""}
            `,disabled:d,"aria-label":"Food name"}),i.jsx(fe,{type:"number",placeholder:"Cal",value:s,onChange:v=>a(v.target.value),onKeyPress:w,className:`
              w-20 font-mono touch-target mobile-body
              focus:border-plasma-cyan focus:ring-plasma-cyan/20 border-gray-600 bg-gray-900 text-white
              ${c.calories?"border-red-500":""}
            `,disabled:d,"aria-label":"Calories"}),i.jsx($,{onClick:()=>l(!o),variant:"outline",size:"icon",className:`border-gray-600 bg-transparent text-gray-300 hover:bg-gray-800 touch-target ${o?"bg-gray-800":""}`,title:"Meal options","aria-label":"Toggle meal options",children:i.jsx(Sr,{className:"h-4 w-4"})}),i.jsxs($,{ref:m.elementRef,onClick:y,variant:"cyber-ki",disabled:d||!r.trim()||!s.trim(),className:"touch-target mobile-button","aria-label":"Log meal entry",children:[i.jsx(Ot,{className:"mr-2 h-4 w-4"}),d?"LOGGING...":"LOG"]})]}),(c.foodName||c.calories)&&i.jsxs("div",{className:"space-y-1",children:[c.foodName&&i.jsx("p",{className:"font-mono text-sm text-red-400",children:c.foodName}),c.calories&&i.jsx("p",{className:"font-mono text-sm text-red-400",children:c.calories})]}),o&&i.jsx("div",{className:"space-y-3 border-t border-gray-700 pt-4",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{className:"cyber-label text-gray-300",children:"Meal Type"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:["breakfast","lunch","dinner","snack"].map(v=>i.jsxs($,{type:"button",variant:"outline",size:"sm",onClick:()=>t(v),className:`
                      border-gray-600 bg-transparent text-gray-300 hover:bg-gray-800 
                      ${e===v?`bg-gray-800 ${p(v)}`:""}
                    `,children:[i.jsx("span",{className:"mr-2",children:g(v)}),v.charAt(0).toUpperCase()+v.slice(1)]},v))})]})}),r.trim()&&s.trim()&&i.jsxs("div",{className:"cyber-card rounded-lg bg-gray-900/50 p-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium text-gray-300",children:"Meal Preview:"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(ee,{variant:"outline",className:`text-xs ${p(e)}`,children:[i.jsx("span",{className:"mr-1",children:g(e)}),e]}),i.jsxs(ee,{variant:"outline",className:"font-mono text-xs",children:[parseFloat(s).toFixed(0)," cal"]}),i.jsxs(ee,{variant:"outline",className:"text-xs",children:[i.jsx(Je,{className:"mr-1 h-3 w-3"}),new Date().toLocaleDateString()]})]})]}),i.jsx("div",{className:"mt-2 text-sm text-gray-400",children:r})]}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ws,{className:"h-3 w-3"}),i.jsx("span",{children:"Press Enter to log quickly"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Sr,{className:"h-3 w-3"}),i.jsx("span",{children:"Smart meal type by time"})]})]})]})]})}function TE(){const{meals:e,analytics:t,isAnalyticsLoading:r}=Af(),{isMobile:n}=It();if(r)return i.jsx(G,{className:`cyber-card mobile-card mobile-responsive ${n?"galaxy-s24-ultra-optimized":""}`,children:i.jsx(q,{className:"p-6",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx("div",{className:"shimmer h-8 w-32 rounded bg-gray-700"})})})});if(!t||e.length===0)return null;const s=u=>{switch(u){case"breakfast":return"";case"lunch":return"";case"dinner":return"";case"snack":return""}},a=u=>{switch(u){case"breakfast":return"text-yellow-400";case"lunch":return"text-orange-400";case"dinner":return"text-purple-400";case"snack":return"text-green-400"}},o=2e3,l=e.filter(u=>{const d=new Date(u.timestamp).toDateString(),f=new Date().toDateString();return d===f}).reduce((u,d)=>u+d.nutrition.calories,0),c=Math.min(100,l/o*100);return i.jsxs("div",{className:`space-y-6 ${n?"mobile-layout":""}`,children:[i.jsxs(G,{className:`cyber-card mobile-card mobile-responsive ${n?"galaxy-s24-ultra-optimized":""}`,children:[i.jsx(me,{className:"mobile-layout",children:i.jsxs(ge,{className:"cyber-subtitle flex items-center gap-2 text-plasma-cyan mobile-heading",children:[i.jsx(Gn,{className:"cyber-icon h-5 w-5"}),"Nutrition Analytics"]})}),i.jsxs(q,{className:"space-y-6 mobile-form-spacing",children:[i.jsxs("div",{className:`grid ${n?"grid-cols-2":"grid-cols-4"} gap-4 text-center mobile-grid`,children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"gradient-text-cyan metric-display text-2xl font-bold",children:t.totalMeals}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Total Meals"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"gradient-text-ki metric-display text-2xl font-bold",children:Math.round(t.averageCalories)}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Avg Calories"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"gradient-text-magenta metric-display text-2xl font-bold",children:t.streak}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Day Streak"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"gradient-text-plasma metric-display text-2xl font-bold",children:Math.round(l)}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Today"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(U0,{className:"h-4 w-4 text-orange-400"}),i.jsx("span",{className:"font-mono text-sm text-gray-300",children:"Daily Calories"})]}),i.jsxs("span",{className:"font-mono text-sm text-gray-400",children:[Math.round(l)," / ",o," cal"]})]}),i.jsx(as,{value:c,className:"h-2 bg-gray-800"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{children:"0"}),i.jsx("span",{className:c>=100?"text-ki-green":"text-gray-400",children:c>=100?"Goal Reached!":`${Math.round(o-l)} cal remaining`}),i.jsx("span",{children:o})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{className:"h-4 w-4 text-hyper-magenta"}),i.jsx("span",{className:"font-mono text-sm text-gray-300",children:"Macro Balance"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-orange-400 font-mono text-lg font-semibold",children:[Math.round(t.macroBalance.protein),"%"]}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Protein"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-blue-400 font-mono text-lg font-semibold",children:[Math.round(t.macroBalance.carbs),"%"]}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Carbs"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-yellow-400 font-mono text-lg font-semibold",children:[Math.round(t.macroBalance.fat),"%"]}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Fat"})]})]})]})]})]}),i.jsxs(G,{className:"cyber-card",children:[i.jsx(me,{children:i.jsxs(ge,{className:"cyber-subtitle flex items-center gap-2 text-plasma-cyan",children:[i.jsx(Ws,{className:"cyber-icon h-5 w-5"}),"Meal Patterns"]})}),i.jsxs(q,{className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-2 gap-4",children:Object.entries(t.mealFrequency).map(([u,d])=>i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-900/50",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-lg",children:s(u)}),i.jsxs("div",{children:[i.jsx("div",{className:`font-mono text-sm font-semibold ${a(u)}`,children:u.charAt(0).toUpperCase()+u.slice(1)}),i.jsxs("div",{className:"font-mono text-xs text-gray-400",children:[d," logged"]})]})]}),i.jsx(ee,{variant:"outline",className:"font-mono",children:d})]},u))}),i.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(St,{className:"h-4 w-4 text-ki-green"}),i.jsx("span",{className:"font-mono text-sm text-gray-300",children:"Weekly Summary"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center p-3 rounded-lg bg-gray-900/50",children:[i.jsx("div",{className:"font-mono text-lg font-semibold text-ki-green",children:Math.round(t.weeklyCalories)}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Weekly Calories"})]}),i.jsxs("div",{className:"text-center p-3 rounded-lg bg-gray-900/50",children:[i.jsx("div",{className:"font-mono text-lg font-semibold text-plasma-cyan",children:Math.round(t.weeklyCalories/7)}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Daily Average"})]})]})]})]})]})]})}const Xi=k.forwardRef(({className:e,...t},r)=>i.jsx("textarea",{className:le("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));Xi.displayName="Textarea";const CE=[{name:"Running",type:"cardio",category:"Running",muscleGroups:["legs","core"],equipment:[]},{name:"Walking",type:"cardio",category:"Walking",muscleGroups:["legs"],equipment:[]},{name:"Cycling",type:"cardio",category:"Cycling",muscleGroups:["legs","core"],equipment:["bike"]},{name:"Swimming",type:"cardio",category:"Swimming",muscleGroups:["full-body"],equipment:["pool"]},{name:"Jump Rope",type:"cardio",category:"HIIT",muscleGroups:["legs","arms","core"],equipment:["jump-rope"]},{name:"Push-ups",type:"strength",category:"Bodyweight",muscleGroups:["chest","arms","core"],equipment:[]},{name:"Pull-ups",type:"strength",category:"Bodyweight",muscleGroups:["back","arms"],equipment:["pull-up-bar"]},{name:"Squats",type:"strength",category:"Bodyweight",muscleGroups:["legs","glutes"],equipment:[]},{name:"Deadlifts",type:"strength",category:"Weightlifting",muscleGroups:["back","legs","core"],equipment:["barbell"]},{name:"Bench Press",type:"strength",category:"Weightlifting",muscleGroups:["chest","arms"],equipment:["barbell","bench"]},{name:"Yoga",type:"flexibility",category:"Yoga",muscleGroups:["full-body"],equipment:["yoga-mat"]},{name:"Stretching",type:"flexibility",category:"Stretching",muscleGroups:["full-body"],equipment:[]},{name:"Pilates",type:"flexibility",category:"Pilates",muscleGroups:["core","full-body"],equipment:["yoga-mat"]},{name:"Basketball",type:"sports",category:"Team Sports",muscleGroups:["legs","core"],equipment:["basketball"]},{name:"Tennis",type:"sports",category:"Racquet Sports",muscleGroups:["arms","legs","core"],equipment:["tennis-racquet"]},{name:"Soccer",type:"sports",category:"Team Sports",muscleGroups:["legs","core"],equipment:["soccer-ball"]},{name:"Boxing Training",type:"cardio",category:"Martial Arts",muscleGroups:["arms","core","legs"],equipment:["boxing-gloves"]},{name:"Kickboxing",type:"cardio",category:"Martial Arts",muscleGroups:["full-body"],equipment:["boxing-gloves"]},{name:"Karate Practice",type:"sports",category:"Martial Arts",muscleGroups:["full-body"],equipment:[]},{name:"Taekwondo",type:"sports",category:"Martial Arts",muscleGroups:["legs","core"],equipment:[]},{name:"Shadow Boxing",type:"cardio",category:"Martial Arts",muscleGroups:["arms","core"],equipment:[]}],qg=e=>{switch(e){case"cardio":return"text-red-400";case"strength":return"text-blue-400";case"flexibility":return"text-green-400";case"sports":return"text-purple-400";case"other":return"text-gray-400"}},DE=(e,t,r,n=70)=>{const s={cardio:8,strength:6,flexibility:3,sports:7,other:5},a={light:.7,moderate:1,intense:1.4},o=s[e]*a[r];return Math.round(o*n*t/60)},If=kn((e,t)=>({workouts:[],exercises:[],templates:[],analytics:null,goals:[],isLoading:!1,error:null,loadWorkouts:async()=>{e({isLoading:!0,error:null});try{const{data:r,error:n}=await T.from("workout_entries").select("*").order("created_at",{ascending:!1});if(n)throw n;e({workouts:r||[],isLoading:!1})}catch(r){e({error:r.message,isLoading:!1})}},loadExercises:async()=>{e({isLoading:!0,error:null});try{const{data:r,error:n}=await T.from("exercises").select("*").order("name");if(n)throw n;const s=(r||[]).map(a=>({id:a.id,name:a.name,type:a.type,category:a.category,description:a.description,instructions:a.instructions,muscleGroups:a.muscle_groups,equipment:a.equipment,isCustom:a.is_custom,createdAt:a.created_at,updatedAt:a.updated_at}));e({exercises:s,isLoading:!1})}catch(r){e({error:r.message,isLoading:!1})}},loadTemplates:async()=>{e({isLoading:!0,error:null});try{const{data:r,error:n}=await T.from("workout_templates").select("*").order("name");if(n)throw n;e({templates:r||[],isLoading:!1})}catch(r){e({error:r.message,isLoading:!1})}},loadAnalytics:async()=>{var n;const{workouts:r}=t();if(r.length!==0)try{const s=r.length,a=r.reduce((N,_)=>N+_.duration,0),o=r.reduce((N,_)=>N+(_.calories||0),0),l=[...r].sort((N,_)=>new Date(_.createdAt).getTime()-new Date(N.createdAt).getTime());let c=0,u=0,d=0;const f=new Date,h=new Set(l.map(N=>new Date(N.createdAt).toDateString()));for(let N=0;N<30;N++){const _=new Date(f);if(_.setDate(f.getDate()-N),h.has(_.toDateString()))(N===0||c>0)&&c++;else if(N>0)break}l.forEach((N,_)=>{const E=new Date(N.createdAt),P=_>0?new Date(l[_-1].createdAt):null;!P||Math.abs(E.getTime()-P.getTime())<=24*60*60*1e3?(d++,u=Math.max(u,d)):d=1});const m={light:1,moderate:2,intense:3},x=r.reduce((N,_)=>N+m[_.intensity],0)/r.length,y=r.reduce((N,_)=>{const E=_.exerciseType;return N[E]||(N[E]={count:0,duration:0,calories:0}),N[E].count++,N[E].duration+=_.duration,N[E].calories+=_.calories||0,N},{}),w=((n=Object.entries(y).sort(([,N],[,_])=>_.count-N.count)[0])==null?void 0:n[0])||"cardio",g=new Date;g.setDate(g.getDate()-g.getDay()),g.setHours(0,0,0,0);const p=r.filter(N=>new Date(N.createdAt)>=g).reduce((N,_)=>N+_.duration,0),v=new Date;v.setDate(1),v.setHours(0,0,0,0);const b=r.filter(N=>new Date(N.createdAt)>=v),j={workouts:b.length,duration:b.reduce((N,_)=>N+_.duration,0),calories:b.reduce((N,_)=>N+(_.calories||0),0)};e({analytics:{totalWorkouts:s,totalDuration:a,totalCalories:o,currentStreak:c,longestStreak:u,averageIntensity:x,favoriteExerciseType:w,weeklyGoal:150,weeklyProgress:p,monthlyStats:j,exerciseTypeBreakdown:y}})}catch(s){e({error:s.message})}},loadGoals:async()=>{e({isLoading:!0,error:null});try{const{data:r,error:n}=await T.from("workout_goals").select("*").order("created_at",{ascending:!1});if(n)throw n;e({goals:r||[],isLoading:!1})}catch(r){e({error:r.message,isLoading:!1})}},addWorkout:async r=>{e({isLoading:!0,error:null});try{const n=r.calories||DE(r.exerciseType,r.duration,r.intensity),{data:s,error:a}=await T.from("workout_entries").insert([{...r,calories:n,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(a)throw a;const{workouts:o}=t();e({workouts:[s,...o],isLoading:!1}),t().loadAnalytics()}catch(n){e({error:n.message,isLoading:!1})}},updateWorkout:async(r,n)=>{e({isLoading:!0,error:null});try{const{data:s,error:a}=await T.from("workout_entries").update({...n,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(a)throw a;const{workouts:o}=t();e({workouts:o.map(l=>l.id===r?s:l),isLoading:!1}),t().loadAnalytics()}catch(s){e({error:s.message,isLoading:!1})}},deleteWorkout:async r=>{e({isLoading:!0,error:null});try{const{error:n}=await T.from("workout_entries").delete().eq("id",r);if(n)throw n;const{workouts:s}=t();e({workouts:s.filter(a=>a.id!==r),isLoading:!1}),t().loadAnalytics()}catch(n){e({error:n.message,isLoading:!1})}},addExercise:async r=>{e({isLoading:!0,error:null});try{const n={name:r.name,type:r.type,category:r.category,description:r.description,instructions:r.instructions,muscle_groups:r.muscleGroups,equipment:r.equipment,is_custom:r.isCustom,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:s,error:a}=await T.from("exercises").insert([n]).select().single();if(a)throw a;const o={id:s.id,name:s.name,type:s.type,category:s.category,description:s.description,instructions:s.instructions,muscleGroups:s.muscle_groups,equipment:s.equipment,isCustom:s.is_custom,createdAt:s.created_at,updatedAt:s.updated_at},{exercises:l}=t();e({exercises:[...l,o],isLoading:!1})}catch(n){e({error:n.message,isLoading:!1})}},updateExercise:async(r,n)=>{e({isLoading:!0,error:null});try{const s={updated_at:new Date().toISOString()};n.name!==void 0&&(s.name=n.name),n.type!==void 0&&(s.type=n.type),n.category!==void 0&&(s.category=n.category),n.description!==void 0&&(s.description=n.description),n.instructions!==void 0&&(s.instructions=n.instructions),n.muscleGroups!==void 0&&(s.muscle_groups=n.muscleGroups),n.equipment!==void 0&&(s.equipment=n.equipment),n.isCustom!==void 0&&(s.is_custom=n.isCustom);const{data:a,error:o}=await T.from("exercises").update(s).eq("id",r).select().single();if(o)throw o;const l={id:a.id,name:a.name,type:a.type,category:a.category,description:a.description,instructions:a.instructions,muscleGroups:a.muscle_groups,equipment:a.equipment,isCustom:a.is_custom,createdAt:a.created_at,updatedAt:a.updated_at},{exercises:c}=t();e({exercises:c.map(u=>u.id===r?l:u),isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},deleteExercise:async r=>{e({isLoading:!0,error:null});try{const{error:n}=await T.from("exercises").delete().eq("id",r);if(n)throw n;const{exercises:s}=t();e({exercises:s.filter(a=>a.id!==r),isLoading:!1})}catch(n){e({error:n.message,isLoading:!1})}},addTemplate:async r=>{e({isLoading:!0,error:null});try{const{data:n,error:s}=await T.from("workout_templates").insert([{...r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(s)throw s;const{templates:a}=t();e({templates:[...a,n],isLoading:!1})}catch(n){e({error:n.message,isLoading:!1})}},updateTemplate:async(r,n)=>{e({isLoading:!0,error:null});try{const{data:s,error:a}=await T.from("workout_templates").update({...n,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(a)throw a;const{templates:o}=t();e({templates:o.map(l=>l.id===r?s:l),isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},deleteTemplate:async r=>{e({isLoading:!0,error:null});try{const{error:n}=await T.from("workout_templates").delete().eq("id",r);if(n)throw n;const{templates:s}=t();e({templates:s.filter(a=>a.id!==r),isLoading:!1})}catch(n){e({error:n.message,isLoading:!1})}},addGoal:async r=>{e({isLoading:!0,error:null});try{const{data:n,error:s}=await T.from("workout_goals").insert([{...r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(s)throw s;const{goals:a}=t();e({goals:[n,...a],isLoading:!1})}catch(n){e({error:n.message,isLoading:!1})}},updateGoal:async(r,n)=>{e({isLoading:!0,error:null});try{const{data:s,error:a}=await T.from("workout_goals").update({...n,updated_at:new Date().toISOString()}).eq("id",r).select().single();if(a)throw a;const{goals:o}=t();e({goals:o.map(l=>l.id===r?s:l),isLoading:!1})}catch(s){e({error:s.message,isLoading:!1})}},deleteGoal:async r=>{e({isLoading:!0,error:null});try{const{error:n}=await T.from("workout_goals").delete().eq("id",r);if(n)throw n;const{goals:s}=t();e({goals:s.filter(a=>a.id!==r),isLoading:!1})}catch(n){e({error:n.message,isLoading:!1})}},initializeExerciseLibrary:async()=>{e({isLoading:!0,error:null});try{const{exercises:r}=t(),n=new Set(r.map(a=>a.name)),s=CE.filter(a=>!n.has(a.name));if(s.length>0){const a=s.map(u=>({name:u.name,type:u.type,category:u.category,description:u.description,instructions:u.instructions,muscle_groups:u.muscleGroups,equipment:u.equipment,is_custom:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()})),{data:o,error:l}=await T.from("exercises").insert(a).select();if(l)throw l;const c=o.map(u=>({id:u.id,name:u.name,type:u.type,category:u.category,description:u.description,instructions:u.instructions,muscleGroups:u.muscle_groups,equipment:u.equipment,isCustom:u.is_custom,createdAt:u.created_at,updatedAt:u.updated_at}));e({exercises:[...r,...c],isLoading:!1})}else e({isLoading:!1})}catch(r){e({error:r.message,isLoading:!1})}}}));function PE(){const{exercises:e,addWorkout:t,isLoading:r}=If(),[n,s]=k.useState(""),[a,o]=k.useState(""),[l,c]=k.useState("cardio"),[u,d]=k.useState(""),[f,h]=k.useState("moderate"),[m,x]=k.useState(""),[y,w]=k.useState(""),[g,p]=k.useState(""),[v,b]=k.useState(""),[j,S]=k.useState(""),{isMobile:N}=It(),_=async C=>{if(C.preventDefault(),!u||!n&&!a)return;const A=e.find(we=>we.id===n),Y=(A==null?void 0:A.name)||a,H=(A==null?void 0:A.type)||l,_e={exerciseId:n||"custom",exerciseName:Y,exerciseType:H,duration:parseInt(u),intensity:f,notes:m||void 0,sets:y?parseInt(y):void 0,reps:g?parseInt(g):void 0,weight:v?parseFloat(v):void 0,distance:j?parseFloat(j):void 0};await t(_e),s(""),o(""),c("cardio"),d(""),h("moderate"),x(""),w(""),p(""),b(""),S("")},E=e.find(C=>C.id===n),P=(E==null?void 0:E.type)||l;return i.jsxs(G,{className:`cyber-card mobile-card mobile-responsive ${N?"galaxy-s24-ultra-optimized":""}`,children:[i.jsx(me,{className:"mobile-layout",children:i.jsxs(ge,{className:"flex items-center gap-2 gradient-text-ki mobile-heading",children:[i.jsx(F0,{className:"h-5 w-5"}),"Log Workout"]})}),i.jsx(q,{children:i.jsxs("form",{onSubmit:_,className:"space-y-4 mobile-form-spacing",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Exercise"}),i.jsxs("select",{value:n,onChange:C=>s(C.target.value),className:"cyber-input w-full",children:[i.jsx("option",{value:"",children:"Select an exercise"}),i.jsx("option",{value:"custom",children:"Custom Exercise"}),e.map(C=>i.jsxs("option",{value:C.id,children:[C.name," (",C.category,")"]},C.id))]})]}),n==="custom"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Custom Exercise Name"}),i.jsx(fe,{value:a,onChange:C=>o(C.target.value),placeholder:"Enter exercise name",className:"cyber-input",required:!0})]}),n==="custom"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Exercise Type"}),i.jsxs("select",{value:l,onChange:C=>c(C.target.value),className:"cyber-input w-full",children:[i.jsx("option",{value:"cardio",children:"Cardio"}),i.jsx("option",{value:"strength",children:"Strength"}),i.jsx("option",{value:"flexibility",children:"Flexibility"}),i.jsx("option",{value:"sports",children:"Sports"}),i.jsx("option",{value:"other",children:"Other"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs(xe,{className:"flex items-center gap-1",children:[i.jsx(Sr,{className:"h-4 w-4"}),"Duration (minutes)"]}),i.jsx(fe,{type:"number",value:u,onChange:C=>d(C.target.value),placeholder:"30",className:"cyber-input",required:!0,min:"1"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs(xe,{className:"flex items-center gap-1",children:[i.jsx(qi,{className:"h-4 w-4"}),"Intensity"]}),i.jsxs("select",{value:f,onChange:C=>h(C.target.value),className:"cyber-input w-full",children:[i.jsx("option",{value:"light",children:"Light"}),i.jsx("option",{value:"moderate",children:"Moderate"}),i.jsx("option",{value:"intense",children:"Intense"})]})]})]}),P==="strength"&&i.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Sets"}),i.jsx(fe,{type:"number",value:y,onChange:C=>w(C.target.value),placeholder:"3",className:"cyber-input",min:"1"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Reps"}),i.jsx(fe,{type:"number",value:g,onChange:C=>p(C.target.value),placeholder:"12",className:"cyber-input",min:"1"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Weight (kg)"}),i.jsx(fe,{type:"number",step:"0.5",value:v,onChange:C=>b(C.target.value),placeholder:"50",className:"cyber-input",min:"0"})]})]}),P==="cardio"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Distance (km)"}),i.jsx(fe,{type:"number",step:"0.1",value:j,onChange:C=>S(C.target.value),placeholder:"5.0",className:"cyber-input",min:"0"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Notes (optional)"}),i.jsx(Xi,{value:m,onChange:C=>x(C.target.value),placeholder:"How did it feel? Any observations...",className:"cyber-input min-h-[80px]"})]}),i.jsxs($,{type:"submit",disabled:r||!u||!n&&!a,className:"w-full cyber-button-ki",children:[i.jsx(Ot,{className:"mr-2 h-4 w-4"}),r?"Logging...":"Log Workout"]})]})})]})}function AE(){const{analytics:e}=If(),{isMobile:t}=It();if(!e)return i.jsx(G,{className:`cyber-card mobile-card mobile-responsive ${t?"galaxy-s24-ultra-optimized":""}`,children:i.jsxs(q,{className:"p-6 text-center text-gray-400 mobile-layout",children:[i.jsx(tg,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),i.jsx("p",{className:"mobile-body",children:"No workout data yet"}),i.jsx("p",{className:"text-sm mobile-caption",children:"Start logging workouts to see analytics"})]})});const r=e.weeklyProgress/e.weeklyGoal*100;return i.jsxs("div",{className:`space-y-6 ${t?"mobile-layout":""}`,children:[i.jsxs(G,{className:`cyber-card mobile-card mobile-responsive ${t?"galaxy-s24-ultra-optimized":""}`,children:[i.jsx(me,{className:"mobile-layout",children:i.jsxs(ge,{className:"flex items-center gap-2 gradient-text-ki mobile-heading",children:[i.jsx(tg,{className:"h-5 w-5"}),"Workout Overview"]})}),i.jsx(q,{className:"mobile-form-spacing",children:i.jsxs("div",{className:`grid ${t?"grid-cols-2":"grid-cols-2 md:grid-cols-4"} gap-4 mobile-grid`,children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"gradient-text-ki metric-display text-2xl font-bold",children:e.totalWorkouts}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Total Workouts"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"gradient-text-cyan metric-display text-2xl font-bold",children:[Math.round(e.totalDuration/60),"h"]}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Total Hours"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"gradient-text-magenta metric-display text-2xl font-bold",children:e.totalCalories}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Calories Burned"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"gradient-text-yellow metric-display text-2xl font-bold",children:e.currentStreak}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Day Streak"})]})]})})]}),i.jsxs(G,{className:"cyber-card",children:[i.jsx(me,{children:i.jsxs(ge,{className:"flex items-center gap-2 gradient-text-cyan",children:[i.jsx(Ue,{className:"h-5 w-5"}),"Weekly Goal Progress"]})}),i.jsx(q,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("span",{className:"font-mono text-sm",children:[e.weeklyProgress," / ",e.weeklyGoal," minutes"]}),i.jsxs(ee,{variant:r>=100?"default":"outline",children:[Math.round(r),"%"]})]}),i.jsx(as,{value:Math.min(r,100),className:"h-3"}),i.jsx("div",{className:"text-xs text-gray-400 font-mono",children:r>=100?" Weekly goal achieved!":`${e.weeklyGoal-e.weeklyProgress} minutes to go`})]})})]}),i.jsxs(G,{className:"cyber-card",children:[i.jsx(me,{children:i.jsxs(ge,{className:"flex items-center gap-2 gradient-text-magenta",children:[i.jsx(St,{className:"h-5 w-5"}),"Exercise Breakdown"]})}),i.jsx(q,{children:i.jsx("div",{className:"space-y-3",children:Object.entries(e.exerciseTypeBreakdown).map(([n,s])=>i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:`${qg(n)} text-lg`,children:""}),i.jsx("span",{className:"capitalize font-mono text-sm",children:n})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[i.jsxs("span",{className:"text-gray-400",children:[s.count," workouts"]}),i.jsxs("span",{className:"text-gray-400",children:[Math.round(s.duration/60),"h"]}),i.jsxs("span",{className:"text-gray-400",children:[s.calories," cal"]})]})]},n))})})]}),i.jsxs(G,{className:"cyber-card",children:[i.jsx(me,{children:i.jsxs(ge,{className:"flex items-center gap-2 gradient-text-yellow",children:[i.jsx(Je,{className:"h-5 w-5"}),"This Month"]})}),i.jsx(q,{children:i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"gradient-text-ki metric-display text-xl font-bold",children:e.monthlyStats.workouts}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Workouts"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"gradient-text-cyan metric-display text-xl font-bold",children:[Math.round(e.monthlyStats.duration/60),"h"]}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Hours"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"gradient-text-magenta metric-display text-xl font-bold",children:e.monthlyStats.calories}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Calories"})]})]})})]}),i.jsxs(G,{className:"cyber-card",children:[i.jsx(me,{children:i.jsxs(ge,{className:"flex items-center gap-2 gradient-text-plasma",children:[i.jsx(qi,{className:"h-5 w-5"}),"Performance Stats"]})}),i.jsxs(q,{children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"gradient-text-ki metric-display text-lg font-bold",children:e.longestStreak}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Longest Streak"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"gradient-text-cyan metric-display text-lg font-bold",children:e.averageIntensity.toFixed(1)}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Avg Intensity"})]})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[i.jsx("span",{className:"text-sm text-gray-400",children:"Favorite Exercise Type:"}),i.jsx(ee,{className:`${qg(e.favoriteExerciseType)} border-current`,children:e.favoriteExerciseType})]})})]})]})]})}function OE(){const[e,t]=k.useState({date:new Date().toDateString(),punches:0,kicks:0,total:0}),[r,n]=k.useState(0),[s,a]=k.useState(0),{isMobile:o}=It(),l=Ir({scale:.95,haptic:!0});k.useEffect(()=>{c(),u()},[]);const c=()=>{const m=new Date().toDateString(),x=localStorage.getItem(`daily-counter-${m}`);if(x){const y=JSON.parse(x);t(y)}else{const y={date:m,punches:0,kicks:0,total:0};t(y),localStorage.setItem(`daily-counter-${m}`,JSON.stringify(y))}},u=()=>{const m=new Date;let x=0,y=0;for(let w=0;w<7;w++){const g=new Date(m);g.setDate(m.getDate()-w);const p=g.toDateString(),v=localStorage.getItem(`daily-counter-${p}`);if(v){const b=JSON.parse(v);x+=b.total,b.total>0&&w===y&&y++}}n(x),a(y)},d=(m,x)=>{const y={...e,[m]:e[m]+x,total:e.total+x};t(y),localStorage.setItem(`daily-counter-${y.date}`,JSON.stringify(y)),u()},f=()=>{const m={date:e.date,punches:0,kicks:0,total:0};t(m),localStorage.setItem(`daily-counter-${m.date}`,JSON.stringify(m)),u()},h=[5,10,25];return i.jsxs(G,{className:`cyber-card mobile-card mobile-responsive ${o?"galaxy-s24-ultra-optimized":""}`,children:[i.jsx(me,{className:"mobile-layout",children:i.jsxs(ge,{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2 gradient-text-ki mobile-heading",children:[i.jsx(qi,{className:"h-5 w-5"}),"Daily Strike Counter"]}),i.jsxs($,{variant:"outline",size:"sm",onClick:f,className:"text-xs touch-target mobile-button","aria-label":"Reset daily counter",children:[i.jsx(nj,{className:"h-3 w-3 mr-1"}),"Reset"]})]})}),i.jsxs(q,{className:"space-y-6 mobile-form-spacing",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center mobile-grid",children:[i.jsxs("div",{children:[i.jsx("div",{className:"gradient-text-ki metric-display text-2xl font-bold mobile-large",children:e.punches}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Punches"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"gradient-text-cyan metric-display text-2xl font-bold mobile-large",children:e.kicks}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Kicks"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"gradient-text-magenta metric-display text-2xl font-bold mobile-large",children:e.total}),i.jsx("div",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Total"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-mono text-sm gradient-text-ki",children:" Punches"}),i.jsx(ee,{variant:"outline",className:"text-ki-green border-ki-green",children:e.punches})]}),i.jsx("div",{className:"flex gap-2 mobile-button-group",children:h.map(m=>i.jsxs($,{ref:l.elementRef,variant:"outline",size:"sm",onClick:()=>d("punches",m),className:"flex-1 cyber-button-ki touch-target mobile-button","aria-label":`Add ${m} punches`,children:["+",m]},`punch-${m}`))})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-mono text-sm gradient-text-cyan",children:" Kicks"}),i.jsx(ee,{variant:"outline",className:"text-plasma-cyan border-plasma-cyan",children:e.kicks})]}),i.jsx("div",{className:"flex gap-2 mobile-button-group",children:h.map(m=>i.jsxs($,{variant:"outline",size:"sm",onClick:()=>d("kicks",m),className:"flex-1 cyber-button-cyan touch-target mobile-button","aria-label":`Add ${m} kicks`,children:["+",m]},`kick-${m}`))})]}),i.jsx("div",{className:"border-t border-gray-700 pt-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[i.jsx(Je,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-mono text-xs text-gray-400",children:"7-Day Total"})]}),i.jsx("div",{className:"gradient-text-yellow metric-display text-lg font-bold",children:r})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[i.jsx(St,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-mono text-xs text-gray-400",children:"Streak"})]}),i.jsxs("div",{className:"gradient-text-plasma metric-display text-lg font-bold",children:[s," days"]})]})]})}),i.jsxs("div",{className:"bg-gray-800/30 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Ue,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-mono text-xs text-gray-400",children:"Daily Goals"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[i.jsxs("div",{className:`text-center p-2 rounded ${e.total>=100?"bg-ki-green/20 text-ki-green":"bg-gray-700/50 text-gray-400"}`,children:[i.jsx("div",{className:"font-bold",children:"100"}),i.jsx("div",{children:"Beginner"})]}),i.jsxs("div",{className:`text-center p-2 rounded ${e.total>=250?"bg-plasma-cyan/20 text-plasma-cyan":"bg-gray-700/50 text-gray-400"}`,children:[i.jsx("div",{className:"font-bold",children:"250"}),i.jsx("div",{children:"Intermediate"})]}),i.jsxs("div",{className:`text-center p-2 rounded ${e.total>=500?"bg-plasma-magenta/20 text-plasma-magenta":"bg-gray-700/50 text-gray-400"}`,children:[i.jsx("div",{className:"font-bold",children:"500"}),i.jsx("div",{children:"Advanced"})]})]})]}),i.jsx("div",{className:"text-center",children:i.jsx("div",{className:"font-mono text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]})]})}const Kg="perfect-zenkai-health-tab";function LE(){const[e,t]=k.useState(()=>localStorage.getItem(Kg)||"weight"),[r,n]=k.useState(!1),{weights:s,activeGoal:a,loadWeights:o,loadActiveGoal:l,isLoading:c}=Lt(),{meals:u,loadMeals:d,loadAnalytics:f,isLoading:h}=Af(),{workouts:m,exercises:x,loadWorkouts:y,loadExercises:w,loadAnalytics:g,initializeExerciseLibrary:p,isLoading:v}=If();k.useEffect(()=>{s.length===0&&o(),a||l(),u.length===0&&d(),m.length===0&&y(),x.length===0&&(w(),p()),f(),g()},[s.length,o,a,l,u.length,d,f,m.length,y,x.length,w,p,g]);const b=S=>{t(S),localStorage.setItem(Kg,S)},j=c||h||v;return i.jsxs("div",{className:"container mx-auto px-4 pb-24 pt-4",children:[i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"cyber-title gradient-text-ki mb-2",children:"HEALTH HUB"}),i.jsxs("p",{className:"font-mono text-sm text-gray-400",children:["Unified health tracking  ",s.length," weight entries  ",u.length," meals  ",m.length," workouts"]})]}),i.jsx("div",{className:"flex gap-2",children:i.jsxs($,{variant:"outline",size:"sm",onClick:()=>n(!r),className:"flex items-center gap-2",children:[i.jsx(Ue,{className:"h-4 w-4"}),a?"Edit Goal":"Set Goal"]})})]})}),i.jsx(G,{className:"cyber-card mb-6",children:i.jsx(q,{className:"p-0",children:i.jsxs("div",{className:"flex",children:[i.jsxs($,{variant:e==="weight"?"cyber-ki":"ghost",className:`
                flex-1 rounded-none border-0 h-12
                ${e==="weight"?"bg-gradient-to-r from-ki-green/20 to-ki-green/10 text-ki-green border-b-2 border-ki-green":"text-gray-400 hover:text-gray-200 hover:bg-gray-800/50"}
              `,onClick:()=>b("weight"),children:[i.jsx(dn,{className:"mr-2 h-4 w-4"}),"Weight"]}),i.jsxs($,{variant:e==="meals"?"cyber-ki":"ghost",className:`
                flex-1 rounded-none border-0 h-12
                ${e==="meals"?"bg-gradient-to-r from-plasma-cyan/20 to-plasma-cyan/10 text-plasma-cyan border-b-2 border-plasma-cyan":"text-gray-400 hover:text-gray-200 hover:bg-gray-800/50"}
              `,onClick:()=>b("meals"),children:[i.jsx(Ws,{className:"mr-2 h-4 w-4"}),"Meals"]}),i.jsxs($,{variant:e==="workout"?"cyber-ki":"ghost",className:`
                flex-1 rounded-none border-0 h-12
                ${e==="workout"?"bg-gradient-to-r from-ki-green/20 to-ki-green/10 text-ki-green border-b-2 border-ki-green":"text-gray-400 hover:text-gray-200 hover:bg-gray-800/50"}
              `,onClick:()=>b("workout"),children:[i.jsx(F0,{className:"mr-2 h-4 w-4"}),"Workout"]})]})})}),i.jsx("div",{className:"mb-6",children:i.jsx(G,{className:"cyber-card",children:i.jsx(q,{className:"p-4",children:i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("div",{className:"gradient-text-ki metric-display text-lg font-bold",children:s.length+u.length+m.length}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:"Total Entries"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"gradient-text-cyan metric-display text-lg font-bold",children:e==="weight"?`${s[0]?de(s[0].kg).toFixed(1):0}lbs`:e==="meals"?`${u.reduce((S,N)=>S+N.nutrition.calories,0)}cal`:`${m.reduce((S,N)=>S+N.duration,0)}min`}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:e==="weight"?"Latest Weight":e==="meals"?"Total Calories":"Total Duration"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"gradient-text-magenta metric-display text-lg font-bold",children:[i.jsx(St,{className:"inline h-4 w-4 mr-1"}),e==="weight"?"Progress":e==="meals"?"Nutrition":"Fitness"]}),i.jsx("div",{className:"font-mono text-xs text-gray-400",children:e==="weight"?"Tracking":e==="meals"?"Balance":"Training"})]})]})})})}),r&&i.jsx("div",{className:"mb-6",children:i.jsx(_E,{onClose:()=>n(!1)})}),e==="weight"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx(dE,{}),s.length>0&&!c&&i.jsx(NE,{})]}),e==="meals"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx(EE,{}),u.length>0&&!h&&i.jsx(TE,{})]}),e==="workout"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx(OE,{}),i.jsx(PE,{}),m.length>0&&!v&&i.jsx(AE,{})]}),j&&i.jsx("div",{className:"space-y-4",children:i.jsx("div",{className:"cyber-card p-4",children:i.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[i.jsx("div",{className:"shimmer h-8 w-8 rounded-full bg-gray-700"}),i.jsxs("div",{children:[i.jsx("div",{className:"shimmer mb-2 h-4 w-24 rounded bg-gray-700"}),i.jsx("div",{className:"shimmer h-3 w-16 rounded bg-gray-700"})]})]})})}),!j&&s.length===0&&u.length===0&&i.jsx("div",{className:"py-16 text-center",children:i.jsx("div",{className:"cyber-card mx-auto max-w-md",children:i.jsxs("div",{className:"flex flex-col items-center space-y-6",children:[i.jsx("div",{className:"relative",children:i.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-xl border border-gray-700 bg-gray-900",children:e==="weight"?i.jsx(dn,{className:"text-ki-green cyber-icon h-10 w-10 animate-pulse"}):i.jsx(Ws,{className:"text-plasma-cyan cyber-icon h-10 w-10 animate-pulse"})})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"cyber-subtitle text-gray-300",children:e==="weight"?"Begin Weight Journey":"Start Meal Tracking"}),i.jsx("p",{className:"font-mono text-sm leading-relaxed text-gray-500",children:e==="weight"?"Track your progress with precision. Every entry brings you closer to your goal.":"Log your meals and nutrition. Build healthy eating habits with detailed tracking."})]}),i.jsx($,{variant:"cyber-ki",onClick:()=>{const S=document.getElementById(e==="weight"?"weight-quick":"meal-quick");S&&S.focus()},className:"w-full",children:e==="weight"?i.jsxs(i.Fragment,{children:[i.jsx(dn,{className:"mr-2 h-4 w-4"}),"LOG FIRST WEIGHT"]}):i.jsxs(i.Fragment,{children:[i.jsx(Ws,{className:"mr-2 h-4 w-4"}),"LOG FIRST MEAL"]})})]})})})]})}const is=kn((e,t)=>({todos:[],templates:[],isLoading:!1,error:null,addTodo:async r=>{try{e({isLoading:!0,error:null});const n=te.getState().user,s=n==null?void 0:n.id,a={...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},o=await ft.addTodo(a,s);e(l=>({todos:[o,...l.todos],isLoading:!1})),console.log(" Todo saved successfully:",{local:!0,cloud:!!s,todo:o})}catch(n){throw console.error(" Failed to save todo:",n),e({error:n instanceof Error?n.message:"Failed to add todo",isLoading:!1}),n}},updateTodo:async(r,n)=>{try{e({isLoading:!0,error:null});const s=te.getState().user,a=s==null?void 0:s.id;await ft.updateTodo(r,n,a),e(o=>({todos:o.todos.map(l=>l.id===r?{...l,...n,updatedAt:new Date().toISOString()}:l),isLoading:!1})),console.log(" Todo updated successfully:",{local:!0,cloud:!!a,id:r,updates:n})}catch(s){throw console.error(" Failed to update todo:",s),e({error:s instanceof Error?s.message:"Failed to update todo",isLoading:!1}),s}},deleteTodo:async r=>{try{e({isLoading:!0,error:null});const n=te.getState().user,s=n==null?void 0:n.id;await ft.deleteTodo(r,s),e(a=>({todos:a.todos.filter(o=>o.id!==r),isLoading:!1})),console.log(" Todo deleted successfully:",{local:!0,cloud:!!s,id:r})}catch(n){throw console.error(" Failed to delete todo:",n),e({error:n instanceof Error?n.message:"Failed to delete todo",isLoading:!1}),n}},updateTodoField:async(r,n,s)=>{try{const a=t().todos.find(d=>d.id===r);if(!a)throw new Error("Todo not found");const o=new Date().toISOString(),l={...a,[n]:s,updatedAt:o};e(d=>({todos:d.todos.map(f=>f.id===r?l:f)}));const c={updated_at:o};switch(n){case"summary":c.summary=s;break;case"description":c.description=s;break;case"descriptionFormat":c.description_format=s;break;case"points":c.points=s;break;case"priority":c.priority=s;break;case"category":c.category=s;break;case"dueDateTime":c.due_date_time=s;break;case"done":c.done=s,s?c.completed_at=o:c.completed_at=null;break;default:console.warn(`Field ${n} not mapped for database update`);return}if(!T)throw new Error("Supabase client not available");const{error:u}=await T.from("todos").update(c).eq("id",r);if(u)throw e(d=>({todos:d.todos.map(f=>f.id===r?a:f)})),u}catch(a){throw console.error(`Failed to update todo ${n}:`,a),a}},toggleTodo:async r=>{try{const n=t().todos.find(l=>l.id===r);if(!n)throw new Error("Todo not found");const s=new Date().toISOString(),a={done:!n.done,updatedAt:s},o={...n,...a};e(l=>({todos:l.todos.map(c=>c.id===r?o:c)}));try{const l=te.getState().user,c=l==null?void 0:l.id;await ft.updateTodo(r,a,c),console.log(" Todo toggled successfully:",{local:!0,cloud:!!c,todoId:r,done:a.done})}catch(l){throw e(c=>({todos:c.todos.map(u=>u.id===r?n:u)})),l}}catch(n){throw console.error("Failed to toggle todo:",n),n}},loadTodos:async()=>{try{e({isLoading:!0,error:null});const r=te.getState().user,n=r==null?void 0:r.id;if(n){Df(n);try{const a=await ft.syncData(n);a.synced>0&&console.info(` Synced ${a.synced} todo entries during load`)}catch(a){console.warn(" Data sync failed during load, continuing with available data:",a)}}const s=await ft.getAllTodos(n);e({todos:s,isLoading:!1}),console.log(" Todos loaded successfully:",{count:s.length,cloud:!!n})}catch(r){console.error(" Failed to load todos:",r),e({error:r instanceof Error?r.message:"Failed to load todos",isLoading:!1})}},refreshTodos:async()=>{try{await t().loadTodos()}catch(r){throw console.error(" Failed to refresh todos:",r),r}},syncData:async()=>{try{e({isLoading:!0,error:null});const r=te.getState().user,n=r==null?void 0:r.id,s=await ft.syncData(n);return s.synced>0&&await t().loadTodos(),e({isLoading:!1}),console.log(" Data synced successfully:",{local:!0,cloud:!!n,result:s}),s}catch(r){throw console.error(" Failed to sync data:",r),e({error:r instanceof Error?r.message:"Failed to sync data",isLoading:!1}),r}},addSubtask:async(r,n)=>{try{const s=te.getState().user,a=s==null?void 0:s.id;await ft.addSubtask(r,n,a);const o=await ft.getTodoById(r,a);o&&e(l=>({todos:l.todos.map(c=>c.id===r?o:c)})),console.log(" Subtask added successfully:",{local:!0,cloud:!!a,todoId:r,subtaskText:n})}catch(s){throw console.error(" Failed to add subtask:",s),e({error:s instanceof Error?s.message:"Failed to add subtask"}),s}},updateSubtask:async(r,n,s)=>{try{const a=te.getState().user,o=a==null?void 0:a.id;await ft.updateSubtask(r,n,s,o);const l=await ft.getTodoById(r,o);l&&e(c=>({todos:c.todos.map(u=>u.id===r?l:u)})),console.log(" Subtask updated successfully:",{local:!0,cloud:!!o,todoId:r,subtaskId:n,updates:s})}catch(a){throw console.error(" Failed to update subtask:",a),e({error:a instanceof Error?a.message:"Failed to update subtask"}),a}},deleteSubtask:async(r,n)=>{try{const s=te.getState().user,a=s==null?void 0:s.id;await ft.deleteSubtask(r,n,a);const o=await ft.getTodoById(r,a);o&&e(l=>({todos:l.todos.map(c=>c.id===r?o:c)})),console.log(" Subtask deleted successfully:",{local:!0,cloud:!!a,todoId:r,subtaskId:n})}catch(s){throw console.error(" Failed to delete subtask:",s),e({error:s instanceof Error?s.message:"Failed to delete subtask"}),s}},toggleSubtask:async(r,n)=>{try{const s=t().todos.find(o=>o.id===r);if(!s)return;const a=s.subtasks.find(o=>o.id===n);if(!a)return;await t().updateSubtask(r,n,{done:!a.done})}catch(s){throw e({error:s instanceof Error?s.message:"Failed to toggle subtask"}),s}},addTemplate:async r=>{try{e({isLoading:!0,error:null});const n=await Se.addTemplate(r);e(s=>({templates:[n,...s.templates],isLoading:!1}))}catch(n){throw e({error:n instanceof Error?n.message:"Failed to add template",isLoading:!1}),n}},updateTemplate:async(r,n)=>{try{await Se.updateTemplate(r,n),e(s=>({templates:s.templates.map(a=>a.id===r?{...a,...n}:a)}))}catch(s){throw e({error:s instanceof Error?s.message:"Failed to update template"}),s}},deleteTemplate:async r=>{try{await Se.deleteTemplate(r),e(n=>({templates:n.templates.filter(s=>s.id!==r)}))}catch(n){throw e({error:n instanceof Error?n.message:"Failed to delete template"}),n}},loadTemplates:async()=>{try{const r=await Se.getAllTemplates();e({templates:r})}catch(r){e({error:r instanceof Error?r.message:"Failed to load templates"})}},createTodoFromTemplate:async r=>{try{e({isLoading:!0,error:null});const n=await Se.createTodoFromTemplate(r);e(s=>({todos:[n,...s.todos],isLoading:!1}))}catch(n){throw e({error:n instanceof Error?n.message:"Failed to create todo from template",isLoading:!1}),n}},hydrate:async()=>{await Promise.all([t().loadTodos(),t().loadTemplates()])},clearError:()=>{e({error:null})},getOverdueTodos:()=>{const r=new Date().toISOString().split("T")[0];return t().todos.filter(n=>!n.done&&n.dueDate&&n.dueDate<r)},getTodosByCategory:r=>t().todos.filter(n=>n.category===r),getTodosByPriority:r=>t().todos.filter(n=>n.priority===r),getPointsStats:()=>{const r=t().todos,n=new Date,s=n.toISOString().split("T")[0],a=new Date(n.setDate(n.getDate()-n.getDay())).toISOString().split("T")[0],o=r.filter(m=>m.done&&m.completedAt),l=o.filter(m=>m.completedAt&&m.completedAt.split("T")[0]===s),c=o.filter(m=>m.completedAt&&m.completedAt.split("T")[0]>=a),u=o.reduce((m,x)=>m+(x.points||5),0),d=l.reduce((m,x)=>m+(x.points||5),0),f=c.reduce((m,x)=>m+(x.points||5),0),h=r.reduce((m,x)=>m+(x.points||5),0);return{dailyPoints:d,weeklyPoints:f,totalPoints:u,totalPossiblePoints:h,completedTasks:o.length,totalTasks:r.length,completionPercentage:r.length>0?Math.round(o.length/r.length*100):0,averageTaskPoints:r.length>0?Math.round(r.reduce((m,x)=>m+(x.points||5),0)/r.length):0}}})),IE=async()=>{await is.getState().hydrate()},ti=[{value:"high",label:"High",icon:"",color:"text-red-500"},{value:"medium",label:"Medium",icon:"",color:"text-yellow-500"},{value:"low",label:"Low",icon:"",color:"text-blue-500"}],ri=[{value:"work",label:"Work",icon:"",color:"text-purple-500"},{value:"personal",label:"Personal",icon:"",color:"text-green-500"},{value:"health",label:"Health",icon:"",color:"text-red-500"},{value:"learning",label:"Learning",icon:"",color:"text-blue-500"},{value:"other",label:"Other",icon:"",color:"text-gray-500"}],RE=e=>ti.find(t=>t.value===e)||ti[1],$E=e=>ri.find(t=>t.value===e)||ri[4],vu=e=>{if(!e.dueDate||e.done)return!1;const t=new Date().toISOString().split("T")[0];return e.dueDate<t},Hg=e=>{if(!e.dueDate)return!1;const t=new Date().toISOString().split("T")[0];return e.dueDate===t},ME=e=>{const t=new Date(e),r=new Date,n=new Date(r);n.setDate(n.getDate()-1);const s=new Date(r);return s.setDate(s.getDate()+1),e===r.toISOString().split("T")[0]?"Today":e===n.toISOString().split("T")[0]?"Yesterday":e===s.toISOString().split("T")[0]?"Tomorrow":t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:t.getFullYear()!==r.getFullYear()?"numeric":void 0})},FE=e=>{const t={high:3,medium:2,low:1};return[...e].sort((r,n)=>t[n.priority]-t[r.priority])},WE=e=>[...e].sort((t,r)=>!t.dueDate&&!r.dueDate?0:t.dueDate?r.dueDate?new Date(t.dueDate).getTime()-new Date(r.dueDate).getTime():-1:1);function Zi({open:e,onOpenChange:t,children:r}){const[n,s]=k.useState(e||!1),a=k.useRef(null);k.useEffect(()=>{e!==void 0&&s(e)},[e]),k.useEffect(()=>{const l=c=>{a.current&&!a.current.contains(c.target)&&(s(!1),t==null||t(!1))};if(n)return document.addEventListener("mousedown",l),()=>document.removeEventListener("mousedown",l)},[n,t]);const o=()=>{const l=!n;s(l),t==null||t(l)};return i.jsx("div",{className:"relative",ref:a,children:Array.isArray(r)?i.jsxs(i.Fragment,{children:[i.jsx("div",{onClick:o,children:r[0]}),n&&r[1]]}):r})}function eo({children:e}){return i.jsx(i.Fragment,{children:e})}function to({className:e="",align:t="start",children:r}){const n={start:"left-0",center:"left-1/2 transform -translate-x-1/2",end:"right-0"};return i.jsx("div",{className:`absolute top-full mt-2 z-50 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none ${n[t]} ${e}`,children:r})}function UE({value:e=5,onChange:t,disabled:r=!1,size:n="md",showLabel:s=!0,className:a=""}){const[o,l]=k.useState(!1),[c,u]=k.useState(""),d=[{value:1,label:"Trivial",color:"bg-gray-100 text-gray-600",icon:""},{value:3,label:"Easy",color:"bg-green-100 text-green-700",icon:""},{value:5,label:"Medium",color:"bg-blue-100 text-blue-700",icon:""},{value:7,label:"Hard",color:"bg-orange-100 text-orange-700",icon:""},{value:10,label:"Epic",color:"bg-purple-100 text-purple-700",icon:""}],h=(g=>g<=2?{color:"text-gray-600",bg:"bg-gray-100",label:"Trivial"}:g<=4?{color:"text-green-700",bg:"bg-green-100",label:"Easy"}:g<=6?{color:"text-blue-700",bg:"bg-blue-100",label:"Medium"}:g<=8?{color:"text-orange-700",bg:"bg-orange-100",label:"Hard"}:{color:"text-purple-700",bg:"bg-purple-100",label:"Epic"})(e),m=g=>{t(g),l(!1)},x=()=>{const g=parseInt(c);g>=1&&g<=10&&(t(g),u(""),l(!1))},y=g=>{const p=Math.min(Math.ceil(g/2),5);return i.jsx("div",{className:"flex items-center gap-0.5",children:Array.from({length:5},(v,b)=>i.jsx(hf,{className:`h-3 w-3 ${b<p?"fill-current text-yellow-400":"text-gray-300"}`},b))})},w={sm:"h-6 px-2 text-xs",md:"h-8 px-3 text-sm",lg:"h-10 px-4 text-base"};return i.jsxs(Zi,{open:o,onOpenChange:l,children:[i.jsx(eo,{asChild:!0,children:i.jsxs($,{variant:"outline",size:"sm",disabled:r,className:`${w[n]} ${h.bg} ${h.color} border-current hover:opacity-80 ${a}`,children:[i.jsx(St,{className:"mr-1 h-3 w-3"}),i.jsx("span",{className:"font-medium",children:e}),n!=="sm"&&y(e),s&&n==="lg"&&i.jsx("span",{className:"ml-1 text-xs opacity-75",children:h.label})]})}),i.jsx(to,{className:"w-80 p-4",align:"start",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"font-medium text-sm",children:"Task Points"}),i.jsx("p",{className:"text-xs text-muted-foreground",children:"Rate the difficulty or importance of this task (1-10 scale)"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-medium",children:"Quick Select:"}),i.jsx("div",{className:"grid grid-cols-1 gap-1",children:d.map(g=>i.jsxs($,{variant:e===g.value?"default":"ghost",size:"sm",onClick:()=>m(g.value),className:`justify-start ${g.color} ${e===g.value?"":"hover:"+g.color}`,children:[i.jsx("span",{className:"mr-2",children:g.icon}),i.jsxs("span",{className:"flex-1 text-left",children:[g.value," - ",g.label]}),y(g.value)]},g.value))})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-xs font-medium",children:"Custom Value:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(fe,{type:"number",min:"1",max:"10",placeholder:"1-10",value:c,onChange:g=>u(g.target.value),className:"flex-1",onKeyDown:g=>{g.key==="Enter"&&x()}}),i.jsx($,{size:"sm",onClick:x,disabled:!c||parseInt(c)<1||parseInt(c)>10,children:"Set"})]})]}),i.jsx("div",{className:`p-3 rounded-lg ${h.bg} ${h.color}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"font-medium",children:["Current: ",e," points"]}),i.jsxs("p",{className:"text-xs opacity-75",children:[h.label," difficulty"]})]}),y(e)]})})]})})]})}function zE({points:e,size:t="md",showStars:r=!0,showLabel:n=!1,showIcon:s=!0,className:a=""}){const l=(f=>f<=2?{color:"text-gray-600",bg:"bg-gray-100",label:"Trivial",borderColor:"border-gray-300"}:f<=4?{color:"text-green-700",bg:"bg-green-100",label:"Easy",borderColor:"border-green-300"}:f<=6?{color:"text-blue-700",bg:"bg-blue-100",label:"Medium",borderColor:"border-blue-300"}:f<=8?{color:"text-orange-700",bg:"bg-orange-100",label:"Hard",borderColor:"border-orange-300"}:{color:"text-purple-700",bg:"bg-purple-100",label:"Epic",borderColor:"border-purple-300"})(e),c=f=>{const h=Math.min(Math.ceil(f/2),5),m=t==="sm"?"h-2.5 w-2.5":t==="md"?"h-3 w-3":"h-3.5 w-3.5";return i.jsx("div",{className:"flex items-center gap-0.5",children:Array.from({length:5},(x,y)=>i.jsx(hf,{className:`${m} ${y<h?"fill-current text-yellow-400":"text-gray-300"}`},y))})},u={sm:"px-1.5 py-0.5 text-xs",md:"px-2 py-0.5 text-sm",lg:"px-2.5 py-1 text-sm"},d=t==="sm"?"h-2.5 w-2.5":t==="md"?"h-3 w-3":"h-3.5 w-3.5";return i.jsxs(ee,{variant:"outline",className:`${u[t]} ${l.bg} ${l.color} ${l.borderColor} border-current ${a}`,children:[s&&i.jsx(St,{className:`mr-1 ${d}`}),i.jsx("span",{className:"font-medium",children:e}),n&&t!=="sm"&&i.jsx("span",{className:"ml-1 opacity-75",children:l.label}),r&&t!=="sm"&&i.jsx("div",{className:"ml-1",children:c(e)})]})}function BE({value:e,onChange:t,placeholder:r="Due date (e.g., tomorrow 2pm)",disabled:n=!1,className:s=""}){const[a,o]=k.useState(!1),[l,c]=k.useState(""),[u,d]=k.useState("");k.useEffect(()=>{if(e){const x=new Date(e);d(x.toISOString().split("T")[0]),c(x.toTimeString().slice(0,5))}},[e]);const f=()=>{if(u){const x=new Date(`${u}T${l||"17:00"}`);isNaN(x.getTime())||(t(x.toISOString()),o(!1))}},h=()=>{t(void 0),d(""),c(""),o(!1)},m=x=>{const y=new Date(x),w=new Date,g=y.toDateString()===w.toDateString(),p=y.toDateString()===new Date(w.getTime()+24*60*60*1e3).toDateString();let v=y.toLocaleDateString();g?v="Today":p&&(v="Tomorrow");const b=y.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${v} at ${b}`};return i.jsxs(Zi,{open:a,onOpenChange:o,children:[i.jsx(eo,{asChild:!0,children:i.jsxs($,{variant:"outline",disabled:n,className:`justify-start text-left font-normal ${!e&&"text-muted-foreground"} ${s}`,children:[i.jsx(Je,{className:"mr-2 h-4 w-4"}),e?m(e):r,e&&i.jsx($,{variant:"ghost",size:"sm",className:"ml-auto h-auto p-0 text-muted-foreground hover:text-foreground",onClick:x=>{x.stopPropagation(),h()},children:i.jsx(mn,{className:"h-3 w-3"})})]})}),i.jsx(to,{className:"w-96 p-4",align:"start",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium",children:"Set Date & Time"}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("div",{children:i.jsx(fe,{type:"date",value:u,onChange:x=>d(x.target.value),className:"w-full"})}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(fe,{type:"time",value:l,onChange:x=>c(x.target.value),className:"flex-1"}),i.jsx($,{size:"sm",onClick:f,disabled:!u,children:"Set"})]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx($,{variant:"outline",size:"sm",onClick:h,children:"Clear"}),i.jsx($,{variant:"outline",size:"sm",onClick:()=>o(!1),children:"Close"})]})]})})]})}function uv({value:e="",format:t="markdown",onChange:r,placeholder:n="Add a detailed description...",disabled:s=!1,className:a="",maxLength:o=5e3,minHeight:l=120}){const[c,u]=k.useState(!1),[d,f]=k.useState(e),[h,m]=k.useState(t);k.useEffect(()=>{f(e)},[e]),k.useEffect(()=>{m(t)},[t]);const x=j=>{f(j),r(j,h)},y=j=>{m(j),r(d,j)},w=(j,S="")=>{const N=document.querySelector(`[data-editor-id="${v}"]`);if(!N)return;const _=N.selectionStart,E=N.selectionEnd,P=d.substring(_,E),C=P||S;let A="";j==="[]()"?A=`[${C||"Link text"}](${P?"":"URL"})`:A=`${j}${C}${j}`;const Y=d.substring(0,_)+A+d.substring(E);x(Y),setTimeout(()=>{N.focus();const H=_+A.length;N.setSelectionRange(H,H)},0)},g=()=>h==="markdown"?p(d):h==="html"?i.jsx("div",{dangerouslySetInnerHTML:{__html:d}}):i.jsx("div",{className:"whitespace-pre-wrap",children:d}),p=j=>{let S=j.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code class="bg-muted px-1 rounded">$1</code>').replace(/^### (.*$)/gm,'<h3 class="text-lg font-semibold mt-4 mb-2">$1</h3>').replace(/^## (.*$)/gm,'<h2 class="text-xl font-semibold mt-4 mb-2">$1</h2>').replace(/^# (.*$)/gm,'<h1 class="text-2xl font-bold mt-4 mb-2">$1</h1>').replace(/^- (.*$)/gm,'<li class="ml-4"> $1</li>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-blue-600 hover:underline" target="_blank" rel="noopener">$1</a>').replace(/\n\n/g,'</p><p class="mt-2">').replace(/\n/g,"<br>");return S&&!S.includes("<h1>")&&!S.includes("<h2>")&&!S.includes("<h3>")&&(S=`<p>${S}</p>`),i.jsx("div",{dangerouslySetInnerHTML:{__html:S},className:"prose prose-sm max-w-none"})},v=`editor-${Math.random().toString(36).substr(2,9)}`,b=[{icon:Rk,action:()=>w("**","bold text"),tooltip:"Bold"},{icon:Hk,action:()=>w("*","italic text"),tooltip:"Italic"},{icon:Wk,action:()=>w("`","code"),tooltip:"Code"},{icon:Yk,action:()=>w("[]()","link"),tooltip:"Link"},{icon:Qk,action:()=>w("- ",""),tooltip:"List item"}];return i.jsxs("div",{className:`space-y-2 ${a}`,children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"flex items-center gap-1",children:["markdown","plaintext"].map(j=>i.jsx($,{variant:h===j?"default":"outline",size:"sm",onClick:()=>y(j),className:"h-7 px-2 text-xs",children:j==="markdown"?"MD":"TXT"},j))}),h==="markdown"&&!c&&i.jsx("div",{className:"flex items-center gap-1 ml-2 border-l pl-2",children:b.map((j,S)=>i.jsx($,{variant:"ghost",size:"sm",onClick:j.action,className:"h-7 w-7 p-0",title:j.tooltip,children:i.jsx(j.icon,{className:"h-3 w-3"})},S))})]}),h==="markdown"&&i.jsx($,{variant:"outline",size:"sm",onClick:()=>u(!c),className:"h-7 px-2 text-xs",children:c?i.jsxs(i.Fragment,{children:[i.jsx(uf,{className:"mr-1 h-3 w-3"}),"Edit"]}):i.jsxs(i.Fragment,{children:[i.jsx(zk,{className:"mr-1 h-3 w-3"}),"Preview"]})})]}),i.jsx(G,{children:i.jsx(q,{className:"p-3",children:c?i.jsx("div",{className:"min-h-[120px] text-sm",style:{minHeight:`${l}px`},children:d?g():i.jsx("div",{className:"text-muted-foreground italic",children:"No content to preview"})}):i.jsx(Xi,{"data-editor-id":v,value:d,onChange:j=>x(j.target.value),placeholder:n,disabled:s,className:"resize-none border-0 focus-visible:ring-0 p-0",style:{minHeight:`${l}px`},maxLength:o})})}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ee,{variant:"outline",className:"text-xs",children:h.toUpperCase()}),h==="markdown"&&i.jsx("span",{children:"Tip: Use **bold**, *italic*, `code`, [links](url), - lists"})]}),i.jsxs("div",{children:[d.length,"/",o]})]})]})}function GE({content:e,format:t="markdown",className:r=""}){const n=()=>t==="markdown"?s(e):t==="html"?i.jsx("div",{dangerouslySetInnerHTML:{__html:e}}):i.jsx("div",{className:"whitespace-pre-wrap",children:e}),s=a=>{let o=a.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/`(.*?)`/g,'<code class="bg-muted px-1 rounded text-xs">$1</code>').replace(/^### (.*$)/gm,'<h3 class="text-sm font-semibold mt-2 mb-1">$1</h3>').replace(/^## (.*$)/gm,'<h2 class="text-base font-semibold mt-2 mb-1">$1</h2>').replace(/^# (.*$)/gm,'<h1 class="text-lg font-bold mt-2 mb-1">$1</h1>').replace(/^- (.*$)/gm,'<li class="ml-4 text-sm"> $1</li>').replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-blue-600 hover:underline text-sm" target="_blank" rel="noopener">$1</a>').replace(/\n\n/g,'</p><p class="mt-1">').replace(/\n/g,"<br>");return o&&!o.includes("<h1>")&&!o.includes("<h2>")&&!o.includes("<h3>")&&(o=`<p class="text-sm">${o}</p>`),i.jsx("div",{dangerouslySetInnerHTML:{__html:o},className:"prose prose-sm max-w-none"})};return e?i.jsx("div",{className:`text-sm ${r}`,children:n()}):null}function Vg({todo:e}){var Y,H,_e,we;const[t,r]=k.useState(!1),[n,s]=k.useState(!1),[a,o]=k.useState(!1),[l,c]=k.useState(!1),[u,d]=k.useState(""),{updateTodoField:f,deleteTodo:h,addSubtask:m,deleteSubtask:x,toggleTodo:y,toggleSubtask:w}=is(),g=RE(e.priority),p=$E(e.category),v=((Y=e.subtasks)==null?void 0:Y.length)>0?e.subtasks.filter(z=>z.done).length/e.subtasks.length*100:0,b=async()=>{try{await y(e.id)}catch(z){console.error("Failed to toggle todo:",z)}},j=()=>{window.confirm(`Delete task: "${e.summary}"?`)&&h(e.id)},S=async()=>{if(u.trim())try{await m(e.id,u.trim()),d(""),c(!1)}catch(z){console.error("Failed to add subtask:",z)}},N=z=>{z.key==="Enter"?S():z.key==="Escape"&&(c(!1),d(""))},_=(z,O)=>{f(e.id,"description",z),f(e.id,"descriptionFormat",O)},E=z=>{if(!z)return"";const O=new Date(z),M=new Date,U=O.toDateString()===M.toDateString(),X=O.toDateString()===new Date(M.getTime()+24*60*60*1e3).toDateString();let se=O.toLocaleDateString();U?se="Today":X&&(se="Tomorrow");const Xt=O.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});return`${se} ${Xt}`},P=Lf({onSwipedLeft:()=>{j()},preventScrollOnSwipe:!0,trackMouse:!0}),C=e.description&&e.description.trim().length>0,A=e.dueDateTime;return i.jsx(G,{...P,className:`transition-all duration-150 ${t?"scale-95 bg-muted":"hover:bg-muted/50"} ${e.done?"opacity-75":""} ${vu({...e,dueDate:(H=e.dueDateTime)==null?void 0:H.split("T")[0]})?"border-red-200 bg-red-50/50":""}`,onTouchStart:()=>r(!0),onTouchEnd:()=>r(!1),onMouseDown:()=>r(!0),onMouseUp:()=>r(!1),onMouseLeave:()=>r(!1),children:i.jsx(q,{className:"px-4 py-3",children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[(e.subtasks&&e.subtasks.length>0||C)&&i.jsx("button",{onClick:()=>s(!n),className:"rounded p-0.5 transition-colors hover:bg-muted",children:n?i.jsx(cf,{className:"h-4 w-4 text-muted-foreground"}):i.jsx(M0,{className:"h-4 w-4 text-muted-foreground"})}),i.jsx("button",{onClick:b,className:`flex h-5 w-5 items-center justify-center rounded border-2 transition-colors ${e.done?"border-primary bg-primary text-primary-foreground":"border-muted-foreground hover:border-primary"}`,children:e.done&&i.jsx("svg",{className:"h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),i.jsxs("div",{className:"min-w-0 flex-1 space-y-1",children:[i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsx("p",{className:`text-sm transition-all ${e.done?"text-muted-foreground line-through":"text-foreground"}`,children:e.summary}),i.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[C&&i.jsx(W0,{className:"h-3 w-3 text-muted-foreground"}),A&&i.jsx(Sr,{className:"h-3 w-3 text-muted-foreground"})]})]}),e.subtasks&&e.subtasks.length>0&&i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(as,{value:v,className:"h-1.5 flex-1"}),i.jsxs("span",{className:"text-xs text-muted-foreground",children:[e.subtasks.filter(z=>z.done).length,"/",e.subtasks.length]})]}),i.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.points&&i.jsx(zE,{points:e.points,size:"sm",showStars:!1,showLabel:!1}),i.jsxs(ee,{variant:"outline",className:`px-2 py-0.5 text-xs ${g.color} border-current`,children:[i.jsx("span",{className:"mr-1",children:g.icon}),g.label]}),i.jsxs(ee,{variant:"outline",className:`px-2 py-0.5 text-xs ${p.color} border-current`,children:[i.jsx("span",{className:"mr-1",children:p.icon}),p.label]}),A?i.jsxs(ee,{variant:"outline",className:`px-2 py-0.5 text-xs ${vu({...e,dueDate:(_e=e.dueDateTime)==null?void 0:_e.split("T")[0]})?"border-red-300 bg-red-50 text-red-600":Hg({...e,dueDate:(we=e.dueDateTime)==null?void 0:we.split("T")[0]})?"border-orange-300 bg-orange-50 text-orange-600":"border-blue-300 bg-blue-50 text-blue-600"}`,children:[i.jsx(Je,{className:"mr-1 h-3 w-3"}),E(e.dueDateTime)]}):e.dueDate&&i.jsxs(ee,{variant:"outline",className:`px-2 py-0.5 text-xs ${vu(e)?"border-red-300 bg-red-50 text-red-600":Hg(e)?"border-orange-300 bg-orange-50 text-orange-600":"border-blue-300 bg-blue-50 text-blue-600"}`,children:[i.jsx(Je,{className:"mr-1 h-3 w-3"}),ME(e.dueDate)]})]})]}),i.jsx($,{size:"sm",variant:"ghost",onClick:()=>c(!0),className:"h-8 w-8 p-0 hover:bg-muted",children:i.jsx(Ot,{className:"h-4 w-4"})})]}),n&&i.jsxs("div",{className:"ml-8 space-y-3",children:[C&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Description"}),i.jsxs($,{variant:"ghost",size:"sm",onClick:()=>o(!a),className:"h-6 px-2 text-xs",children:[i.jsx(uf,{className:"mr-1 h-3 w-3"}),a?"Save":"Edit"]})]}),a?i.jsx(uv,{value:e.description,format:e.descriptionFormat,onChange:_,minHeight:80,className:"text-sm"}):i.jsx(GE,{content:e.description||"",format:e.descriptionFormat,className:"p-2 bg-muted/30 rounded"})]}),e.subtasks&&e.subtasks.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Subtasks"}),e.subtasks.map(z=>i.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[i.jsx("button",{onClick:()=>w(e.id,z.id),className:`flex h-4 w-4 items-center justify-center rounded border transition-colors ${z.done?"border-primary bg-primary text-primary-foreground":"border-muted-foreground hover:border-primary"}`,children:z.done&&i.jsx("svg",{className:"h-2.5 w-2.5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),i.jsx("span",{className:z.done?"text-muted-foreground line-through":"",children:z.text}),i.jsx("button",{onClick:()=>x(e.id,z.id),className:"ml-auto text-muted-foreground transition-colors hover:text-red-500",children:""})]},z.id))]})]}),l&&i.jsxs("div",{className:"ml-8 flex items-center gap-2",children:[i.jsx(fe,{placeholder:"Add subtask...",value:u,onChange:z=>d(z.target.value),onKeyPress:N,onBlur:()=>{u.trim()||c(!1)},className:"text-sm",autoFocus:!0}),i.jsx($,{size:"sm",onClick:S,disabled:!u.trim(),children:"Add"})]})]})})})}const ni=[{value:"health",label:"Health & Fitness",icon:"",description:"Physical and mental wellbeing goals"},{value:"career",label:"Career & Work",icon:"",description:"Professional development and work goals"},{value:"learning",label:"Learning & Skills",icon:"",description:"Education and skill development goals"},{value:"personal",label:"Personal Growth",icon:"",description:"Self-improvement and personal development"},{value:"finance",label:"Finance & Money",icon:"",description:"Financial planning and money goals"},{value:"relationships",label:"Relationships",icon:"",description:"Family, friends, and social connections"},{value:"other",label:"Other",icon:"",description:"Miscellaneous goals"}],si=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#F97316","#06B6D4","#84CC16","#EC4899","#6B7280"],qE=()=>si[Math.floor(Math.random()*si.length)],sh=e=>ni.find(t=>t.value===e)||ni[ni.length-1],KE=e=>{if(!e)return"No deadline";const t=new Date(e),r=new Date,n=t.getTime()-r.getTime(),s=Math.ceil(n/(1e3*60*60*24));return s<0?`${Math.abs(s)} days overdue`:s===0?"Due today":s===1?"Due tomorrow":s<=7?`Due in ${s} days`:t.toLocaleDateString()},HE=[{id:"1",title:"Get in Shape",category:"health",description:"Lose 20 pounds and build muscle",targetDate:"2024-06-01",color:"#10B981",isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",title:"Learn TypeScript",category:"learning",description:"Master TypeScript for better development",targetDate:"2024-04-01",color:"#3B82F6",isActive:!0,createdAt:"2024-01-02T00:00:00Z",updatedAt:"2024-01-02T00:00:00Z"},{id:"3",title:"Save for Vacation",category:"finance",description:"Save $3000 for summer vacation",color:"#F59E0B",isActive:!0,createdAt:"2024-01-03T00:00:00Z",updatedAt:"2024-01-03T00:00:00Z"}],bc=kn((e,t)=>({goals:HE,isLoading:!1,error:null,addGoal:async r=>{try{e({isLoading:!0,error:null});const n=new Date().toISOString(),s={id:br(),...r,color:r.color||qE(),createdAt:n,updatedAt:n};e(a=>({goals:[s,...a.goals],isLoading:!1}))}catch(n){e({error:n instanceof Error?n.message:"Failed to add goal",isLoading:!1})}},updateGoal:async(r,n)=>{try{e({isLoading:!0,error:null});const s=new Date().toISOString();e(a=>({goals:a.goals.map(o=>o.id===r?{...o,...n,updatedAt:s}:o),isLoading:!1}))}catch(s){e({error:s instanceof Error?s.message:"Failed to update goal",isLoading:!1})}},deleteGoal:async r=>{try{e({isLoading:!0,error:null}),e(n=>({goals:n.goals.filter(s=>s.id!==r),isLoading:!1}))}catch(n){e({error:n instanceof Error?n.message:"Failed to delete goal",isLoading:!1})}},toggleGoalActive:async r=>{try{const n=t().goals.find(s=>s.id===r);n&&await t().updateGoal(r,{isActive:!n.isActive})}catch(n){e({error:n instanceof Error?n.message:"Failed to toggle goal status"})}},loadGoals:async()=>{try{e({isLoading:!0,error:null}),e({isLoading:!1})}catch(r){e({error:r instanceof Error?r.message:"Failed to load goals",isLoading:!1})}},calculateGoalProgress:(r,n)=>{const s=n.filter(o=>o.goalId===r),a=s.filter(o=>o.done);return{goalId:r,totalTodos:s.length,completedTodos:a.length,progressPercentage:s.length>0?Math.round(a.length/s.length*100):0,lastUpdated:new Date().toISOString()}},getGoalsWithProgress:r=>{const{goals:n,calculateGoalProgress:s}=t();return n.map(a=>({...a,progress:s(a.id,r)}))},getActiveGoals:()=>t().goals.filter(r=>r.isActive),getGoalsByCategory:r=>t().goals.filter(n=>n.category===r),clearError:()=>e({error:null})})),VE=({onSuccess:e,onCancel:t})=>{const[r,n]=k.useState(""),[s,a]=k.useState("other"),[o,l]=k.useState(""),[c,u]=k.useState(""),[d,f]=k.useState(si[0]),{addGoal:h,isLoading:m}=bc(),x=async w=>{if(w.preventDefault(),!!r.trim())try{await h({title:r.trim(),category:s,description:o.trim()||void 0,targetDate:c||void 0,color:d,isActive:!0}),n(""),a("other"),l(""),u(""),f(si[0]),e==null||e()}catch(g){console.error("Failed to create goal:",g)}},y=ni.find(w=>w.value===s);return i.jsxs(G,{className:"w-full max-w-md mx-auto",children:[i.jsx(me,{children:i.jsx(ge,{className:"flex items-center gap-2",children:" Create New Goal"})}),i.jsx(q,{children:i.jsxs("form",{onSubmit:x,className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"title",children:"Goal Title *"}),i.jsx(fe,{id:"title",value:r,onChange:w=>n(w.target.value),placeholder:"What do you want to achieve?",required:!0,maxLength:100})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"category",children:"Category"}),i.jsxs(Zi,{children:[i.jsx(eo,{asChild:!0,children:i.jsxs($,{variant:"outline",className:"w-full justify-between",type:"button",children:[y&&i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{children:y.icon}),i.jsx("span",{children:y.label})]}),i.jsx(cf,{className:"h-4 w-4 opacity-50"})]})}),i.jsx(to,{className:"w-full p-2",children:i.jsx("div",{className:"space-y-1",children:ni.map(w=>i.jsx($,{variant:s===w.value?"default":"ghost",className:"w-full justify-start",onClick:()=>a(w.value),type:"button",children:i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{children:w.icon}),i.jsx("span",{children:w.label})]})},w.value))})})]}),y&&i.jsx("p",{className:"text-sm text-muted-foreground",children:y.description})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"description",children:"Description (Optional)"}),i.jsx(Xi,{id:"description",value:o,onChange:w=>l(w.target.value),placeholder:"Brief description of your goal...",rows:2,maxLength:200})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{htmlFor:"targetDate",children:"Target Date (Optional)"}),i.jsx(fe,{id:"targetDate",type:"date",value:c,onChange:w=>u(w.target.value),min:new Date().toISOString().split("T")[0]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(xe,{children:"Goal Color"}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:si.map(w=>i.jsx("button",{type:"button",onClick:()=>f(w),className:`w-8 h-8 rounded-full border-2 transition-all ${d===w?"border-gray-800 scale-110":"border-gray-300 hover:scale-105"}`,style:{backgroundColor:w},title:w},w))})]}),i.jsxs("div",{className:"flex gap-2 pt-4",children:[i.jsx($,{type:"submit",disabled:!r.trim()||m,className:"flex-1",children:m?"Creating...":"Create Goal"}),t&&i.jsx($,{type:"button",variant:"outline",onClick:t,disabled:m,children:"Cancel"})]})]})})]})},YE=({goal:e,onEdit:t})=>{const{toggleGoalActive:r,deleteGoal:n}=bc(),s=sh(e.category),a=()=>{r(e.id)},o=()=>{window.confirm("Are you sure you want to delete this goal?")&&n(e.id)};return i.jsxs(G,{className:`transition-all duration-200 ${e.isActive?"":"opacity-60"}`,children:[i.jsx(me,{className:"pb-3",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs(ge,{className:"text-lg flex items-center gap-2",children:[i.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),e.title,!e.isActive&&i.jsx(ee,{variant:"secondary",className:"text-xs",children:"Paused"})]}),i.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[i.jsxs(ee,{variant:"outline",className:"text-xs",children:[i.jsx("span",{className:"mr-1",children:s.icon}),s.label]}),e.targetDate&&i.jsxs(ee,{variant:"outline",className:"text-xs",children:[i.jsx(Je,{className:"w-3 h-3 mr-1"}),KE(e.targetDate)]})]})]}),i.jsxs(Zi,{children:[i.jsx(eo,{asChild:!0,children:i.jsx($,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:i.jsx(Zk,{className:"h-4 w-4"})})}),i.jsx(to,{className:"w-48 p-2",align:"end",children:i.jsxs("div",{className:"space-y-1",children:[t&&i.jsxs($,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:()=>t(e),children:[i.jsx(Ue,{className:"w-4 h-4 mr-2"}),"Edit Goal"]}),i.jsx($,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:a,children:e.isActive?i.jsxs(i.Fragment,{children:[i.jsx(ej,{className:"w-4 h-4 mr-2"}),"Pause Goal"]}):i.jsxs(i.Fragment,{children:[i.jsx(rj,{className:"w-4 h-4 mr-2"}),"Resume Goal"]})}),i.jsxs($,{variant:"ghost",size:"sm",className:"w-full justify-start text-red-600 hover:text-red-700",onClick:o,children:[i.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Delete Goal"]})]})})]})]})}),i.jsxs(q,{className:"pt-0",children:[e.description&&i.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:e.description}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsx("span",{className:"font-medium",children:"Progress"}),i.jsxs("span",{className:"text-muted-foreground",children:[e.progress.completedTodos," / ",e.progress.totalTodos," tasks"]})]}),i.jsx(as,{value:e.progress.progressPercentage,className:"h-2"}),i.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[i.jsxs("span",{children:[e.progress.progressPercentage,"% complete"]}),e.progress.totalTodos===0&&i.jsx("span",{className:"text-orange-600",children:"No tasks linked yet"})]})]})]})]})},QE=({value:e,onChange:t,disabled:r=!1,className:n=""})=>{const{getActiveGoals:s}=bc(),a=s(),o=a.find(u=>u.id===e),l=u=>{t(u)},c=u=>{u.stopPropagation(),t(void 0)};return a.length===0?i.jsxs("div",{className:`text-sm text-muted-foreground ${n}`,children:["No active goals. ",i.jsx("a",{href:"/goals",className:"text-primary hover:underline",children:"Create one"})," to link tasks."]}):i.jsxs(Zi,{children:[i.jsx(eo,{asChild:!0,children:i.jsxs($,{variant:"outline",className:`w-full justify-between ${n}`,disabled:r,type:"button",children:[o?i.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:o.color}}),i.jsx("span",{className:"truncate",children:o.title}),i.jsx(ee,{variant:"outline",className:"text-xs ml-auto",children:sh(o.category).icon}),i.jsx(mn,{className:"h-4 w-4 hover:bg-muted rounded",onClick:c})]}):i.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[i.jsx(Ue,{className:"h-4 w-4"}),i.jsx("span",{children:"Link to goal (optional)"})]}),i.jsx(cf,{className:"h-4 w-4 opacity-50"})]})}),i.jsxs(to,{className:"w-full p-2",align:"start",children:[i.jsxs("div",{className:"space-y-1",children:[!o&&i.jsxs($,{variant:"ghost",className:"w-full justify-start text-muted-foreground",onClick:()=>t(void 0),type:"button",children:[i.jsx(mn,{className:"h-4 w-4 mr-2"}),"No goal"]}),a.map(u=>{const d=sh(u.category);return i.jsx($,{variant:e===u.id?"default":"ghost",className:"w-full justify-start",onClick:()=>l(u.id),type:"button",children:i.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[i.jsx("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:u.color}}),i.jsx("span",{className:"truncate",children:u.title}),i.jsx(ee,{variant:"outline",className:"text-xs ml-auto",children:d.icon})]})},u.id)})]}),a.length>0&&i.jsx("div",{className:"border-t mt-2 pt-2",children:i.jsx("a",{href:"/goals",className:"text-xs text-muted-foreground hover:text-primary block text-center",children:"Manage goals "})})]})]})},JE=()=>{const[e,t]=k.useState(!1),{goals:r,loadGoals:n,getGoalsWithProgress:s,getActiveGoals:a}=bc(),{todos:o,loadTodos:l}=is();k.useEffect(()=>{n(),l()},[n,l]);const c=s(o),u=a(),d=r.length,f=u.length,h=c.filter(g=>g.progress.progressPercentage===100).length,m=c.length>0?Math.round(c.reduce((g,p)=>g+p.progress.progressPercentage,0)/c.length):0,x=()=>{t(!1)},y=g=>{console.log("Edit goal:",g),t(!0)},w=()=>{t(!1)};return e?i.jsxs("div",{className:"container mx-auto p-6 max-w-4xl",children:[i.jsx("div",{className:"mb-6",children:i.jsx($,{variant:"outline",onClick:w,className:"mb-4",children:" Back to Goals"})}),i.jsx(VE,{onSuccess:x,onCancel:w})]}):i.jsxs("div",{className:"container mx-auto p-6 max-w-6xl",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{children:[i.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[i.jsx(Ue,{className:"h-8 w-8 text-primary"}),"Goals"]}),i.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your objectives and link them to daily tasks"})]}),i.jsxs($,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[i.jsx(Ot,{className:"h-4 w-4"}),"New Goal"]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[i.jsx(G,{children:i.jsx(q,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{className:"h-5 w-5 text-blue-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Goals"}),i.jsx("p",{className:"text-2xl font-bold",children:d})]})]})})}),i.jsx(G,{children:i.jsx(q,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(St,{className:"h-5 w-5 text-green-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Active"}),i.jsx("p",{className:"text-2xl font-bold",children:f})]})]})})}),i.jsx(G,{children:i.jsx(q,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ji,{className:"h-5 w-5 text-purple-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Completed"}),i.jsx("p",{className:"text-2xl font-bold",children:h})]})]})})}),i.jsx(G,{children:i.jsx(q,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"h-5 w-5 rounded-full bg-gradient-to-r from-blue-500 to-purple-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Progress"}),i.jsxs("p",{className:"text-2xl font-bold",children:[m,"%"]})]})]})})})]}),c.length===0?i.jsx(G,{className:"text-center py-12",children:i.jsxs(q,{children:[i.jsx(Ue,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No goals yet"}),i.jsx("p",{className:"text-muted-foreground mb-4",children:"Create your first goal to start organizing your todos around meaningful objectives."}),i.jsxs($,{onClick:()=>t(!0),className:"flex items-center gap-2",children:[i.jsx(Ot,{className:"h-4 w-4"}),"Create Your First Goal"]})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(g=>i.jsx(YE,{goal:g,onEdit:y},g.id))}),c.length>0&&c.some(g=>g.progress.totalTodos===0)&&i.jsx(G,{className:"mt-8 bg-blue-50 border-blue-200",children:i.jsx(q,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("div",{className:"h-5 w-5 rounded-full bg-blue-500 flex items-center justify-center flex-shrink-0 mt-0.5",children:i.jsx("span",{className:"text-white text-xs font-bold",children:""})}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-semibold text-blue-900 mb-1",children:"Link your todos to goals"}),i.jsx("p",{className:"text-sm text-blue-700",children:"Some of your goals don't have any linked tasks yet. When creating or editing todos, select a goal to track your progress automatically."})]})]})})})]})};function XE(){const[e,t]=k.useState(""),[r,n]=k.useState("medium"),[s,a]=k.useState("other"),[o,l]=k.useState(5),[c,u]=k.useState(),[d,f]=k.useState(""),[h,m]=k.useState(),[x,y]=k.useState(""),[w,g]=k.useState(!1),[p,v]=k.useState(!1),[b,j]=k.useState("all"),[S,N]=k.useState("all"),[_,E]=k.useState("created"),[P,C]=k.useState("all"),{todos:A,templates:Y,addTodo:H,loadTodos:_e,loadTemplates:we,createTodoFromTemplate:z,getOverdueTodos:O,isLoading:M}=is();k.useEffect(()=>{A.length===0&&_e(),Y.length===0&&we()},[A.length,Y.length,_e,we]);const U=A.filter(L=>{if(b!=="all"&&L.priority!==b||S!=="all"&&L.category!==S)return!1;if(P!=="all"){const Ee=L.points||5;if(P==="low"&&Ee>3||P==="medium"&&(Ee<=3||Ee>7)||P==="high"&&Ee<=7)return!1}return!0}),X=(()=>{switch(_){case"priority":return FE(U);case"dueDate":return WE(U);case"points":return[...U].sort((L,Ee)=>(Ee.points||5)-(L.points||5));default:return[...U].sort((L,Ee)=>new Date(Ee.createdAt).getTime()-new Date(L.createdAt).getTime())}})(),se=X.filter(L=>!L.done),Xt=X.filter(L=>L.done),Rt=O(),os=async()=>{if(!e.trim())return;const L={summary:e.trim(),done:!1,priority:r,category:s,points:o,goalId:c,dueDate:d||void 0,dueDateTime:h||void 0,description:x.trim()||void 0,descriptionFormat:"markdown",subtasks:[],createdAt:new Date().toISOString()};try{await H(L),t(""),y(""),f(""),m(void 0),l(5),u(void 0),g(!1),v(!1)}catch(Ee){console.error("Failed to add todo:",Ee)}},or=L=>{L.key==="Enter"&&os()},ls=async L=>{try{await z(L)}catch(Ee){console.error("Failed to create todo from template:",Ee)}};return i.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white",children:"Tasks"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Manage your daily tasks and goals"})]}),Rt.length>0&&i.jsx(G,{className:"border-red-200 bg-red-50 dark:border-red-800 dark:bg-red-950",children:i.jsx(q,{className:"pt-4",children:i.jsxs("div",{className:"flex items-center gap-2 text-red-700 dark:text-red-300",children:[i.jsx(Xn,{className:"h-4 w-4 flex-shrink-0"}),i.jsxs("span",{className:"font-medium text-sm",children:[Rt.length," overdue task",Rt.length>1?"s":""]})]})})}),A.length>0&&i.jsx(G,{className:"border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950",children:i.jsx(q,{className:"pt-4",children:i.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[i.jsxs("div",{className:"grid grid-cols-3 gap-4 w-full sm:w-auto",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-700 dark:text-blue-300",children:A.filter(L=>L.done).reduce((L,Ee)=>L+(Ee.points||5),0)}),i.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Points Earned"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-700 dark:text-blue-300",children:A.reduce((L,Ee)=>L+(Ee.points||5),0)}),i.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Total Points"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg sm:text-2xl font-bold text-blue-700 dark:text-blue-300",children:se.reduce((L,Ee)=>L+(Ee.points||5),0)}),i.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400",children:"Remaining"})]})]}),i.jsxs("div",{className:"text-center w-full sm:w-auto",children:[i.jsxs("p",{className:"text-sm font-medium text-blue-700 dark:text-blue-300",children:[Math.round(A.filter(L=>L.done).length/A.length*100),"% Complete"]}),i.jsx("div",{className:"mt-1 h-2 w-full sm:w-24 rounded-full bg-blue-200 dark:bg-blue-800",children:i.jsx("div",{className:"h-2 rounded-full bg-blue-500 transition-all",style:{width:`${A.filter(L=>L.done).length/A.length*100}%`}})})]})]})})}),i.jsxs(G,{children:[i.jsx(me,{className:"pb-3",children:i.jsxs(ge,{className:"flex items-center gap-2 text-lg",children:[i.jsx(Ot,{className:"h-5 w-5"}),"Add New Task"]})}),i.jsxs(q,{className:"space-y-4",children:[i.jsx("div",{className:"space-y-2",children:i.jsx(fe,{type:"text",placeholder:"What do you need to do?",value:e,onChange:L=>t(L.target.value),onKeyPress:or,className:"text-base",autoComplete:"off"})}),i.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Priority"}),i.jsx("select",{value:r,onChange:L=>n(L.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:ti.map(L=>i.jsxs("option",{value:L.value,children:[L.icon," ",L.label]},L.value))})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Category"}),i.jsx("select",{value:s,onChange:L=>a(L.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:ri.map(L=>i.jsxs("option",{value:L.value,children:[L.icon," ",L.label]},L.value))})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Points"}),i.jsx(UE,{value:o,onChange:l,className:"text-sm"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Goal"}),i.jsx(QE,{value:c,onChange:u})]})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[i.jsxs($,{type:"button",variant:"outline",size:"sm",onClick:()=>g(!w),className:"flex-1 sm:flex-none",children:[i.jsx(Je,{className:"mr-2 h-4 w-4"}),w?"Hide":"Show"," Advanced"]}),i.jsxs($,{type:"button",variant:"outline",size:"sm",onClick:()=>v(!p),className:"flex-1 sm:flex-none",children:[i.jsx(W0,{className:"mr-2 h-4 w-4"}),p?"Hide":"Add"," Description"]})]}),w&&i.jsx("div",{className:"space-y-3 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Due Date"}),i.jsx(BE,{value:h,onChange:m,className:"w-full"})]})}),p&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Description"}),i.jsx(uv,{value:x,onChange:y,placeholder:"Add task details, notes, or links...",className:"min-h-[100px]"})]}),i.jsxs($,{onClick:os,className:"w-full sm:w-auto min-h-[44px]",disabled:!e.trim()||M,children:[i.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Add Task"]})]})]}),i.jsxs(G,{children:[i.jsx(me,{className:"pb-3",children:i.jsxs(ge,{className:"flex items-center gap-2 text-lg",children:[i.jsx(Bk,{className:"h-5 w-5"}),"Filters & Sort"]})}),i.jsx(q,{children:i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Priority"}),i.jsxs("select",{value:b,onChange:L=>j(L.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[i.jsx("option",{value:"all",children:"All Priorities"}),ti.map(L=>i.jsxs("option",{value:L.value,children:[L.icon," ",L.label]},L.value))]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Category"}),i.jsxs("select",{value:S,onChange:L=>N(L.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[i.jsx("option",{value:"all",children:"All Categories"}),ri.map(L=>i.jsxs("option",{value:L.value,children:[L.icon," ",L.label]},L.value))]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Points"}),i.jsxs("select",{value:P,onChange:L=>C(L.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[i.jsx("option",{value:"all",children:"All Points"}),i.jsx("option",{value:"low",children:"Low (1-3 pts)"}),i.jsx("option",{value:"medium",children:"Medium (4-7 pts)"}),i.jsx("option",{value:"high",children:"High (8+ pts)"})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Sort By"}),i.jsxs("select",{value:_,onChange:L=>E(L.target.value),className:"w-full px-2 py-1.5 text-sm rounded border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800",children:[i.jsx("option",{value:"created",children:"Created Date"}),i.jsx("option",{value:"priority",children:"Priority"}),i.jsx("option",{value:"dueDate",children:"Due Date"}),i.jsx("option",{value:"points",children:"Points"})]})]})]})})]}),i.jsxs("div",{className:"space-y-4",children:[Y.length>0&&i.jsxs(G,{children:[i.jsx(me,{className:"pb-3",children:i.jsxs(ge,{className:"flex items-center gap-2 text-lg",children:[i.jsx(hf,{className:"h-5 w-5"}),"Quick Templates"]})}),i.jsx(q,{children:i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:Y.slice(0,4).map(L=>{var Ee,Mf;return i.jsx($,{variant:"outline",size:"sm",onClick:()=>ls(L.id),className:"justify-start text-left h-auto py-2 px-3",children:i.jsxs("div",{className:"flex items-center gap-2 w-full",children:[i.jsx("span",{className:"text-lg",children:(Ee=ri.find(Sc=>Sc.value===L.category))==null?void 0:Ee.icon}),i.jsxs("div",{className:"min-w-0 flex-1",children:[i.jsx("div",{className:"font-medium text-sm truncate",children:L.text}),i.jsx("div",{className:"text-xs text-gray-500",children:(Mf=ti.find(Sc=>Sc.value===L.priority))==null?void 0:Mf.label})]})]})},L.id)})})})]}),se.length>0&&i.jsxs(G,{children:[i.jsx(me,{className:"pb-3",children:i.jsxs(ge,{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-lg",children:"Active Tasks"}),i.jsx(ee,{variant:"secondary",className:"text-xs",children:se.length})]})}),i.jsx(q,{className:"space-y-2",children:se.map(L=>i.jsx(Vg,{todo:L},L.id))})]}),Xt.length>0&&i.jsxs(G,{children:[i.jsx(me,{className:"pb-3",children:i.jsxs(ge,{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-lg",children:"Completed Tasks"}),i.jsx(ee,{variant:"secondary",className:"text-xs",children:Xt.length})]})}),i.jsx(q,{className:"space-y-2",children:Xt.map(L=>i.jsx(Vg,{todo:L},L.id))})]}),A.length===0&&!M&&i.jsx(G,{className:"text-center py-12",children:i.jsxs(q,{children:[i.jsx(lf,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No tasks yet"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first task above"})]})})]})]})}const Rf=kn((e,t)=>({notes:[],isLoading:!1,error:null,addNote:async r=>{try{e({isLoading:!0,error:null});const n=te.getState().user,s=n==null?void 0:n.id,a=new Date().toISOString(),o=await Lo.addNote({...r,createdAt:a,updatedAt:a},s);e(l=>({notes:[o,...l.notes],isLoading:!1})),console.log(" Note saved successfully:",{local:!0,cloud:!!s,note:o})}catch(n){throw console.error(" Failed to save note:",n),e({error:n instanceof Error?n.message:"Failed to add note",isLoading:!1}),n}},updateNote:async(r,n)=>{try{e({isLoading:!0,error:null});const s=te.getState().user,a=s==null?void 0:s.id;await Lo.updateNote(r,n,a),e(o=>({notes:o.notes.map(l=>l.id===r?{...l,...n,updatedAt:new Date().toISOString()}:l).sort((l,c)=>new Date(c.updatedAt).getTime()-new Date(l.updatedAt).getTime()),isLoading:!1})),console.log(" Note updated successfully:",{local:!0,cloud:!!a,id:r,updates:n})}catch(s){throw console.error(" Failed to update note:",s),e({error:s instanceof Error?s.message:"Failed to update note",isLoading:!1}),s}},deleteNote:async r=>{try{e({isLoading:!0,error:null});const n=te.getState().user,s=n==null?void 0:n.id;await Lo.deleteNote(r,s),e(a=>({notes:a.notes.filter(o=>o.id!==r),isLoading:!1})),console.log(" Note deleted successfully:",{local:!0,cloud:!!s,id:r})}catch(n){throw console.error(" Failed to delete note:",n),e({error:n instanceof Error?n.message:"Failed to delete note",isLoading:!1}),n}},loadNotes:async()=>{try{e({isLoading:!0,error:null});const r=te.getState().user,n=r==null?void 0:r.id,s=await Lo.getAllNotes(n);e({notes:s,isLoading:!1}),console.log(" Notes loaded successfully:",{count:s.length,source:n?"Supabase":"Local",userId:n})}catch(r){console.error(" Failed to load notes:",r),e({error:r instanceof Error?r.message:"Failed to load notes",isLoading:!1})}},hydrate:async()=>{await t().loadNotes()},clearError:()=>{e({error:null})}})),ZE=async()=>{await Rf.getState().hydrate()};function eT({note:e}){const[t,r]=k.useState(!1),[n,s]=k.useState(!1),[a,o]=k.useState(e.title),[l,c]=k.useState(e.content),{updateNote:u,deleteNote:d}=Rf(),f=async()=>{if(a.trim())try{await u(e.id,{title:a.trim(),content:l.trim()}),s(!1)}catch(w){console.error("Failed to update note:",w)}},h=()=>{o(e.title),c(e.content),s(!1)},m=()=>{window.confirm(`Delete note: "${e.title}"?`)&&d(e.id)},x=Lf({onSwipedLeft:()=>{n||m()},preventScrollOnSwipe:!0,trackMouse:!0}),y=w=>{const g=new Date(w);return g.toLocaleDateString("en-US",{month:"short",day:"numeric",year:g.getFullYear()!==new Date().getFullYear()?"numeric":void 0})};return n?i.jsx(G,{className:"border bg-card",children:i.jsxs(q,{className:"p-4",children:[i.jsx("input",{type:"text",value:a,onChange:w=>o(w.target.value),className:"mb-3 w-full rounded-md border border-input bg-background px-3 py-2 text-sm font-medium focus:outline-none focus:ring-2 focus:ring-ring",placeholder:"Note title..."}),i.jsx("textarea",{value:l,onChange:w=>c(w.target.value),className:"mb-3 w-full resize-none rounded-md border border-input bg-background px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-ring",rows:4,placeholder:"Note content..."}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx("button",{onClick:h,className:"rounded-md border border-input px-3 py-1 text-sm transition-colors hover:bg-muted",children:"Cancel"}),i.jsx("button",{onClick:f,disabled:!a.trim(),className:"rounded-md bg-primary px-3 py-1 text-sm text-primary-foreground transition-colors hover:bg-primary/90 disabled:opacity-50",children:"Save"})]})]})}):i.jsx(G,{...x,className:`cursor-pointer transition-all duration-150 ${t?"scale-95 bg-muted":"hover:bg-muted/50"}`,onTouchStart:()=>r(!0),onTouchEnd:()=>r(!1),onMouseDown:()=>r(!0),onMouseUp:()=>r(!1),onMouseLeave:()=>r(!1),onClick:()=>s(!0),children:i.jsx(q,{className:"px-4 py-3",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{className:"mr-3 min-w-0 flex-1",children:[i.jsx("h3",{className:"mb-1 truncate text-sm font-medium",children:e.title}),e.content&&i.jsx("p",{className:"line-clamp-2 text-sm text-muted-foreground",children:e.content}),i.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-muted-foreground",children:[i.jsx(Je,{className:"h-3 w-3"}),i.jsx("span",{children:y(e.updatedAt)})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(B0,{className:"h-4 w-4 text-muted-foreground"}),i.jsx("div",{className:"text-xs text-muted-foreground opacity-50",children:"Swipe to delete"})]})]})})})}function tT(){const[e,t]=k.useState(""),[r,n]=k.useState(""),[s,a]=k.useState(""),[o,l]=k.useState(!1),{notes:c,addNote:u,loadNotes:d,isLoading:f}=Rf();k.useEffect(()=>{c.length===0&&d()},[c.length,d]);const h=c.filter(y=>y.title.toLowerCase().includes(s.toLowerCase())||y.content.toLowerCase().includes(s.toLowerCase())),m=async()=>{if(e.trim())try{await u({title:e.trim(),content:r.trim(),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),t(""),n(""),l(!1)}catch(y){console.error("Failed to add note:",y)}},x=()=>{t(""),n(""),l(!1)};return i.jsxs("div",{className:"container mx-auto px-4 pb-24 pt-4",children:[i.jsx("h2",{className:"mb-4 text-lg font-semibold",children:"Notes"}),i.jsxs("div",{className:"relative mb-4",children:[i.jsx(sj,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 transform text-muted-foreground"}),i.jsx(fe,{placeholder:"Search notes...",value:s,onChange:y=>a(y.target.value),className:"pl-10"})]}),o?i.jsxs("div",{className:"mb-6 rounded-lg border bg-card p-4",children:[i.jsx(fe,{placeholder:"Note title...",value:e,onChange:y=>t(y.target.value),className:"mb-3",disabled:f}),i.jsx(Xi,{placeholder:"Write your note...",value:r,onChange:y=>n(y.target.value),className:"mb-3 min-h-[120px]",disabled:f}),i.jsxs("div",{className:"flex justify-end gap-2",children:[i.jsx($,{variant:"outline",onClick:x,disabled:f,children:"Cancel"}),i.jsx($,{onClick:m,disabled:f||!e.trim(),children:"Save Note"})]})]}):i.jsxs($,{onClick:()=>l(!0),className:"mb-6 w-full",disabled:f,children:[i.jsx(Ot,{className:"mr-2 h-4 w-4"}),"Add New Note"]}),f&&i.jsx("p",{className:"text-muted-foreground",children:"Loading..."}),!f&&i.jsx(i.Fragment,{children:h.length>0?i.jsx("div",{className:"space-y-3",children:h.map(y=>i.jsx(eT,{note:y},y.id))}):s?i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx("p",{className:"mb-2 text-4xl",children:""}),i.jsx("p",{children:"No notes found"}),i.jsx("p",{className:"text-sm",children:"Try a different search term"})]}):i.jsxs("div",{className:"text-center text-muted-foreground",children:[i.jsx("p",{className:"mb-2 text-4xl",children:""}),i.jsx("p",{children:"No notes yet"}),i.jsx("p",{className:"text-sm",children:"Create your first note above"})]})})]})}k.lazy(()=>Or(()=>import("./WeightPage-BuBXc_Ey.js"),[]));function rT(){var d;const e=Wi(),{weights:t,isLoading:r}=Lt(),{isMobile:n}=It(),s=Ir({scale:.98,haptic:!0}),a=new Date;a.setDate(a.getDate()-30);const o=t.filter(f=>new Date(f.dateISO)>=a).slice(0,30),l=()=>{e("/health")},u=(()=>{if(o.length<2)return null;const f=o[o.length-1],m=o[0].kg-f.kg;return Math.abs(m)<.1?{type:"stable",diff:0}:{type:m>0?"up":"down",diff:Math.abs(m),days:o.length}})();return r?i.jsxs("div",{className:"cyber-card cursor-pointer mobile-card mobile-responsive",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3 mobile-layout",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-600 bg-gray-700 touch-target",children:i.jsx(Gn,{className:"text-ki-green cyber-icon h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mobile-heading",children:"Weight Trend"}),i.jsx("p",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Loading..."})]})]}),i.jsx("div",{className:"flex h-16 items-center justify-center",children:i.jsx("div",{className:"shimmer h-8 w-full rounded bg-gray-700"})})]}):i.jsxs("div",{ref:s.elementRef,className:`cyber-card flex h-full cursor-pointer flex-col transition-all duration-200 mobile-card mobile-responsive touch-friendly ${n?"galaxy-s24-ultra-optimized":""}`,onClick:l,onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),l())},role:"button",tabIndex:0,"aria-label":"Weight trend card - view full weight history",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3 mobile-layout",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-600 bg-gray-700 touch-target",children:i.jsx(Gn,{className:"text-ki-green cyber-icon glow-ki h-5 w-5 transition-all duration-200"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mobile-heading",children:"Weight Trend"}),i.jsx("p",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"30-day analysis"})]})]}),i.jsx("div",{className:"flex flex-1 flex-col",children:o.length>0?i.jsxs("div",{className:"flex flex-1 flex-col space-y-4",children:[i.jsx("div",{className:"relative h-12 overflow-hidden rounded-lg border border-gray-700 bg-gray-900",children:i.jsx("div",{className:"absolute inset-0 p-2",children:i.jsxs("svg",{viewBox:"0 0 100 20",className:"h-full w-full",children:[i.jsx("defs",{children:i.jsxs("linearGradient",{id:"sparklineGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[i.jsx("stop",{offset:"0%",stopColor:"var(--ki-green)"}),i.jsx("stop",{offset:"100%",stopColor:"var(--plasma-cyan)"})]})}),o.length>1&&i.jsx("polyline",{points:o.slice(0,10).map((f,h)=>{const m=h/(Math.min(o.length,10)-1)*100,x=Math.min(...o.slice(0,10).map(p=>p.kg)),w=Math.max(...o.slice(0,10).map(p=>p.kg))-x||1,g=20-(f.kg-x)/w*16;return`${m},${g}`}).join(" "),fill:"none",stroke:"url(#sparklineGradient)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"cyber-glow"})]})})}),i.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-gray-700 bg-gray-900 p-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[u&&u.type==="up"&&i.jsx(St,{className:"cyber-icon h-4 w-4 text-red-400"}),u&&u.type==="down"&&i.jsx(Gi,{className:"text-ki-green cyber-icon glow-ki h-4 w-4"}),u&&u.type==="stable"&&i.jsx(zi,{className:"text-plasma-cyan cyber-icon glow-cyan h-4 w-4"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-mono text-sm text-white mobile-small",children:u?u.type==="stable"?"Stable":`${u.type==="up"?"+":"-"}${de(u.diff).toFixed(1)}lbs`:"No trend data"}),i.jsxs("div",{className:"text-xs text-gray-400 mobile-caption",children:[o.length," entries"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"gradient-text-ki font-mono text-sm font-semibold mobile-small",children:[de(((d=o[0])==null?void 0:d.kg)||0).toFixed(1),"lbs"]}),i.jsx("div",{className:"text-xs text-gray-400 mobile-caption",children:"current"})]})]}),i.jsx("div",{className:"mt-auto text-center font-mono text-xs text-gray-400",children:" Tap to view full weight history"})]}):i.jsxs("div",{className:"flex flex-1 flex-col justify-center space-y-4 text-center",children:[i.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-lg border border-gray-700 bg-gray-900",children:i.jsx(Gn,{className:"cyber-icon h-8 w-8 text-gray-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-inter mb-2 text-gray-400",children:"No weight data available"}),i.jsx("div",{className:"text-ki-green cursor-pointer font-mono text-sm",children:" Start tracking to see trends"})]})]})})]})}function nT(){const e=Wi(),{weights:t,isLoading:r}=Lt(),{isMobile:n}=It(),s=Ir({scale:.98,haptic:!0}),a=()=>{e("/health")},o=new Date().toISOString().split("T")[0],l=t.find(m=>m.dateISO===o),c=new Date;c.setDate(c.getDate()-1);const u=c.toISOString().split("T")[0],d=t.find(m=>m.dateISO===u),h=(()=>{if(!l||!d)return null;const m=l.kg-d.kg;return Math.abs(m)<.1?{type:"stable",diff:0}:{type:m>0?"up":"down",diff:Math.abs(m)}})();return r?i.jsxs("div",{className:"cyber-card flex h-full cursor-pointer flex-col mobile-card mobile-responsive",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3 mobile-layout",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-600 bg-gray-700 touch-target",children:i.jsx(dn,{className:"text-ki-green cyber-icon h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mobile-body",children:"Today's Weight"}),i.jsx("p",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Loading..."})]})]}),i.jsx("div",{className:"flex flex-1 items-center justify-center",children:i.jsx("div",{className:"shimmer h-8 w-full rounded bg-gray-700"})})]}):i.jsxs("div",{ref:s.elementRef,className:`cyber-card transition-cyber flex h-full cursor-pointer flex-col mobile-card mobile-responsive touch-friendly ${n?"galaxy-s24-ultra-optimized":""}`,onClick:a,onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),a())},role:"button",tabIndex:0,"aria-label":"Today's weight card - navigate to health hub",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3 mobile-layout",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-600 bg-gray-700 touch-target",children:i.jsx(dn,{className:"text-ki-green cyber-icon glow-ki h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mobile-heading",children:"Today's Weight"}),i.jsx("p",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Current status"})]})]}),i.jsx("div",{className:"flex flex-1 flex-col",children:l?i.jsxs("div",{className:"flex flex-1 flex-col justify-center space-y-4",children:[i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"metric-large gradient-text-ki metric-display mobile-large",children:[de(l.kg).toFixed(1),i.jsx("span",{className:"font-inter ml-1 text-lg text-gray-400 mobile-body",children:"lbs"})]})}),h&&i.jsxs("div",{className:"flex items-center justify-center gap-2 rounded-lg border border-gray-700 bg-gray-900 p-3 mobile-card",children:[h.type==="up"&&i.jsxs(i.Fragment,{children:[i.jsx(St,{className:"cyber-icon h-4 w-4 text-red-400"}),i.jsxs("span",{className:"font-mono text-sm text-red-400 mobile-small",children:["+",de(h.diff).toFixed(1),"lbs from yesterday"]})]}),h.type==="down"&&i.jsxs(i.Fragment,{children:[i.jsx(Gi,{className:"text-ki-green cyber-icon glow-ki h-4 w-4"}),i.jsxs("span",{className:"text-ki-green font-mono text-sm mobile-small",children:["-",de(h.diff).toFixed(1),"lbs from yesterday"]})]}),h.type==="stable"&&i.jsxs(i.Fragment,{children:[i.jsx(zi,{className:"text-plasma-cyan cyber-icon glow-cyan h-4 w-4"}),i.jsx("span",{className:"text-plasma-cyan font-mono text-sm mobile-small",children:"No change from yesterday"})]})]}),i.jsxs("div",{className:"mt-auto text-center font-mono text-xs text-gray-400 mobile-caption",children:["Recorded on ",new Date(l.dateISO).toLocaleDateString()]})]}):i.jsxs("div",{className:"flex flex-1 flex-col justify-center space-y-4 text-center mobile-layout",children:[i.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-lg border border-gray-700 bg-gray-900 touch-target",children:i.jsx(dn,{className:"cyber-icon h-8 w-8 text-gray-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-inter mb-2 text-gray-400 mobile-body",children:"No weight logged today"}),i.jsx("div",{className:"text-ki-green cursor-pointer font-mono text-sm mobile-small touch-friendly",children:" Tap to log your weight"})]}),d&&i.jsx("div",{className:"mt-auto rounded-lg border border-gray-700 bg-gray-900 p-3 mobile-card",children:i.jsxs("div",{className:"font-mono text-xs text-gray-500 mobile-caption",children:["Yesterday:"," ",i.jsxs("span",{className:"text-gray-300",children:[de(d.kg).toFixed(1),"lbs"]})]})})]})})]})}const Yg=Object.freeze(Object.defineProperty({__proto__:null,initializeTasksDatabase:Df,initializeTasksStore:IE,tasksRepo:Se,useTasksStore:is},Symbol.toStringTag,{value:"Module"})),sT={success:{icon:ji,color:"text-ki-green",border:"border-ki-green",bg:"bg-ki-green/10",glow:"ki-glow-soft"},warning:{icon:Pl,color:"text-yellow-400",border:"border-yellow-400",bg:"bg-yellow-400/10",glow:"shadow-[0_0_8px_rgba(251,191,36,0.3)]"},error:{icon:G0,color:"text-red-400",border:"border-red-400",bg:"bg-red-400/10",glow:"shadow-[0_0_8px_rgba(239,68,68,0.3)]"},info:{icon:z0,color:"text-plasma-cyan",border:"border-plasma-cyan",bg:"bg-plasma-cyan/10",glow:"cyan-glow"},pending:{icon:Sr,color:"text-gray-400",border:"border-gray-400",bg:"bg-gray-400/10",glow:""},active:{icon:qi,color:"text-hyper-magenta",border:"border-hyper-magenta",bg:"bg-hyper-magenta/10",glow:"magenta-glow"}},Un=k.forwardRef(({className:e,variant:t="info",size:r="md",showIcon:n=!0,children:s,...a},o)=>{const l=sT[t],c=l.icon,u={sm:"px-2 py-1 text-xs gap-1",md:"px-3 py-1.5 text-sm gap-1.5",lg:"px-4 py-2 text-base gap-2"},d={sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5"};return i.jsxs("div",{className:le("inline-flex items-center rounded-full border font-mono font-medium transition-all duration-200",u[r],l.color,l.border,l.bg,l.glow,"hover:scale-105",e),ref:o,...a,children:[n&&i.jsx(c,{className:d[r]}),i.jsx("span",{children:s})]})});Un.displayName="StatusChip";function aT(){const e=Wi(),{todos:t,isLoading:r}=is(),{isMobile:n}=It(),s=Ir({scale:.98,haptic:!0}),a=t.length,o=t.filter(f=>f.done).length,l=a-o,c=a>0?o/a*100:0,u=()=>{e("/todo")};if(r)return i.jsxs("div",{className:"cyber-card flex h-full cursor-pointer flex-col mobile-card mobile-responsive",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3 mobile-layout",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-600 bg-gray-700 touch-target",children:i.jsx(Sr,{className:"text-ki-green cyber-icon h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mobile-heading",children:"Quest Progress"}),i.jsx("p",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Loading..."})]})]}),i.jsx("div",{className:"flex flex-1 items-center justify-center",children:i.jsx("div",{className:"shimmer h-20 w-20 rounded-full bg-gray-700"})})]});const d=()=>a===0?"pending":c===100?"success":c>=75?"active":c>=50?"info":"warning";return i.jsxs("div",{ref:s.elementRef,className:`cyber-card transition-cyber flex h-full cursor-pointer flex-col mobile-card mobile-responsive touch-friendly ${n?"galaxy-s24-ultra-optimized":""}`,onClick:u,onKeyDown:f=>{(f.key==="Enter"||f.key===" ")&&(f.preventDefault(),u())},role:"button",tabIndex:0,"aria-label":"Quest progress card - view todo list",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3 mobile-layout",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-600 bg-gray-700 touch-target",children:i.jsx(Sr,{className:"text-ki-green cyber-icon glow-ki h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mobile-heading",children:"Quest Progress"}),i.jsx("p",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Today's missions"})]})]}),i.jsx("div",{className:"flex flex-1 flex-col",children:a>0?i.jsxs("div",{className:"flex flex-1 flex-col justify-center space-y-4",children:[i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(as,{value:c,variant:"ring",size:"lg",className:"h-24 w-24"})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-900 p-3 text-center",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-center gap-1.5",children:[i.jsx(lf,{className:"text-ki-green cyber-icon h-4 w-4"}),i.jsx("span",{className:"text-ki-green font-mono text-sm",children:"Done"})]}),i.jsx("div",{className:"metric-medium gradient-text-ki",children:o})]}),i.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-900 p-3 text-center",children:[i.jsxs("div",{className:"mb-1 flex items-center justify-center gap-1.5",children:[i.jsx(Fk,{className:"cyber-icon h-4 w-4 text-gray-400"}),i.jsx("span",{className:"font-mono text-sm text-gray-400",children:"Left"})]}),i.jsx("div",{className:"metric-medium text-gray-300",children:l})]})]}),i.jsx("div",{className:"mt-auto flex justify-center",children:i.jsx(Un,{variant:d(),size:"md",children:c===100?"Complete!":c>=75?"Almost done":c>=50?"Making progress":c>0?"Getting started":"Ready to begin"})})]}):i.jsxs("div",{className:"flex flex-1 flex-col justify-center space-y-4 text-center",children:[i.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-lg border border-gray-700 bg-gray-900",children:i.jsx(Sr,{className:"cyber-icon h-8 w-8 text-gray-600"})}),i.jsxs("div",{children:[i.jsx("div",{className:"font-inter mb-2 text-gray-400",children:"No quests active"}),i.jsx("div",{className:"text-ki-green cursor-pointer font-mono text-sm",children:" Tap to create your first quest"})]}),i.jsx("div",{className:"mt-auto",children:i.jsx(Un,{variant:"pending",size:"md",children:"Awaiting missions"})})]})})]})}function iT(){const{isMobile:t}=It(),r=Ir({scale:.98,haptic:!0}),n=()=>{console.log("Streak card clicked - showing current stats")},s=()=>U0,a=()=>"Begin your cyber journey",o=()=>"text-ki-green",l=s();return i.jsxs("div",{ref:r.elementRef,className:`cyber-card transition-cyber flex h-full cursor-pointer flex-col mobile-card mobile-responsive touch-friendly ${t?"galaxy-s24-ultra-optimized":""}`,onClick:n,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),n())},role:"button",tabIndex:0,"aria-label":"Momentum streak card",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3 mobile-layout",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-600 bg-gray-700 touch-target",children:i.jsx(l,{className:`h-5 w-5 ${o()}`})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mobile-heading",children:"Momentum"}),i.jsx("p",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"Daily streak"})]})]}),i.jsxs("div",{className:"flex flex-1 flex-col justify-center space-y-4 text-center",children:[i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"gradient-text-ki font-cyber mb-2 text-4xl font-bold",children:0}),i.jsx("div",{className:"font-mono text-sm text-gray-400",children:"DAYS"}),!1]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"font-inter text-sm text-gray-300",children:a()}),i.jsx("div",{className:"flex justify-center gap-1",children:[1,7,14,21,30].map(c=>i.jsx("div",{className:`h-2 w-2 rounded-full transition-all duration-300 ${0>=c?"bg-ki-green ki-glow-soft":"bg-gray-700"}`},c))}),i.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["Next milestone:"," ","1 day"]})]}),i.jsx("div",{className:"mt-4 rounded-lg border border-gray-700 bg-gray-900 p-3",children:i.jsx("div",{className:"text-ki-green font-mono text-xs",children:"Log weight or complete tasks daily to build your streak"})})]})]})}const oT=async()=>{try{const[e,t,r]=await Promise.all([it.getAllWeights(),Se.getAllTodos(),qr.getAllNotes()]);return{exportDate:new Date().toISOString(),appVersion:"1.0.0",data:{weights:e,tasks:t,notes:r}}}catch(e){throw console.error("Failed to export data:",e),new Error("Failed to export app data")}},lT=(e,t)=>{const r=JSON.stringify(e,null,2),n=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=`perfect-zenkai-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},cT=e=>({totalWeights:e.data.weights.length,totalTasks:e.data.tasks.length,totalNotes:e.data.notes.length,exportDate:new Date(e.exportDate).toLocaleDateString(),appVersion:e.appVersion});function uT(){const[e,t]=k.useState(!1),[r,n]=k.useState("idle"),[s,a]=k.useState(null),{isMobile:o}=It(),l=Ir({scale:.95,haptic:!0}),c=async()=>{try{t(!0),n("idle");const d=await oT();lT(d),a(d),n("success"),setTimeout(()=>n("idle"),3e3)}catch(d){console.error("Export failed:",d),n("error"),setTimeout(()=>n("idle"),3e3)}finally{t(!1)}},u=s?cT(s):null;return i.jsxs("div",{className:`cyber-card transition-cyber flex h-full flex-col mobile-card mobile-responsive ${o?"galaxy-s24-ultra-optimized":""}`,children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3 mobile-layout",children:[i.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg border border-gray-600 bg-gray-700 touch-target",children:i.jsx(Gk,{className:"text-plasma-cyan cyber-icon glow-cyan h-5 w-5"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold text-white mobile-heading",children:"Data Backup"}),i.jsx("p",{className:"font-mono text-xs text-gray-400 mobile-caption",children:"System export"})]})]}),i.jsxs("div",{className:"flex flex-1 flex-col space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"font-inter text-sm text-gray-300",children:"Export all training data"}),r==="success"&&i.jsx(Un,{variant:"success",size:"sm",children:"Complete"}),r==="error"&&i.jsx(Un,{variant:"error",size:"sm",children:"Failed"}),e&&i.jsx(Un,{variant:"active",size:"sm",children:"Processing"}),r==="idle"&&!e&&i.jsx(Un,{variant:"info",size:"sm",showIcon:!1,children:"Ready"})]}),u&&i.jsxs("div",{className:"rounded-lg border border-gray-700 bg-gray-900 p-3",children:[i.jsxs("div",{className:"mb-2 font-mono text-xs text-gray-400",children:["Last Export: ",new Date(u.exportDate).toLocaleDateString()]}),i.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-ki-green font-mono text-sm font-bold",children:u.totalWeights}),i.jsx("div",{className:"text-xs text-gray-500",children:"Weights"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-plasma-cyan font-mono text-sm font-bold",children:u.totalTasks}),i.jsx("div",{className:"text-xs text-gray-500",children:"Quests"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-hyper-magenta font-mono text-sm font-bold",children:u.totalNotes}),i.jsx("div",{className:"text-xs text-gray-500",children:"Notes"})]})]})]}),i.jsxs($,{ref:l.elementRef,onClick:c,disabled:e,className:`
            neon-button transition-cyber bg-plasma-cyan
            hover:bg-plasma-cyan text-dark-navy
            cyan-glow w-full font-mono
            font-semibold touch-target mobile-button
            disabled:cursor-not-allowed disabled:opacity-50
            ${o?"mobile-responsive":""}
          `,"aria-label":"Export all data as backup file",children:[i.jsx(xd,{className:"cyber-icon mr-2 h-4 w-4"}),e?"EXPORTING...":"EXPORT DATA"]}),r==="success"&&i.jsxs("div",{className:"bg-ki-green/10 border-ki-green rounded-lg border p-2 text-center",children:[i.jsx("div",{className:"text-ki-green font-mono text-sm",children:" Data exported successfully!"}),i.jsx("div",{className:"mt-1 text-xs text-gray-400",children:"Backup file downloaded to your device"})]}),r==="error"&&i.jsxs("div",{className:"rounded-lg border border-red-400 bg-red-400/10 p-2 text-center",children:[i.jsx("div",{className:"font-mono text-sm text-red-400",children:" Export failed. Please try again."}),i.jsx("div",{className:"mt-1 text-xs text-gray-400",children:"Check console for error details"})]}),!u&&r==="idle"&&i.jsx("div",{className:"text-center font-mono text-xs text-gray-500",children:"Secure backup for app updates and migrations"})]})]})}function rr({className:e,variant:t="default",...r}){const n={default:"animate-pulse rounded-md bg-gray-700",cyber:"animate-pulse rounded-lg bg-gray-700 border border-gray-600 shimmer",text:"animate-pulse rounded bg-gray-700 h-4",circle:"animate-pulse rounded-full bg-gray-700"};return i.jsx("div",{className:le(n[t],e),...r})}function dT(){return i.jsxs("div",{className:"cyber-card",children:[i.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[i.jsx(rr,{variant:"circle",className:"h-10 w-10"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(rr,{variant:"text",className:"h-4 w-24"}),i.jsx(rr,{variant:"text",className:"h-3 w-16"})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx(rr,{variant:"cyber",className:"h-16 w-full"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx(rr,{variant:"cyber",className:"h-12"}),i.jsx(rr,{variant:"cyber",className:"h-12"})]})]})]})}function w4({count:e=3}){return i.jsx("div",{className:"space-y-3",children:Array.from({length:e}).map((t,r)=>i.jsx("div",{className:"cyber-card py-3",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(rr,{variant:"circle",className:"h-8 w-8"}),i.jsxs("div",{className:"flex-1 space-y-2",children:[i.jsx(rr,{variant:"text",className:"h-4 w-32"}),i.jsx(rr,{variant:"text",className:"h-3 w-24"})]}),i.jsx(rr,{variant:"text",className:"h-6 w-16"})]})},r))})}function hT(){return i.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((e,t)=>i.jsx(dT,{},t))})}const fT="/PerfectZenkai/assets/header-DHEPENJi.webm";function Qg(){const{loadWeights:e,isLoading:t}=Lt(),{loadTodos:r,isLoading:n}=is(),[s,a]=k.useState(!0),{isMobile:o}=It();return k.useEffect(()=>{(async()=>{await Promise.all([e(),r()]),a(!1)})()},[e,r]),s||t&&n?i.jsxs("div",{className:"container mx-auto px-4 pb-24 pt-4",children:[i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"shimmer mb-6 h-8 w-32 rounded bg-gray-700"})}),i.jsx("div",{className:"shimmer mb-8 h-48 overflow-hidden rounded-lg border border-gray-700 bg-gray-800"}),i.jsx(hT,{})]}):i.jsxs("div",{className:`container mx-auto px-4 pb-24 pt-4 mobile-safe-area ${o?"mobile-layout":""}`,children:[i.jsxs("div",{className:"mb-6 sm:mb-8 mobile-layout",children:[i.jsx("h1",{className:"cyber-title gradient-text-ki mb-2 text-xl sm:text-2xl mobile-heading",children:"CONTROL NEXUS"}),i.jsx("p",{className:"font-mono text-sm text-gray-400 mobile-body",children:"Mission Status Overview"})]}),i.jsxs("div",{className:"relative mb-6 sm:mb-8 overflow-hidden rounded-xl border border-gray-700 bg-gray-900 shadow-2xl",children:[i.jsx("video",{className:"h-auto max-h-[200px] sm:max-h-[300px] w-full object-cover",autoPlay:!0,muted:!0,loop:!0,playsInline:!0,src:fT,children:"Your browser does not support the video tag."}),i.jsx("div",{className:"border-ki-green/20 pointer-events-none absolute inset-0 rounded-xl border-2"}),i.jsx("div",{className:"border-ki-green absolute left-2 sm:left-4 top-2 sm:top-4 h-3 w-3 sm:h-4 sm:w-4 border-l-2 border-t-2"}),i.jsx("div",{className:"border-ki-green absolute right-2 sm:right-4 top-2 sm:top-4 h-3 w-3 sm:h-4 sm:w-4 border-r-2 border-t-2"}),i.jsx("div",{className:"border-ki-green absolute bottom-2 sm:bottom-4 left-2 sm:left-4 h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-l-2"}),i.jsx("div",{className:"border-ki-green absolute bottom-2 sm:bottom-4 right-2 sm:right-4 h-3 w-3 sm:h-4 sm:w-4 border-b-2 border-r-2"})]}),i.jsxs("div",{className:`grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 2xl:grid-cols-4 sm:gap-6 mobile-grid ${o?"mobile-stack":""}`,children:[i.jsx("div",{className:`${o?"min-h-80":"h-80"} mobile-card ${o?"mobile-responsive":""}`,children:i.jsx(nT,{})}),i.jsx("div",{className:`${o?"min-h-80":"h-80"} mobile-card ${o?"mobile-responsive":""}`,children:i.jsx(aT,{})}),i.jsx("div",{className:`${o?"min-h-80":"h-80"} sm:col-span-1 lg:col-span-1 mobile-card ${o?"mobile-responsive":""}`,children:i.jsx(rT,{})}),i.jsx("div",{className:`${o?"min-h-80":"h-80"} sm:col-span-1 lg:col-span-1 xl:col-span-1 mobile-card ${o?"mobile-responsive":""}`,children:i.jsx(iT,{})}),i.jsx("div",{className:`${o?"min-h-80":"h-80"} sm:col-span-2 lg:col-span-1 xl:col-span-1 2xl:col-span-1 mobile-card ${o?"mobile-responsive":""}`,children:i.jsx(uT,{})})]}),i.jsx("div",{className:"via-ki-green/20 mt-8 sm:mt-12 h-px bg-gradient-to-r from-transparent to-transparent hidden sm:block"}),i.jsx("div",{className:"mt-4 sm:mt-6 text-center",children:i.jsxs("p",{className:"font-mono text-xs text-gray-500",children:["System Status: ",i.jsx("span",{className:"text-ki-green",children:"OPERATIONAL"})]})})]})}const dv=6048e5,mT=864e5,hv=6e4,fv=36e5,Jg=Symbol.for("constructDateFrom");function bt(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&Jg in e?e[Jg](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ge(e,t){return bt(t||e,e)}function mv(e,t,r){const n=Ge(e,r==null?void 0:r.in);return isNaN(t)?bt(e,NaN):(t&&n.setDate(n.getDate()+t),n)}let gT={};function kc(){return gT}function na(e,t){var l,c,u,d;const r=kc(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,s=Ge(e,t==null?void 0:t.in),a=s.getDay(),o=(a<n?7:0)+a-n;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function zl(e,t){return na(e,{...t,weekStartsOn:1})}function gv(e,t){const r=Ge(e,t==null?void 0:t.in),n=r.getFullYear(),s=bt(r,0);s.setFullYear(n+1,0,4),s.setHours(0,0,0,0);const a=zl(s),o=bt(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=zl(o);return r.getTime()>=a.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function Xg(e){const t=Ge(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function pv(e,...t){const r=bt.bind(null,t.find(n=>typeof n=="object"));return t.map(r)}function Bl(e,t){const r=Ge(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function pT(e,t,r){const[n,s]=pv(r==null?void 0:r.in,e,t),a=Bl(n),o=Bl(s),l=+a-Xg(a),c=+o-Xg(o);return Math.round((l-c)/mT)}function yT(e,t){const r=gv(e,t),n=bt(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),zl(n)}function yv(e){return bt(e,Date.now())}function xv(e,t,r){const[n,s]=pv(r==null?void 0:r.in,e,t);return+Bl(n)==+Bl(s)}function xT(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function vT(e){return!(!xT(e)&&typeof e!="number"||isNaN(+Ge(e)))}function wT(e,t){const r=Ge(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function bT(e,t){const r=Ge(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}const kT={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jT=(e,t,r)=>{let n;const s=kT[e];return typeof s=="string"?n=s:t===1?n=s.one:n=s.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function wu(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const ST={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},NT={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},_T={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ET={date:wu({formats:ST,defaultWidth:"full"}),time:wu({formats:NT,defaultWidth:"full"}),dateTime:wu({formats:_T,defaultWidth:"full"})},TT={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},CT=(e,t,r,n)=>TT[e];function Ta(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let s;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return s[a]}}const DT={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},PT={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},AT={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},OT={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},LT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},IT={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},RT=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},$T={ordinalNumber:RT,era:Ta({values:DT,defaultWidth:"wide"}),quarter:Ta({values:PT,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ta({values:AT,defaultWidth:"wide"}),day:Ta({values:OT,defaultWidth:"wide"}),dayPeriod:Ta({values:LT,defaultWidth:"wide",formattingValues:IT,defaultFormattingWidth:"wide"})};function Ca(e){return(t,r={})=>{const n=r.width,s=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;const o=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?FT(l,f=>f.test(o)):MT(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function MT(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function FT(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function WT(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const s=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(s.length);return{value:o,rest:l}}}const UT=/^(\d+)(th|st|nd|rd)?/i,zT=/\d+/i,BT={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GT={any:[/^b/i,/^(a|c)/i]},qT={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},KT={any:[/1/i,/2/i,/3/i,/4/i]},HT={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},VT={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},YT={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},QT={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},JT={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},XT={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ZT={ordinalNumber:WT({matchPattern:UT,parsePattern:zT,valueCallback:e=>parseInt(e,10)}),era:Ca({matchPatterns:BT,defaultMatchWidth:"wide",parsePatterns:GT,defaultParseWidth:"any"}),quarter:Ca({matchPatterns:qT,defaultMatchWidth:"wide",parsePatterns:KT,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ca({matchPatterns:HT,defaultMatchWidth:"wide",parsePatterns:VT,defaultParseWidth:"any"}),day:Ca({matchPatterns:YT,defaultMatchWidth:"wide",parsePatterns:QT,defaultParseWidth:"any"}),dayPeriod:Ca({matchPatterns:JT,defaultMatchWidth:"any",parsePatterns:XT,defaultParseWidth:"any"})},eC={code:"en-US",formatDistance:jT,formatLong:ET,formatRelative:CT,localize:$T,match:ZT,options:{weekStartsOn:0,firstWeekContainsDate:1}};function tC(e,t){const r=Ge(e,t==null?void 0:t.in);return pT(r,bT(r))+1}function rC(e,t){const r=Ge(e,t==null?void 0:t.in),n=+zl(r)-+yT(r);return Math.round(n/dv)+1}function vv(e,t){var d,f,h,m;const r=Ge(e,t==null?void 0:t.in),n=r.getFullYear(),s=kc(),a=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??s.firstWeekContainsDate??((m=(h=s.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,o=bt((t==null?void 0:t.in)||e,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=na(o,t),c=bt((t==null?void 0:t.in)||e,0);c.setFullYear(n,0,a),c.setHours(0,0,0,0);const u=na(c,t);return+r>=+l?n+1:+r>=+u?n:n-1}function nC(e,t){var l,c,u,d;const r=kc(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,s=vv(e,t),a=bt((t==null?void 0:t.in)||e,0);return a.setFullYear(s,0,n),a.setHours(0,0,0,0),na(a,t)}function sC(e,t){const r=Ge(e,t==null?void 0:t.in),n=+na(r,t)-+nC(r,t);return Math.round(n/dv)+1}function re(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const zr={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return re(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):re(r+1,2)},d(e,t){return re(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return re(e.getHours()%12||12,t.length)},H(e,t){return re(e.getHours(),t.length)},m(e,t){return re(e.getMinutes(),t.length)},s(e,t){return re(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),s=Math.trunc(n*Math.pow(10,r-3));return re(s,t.length)}},xs={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Zg={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),s=n>0?n:1-n;return r.ordinalNumber(s,{unit:"year"})}return zr.y(e,t)},Y:function(e,t,r,n){const s=vv(e,n),a=s>0?s:1-s;if(t==="YY"){const o=a%100;return re(o,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):re(a,t.length)},R:function(e,t){const r=gv(e);return re(r,t.length)},u:function(e,t){const r=e.getFullYear();return re(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return re(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return re(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return zr.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return re(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const s=sC(e,n);return t==="wo"?r.ordinalNumber(s,{unit:"week"}):re(s,t.length)},I:function(e,t,r){const n=rC(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):re(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):zr.d(e,t)},D:function(e,t,r){const n=tC(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):re(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return re(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(s,{width:"short",context:"formatting"});case"eeee":default:return r.day(s,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const s=e.getDay(),a=(s-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return re(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(s,{width:"narrow",context:"standalone"});case"cccccc":return r.day(s,{width:"short",context:"standalone"});case"cccc":default:return r.day(s,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),s=n===0?7:n;switch(t){case"i":return String(s);case"ii":return re(s,t.length);case"io":return r.ordinalNumber(s,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let s;switch(n===12?s=xs.noon:n===0?s=xs.midnight:s=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let s;switch(n>=17?s=xs.evening:n>=12?s=xs.afternoon:n>=4?s=xs.morning:s=xs.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return zr.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):zr.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):re(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):re(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):zr.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):zr.s(e,t)},S:function(e,t){return zr.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return tp(n);case"XXXX":case"XX":return An(n);case"XXXXX":case"XXX":default:return An(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return tp(n);case"xxxx":case"xx":return An(n);case"xxxxx":case"xxx":default:return An(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ep(n,":");case"OOOO":default:return"GMT"+An(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ep(n,":");case"zzzz":default:return"GMT"+An(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return re(n,t.length)},T:function(e,t,r){return re(+e,t.length)}};function ep(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=Math.trunc(n/60),a=n%60;return a===0?r+String(s):r+String(s)+t+re(a,2)}function tp(e,t){return e%60===0?(e>0?"-":"+")+re(Math.abs(e)/60,2):An(e,t)}function An(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),s=re(Math.trunc(n/60),2),a=re(n%60,2);return r+s+t+a}const rp=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},wv=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},aC=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],s=r[2];if(!s)return rp(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",rp(n,t)).replace("{{time}}",wv(s,t))},iC={p:wv,P:aC},oC=/^D+$/,lC=/^Y+$/,cC=["D","DD","YY","YYYY"];function uC(e){return oC.test(e)}function dC(e){return lC.test(e)}function hC(e,t,r){const n=fC(e,t,r);if(console.warn(n),cC.includes(e))throw new RangeError(n)}function fC(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const mC=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gC=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,pC=/^'([^]*?)'?$/,yC=/''/g,xC=/[a-zA-Z]/;function Tt(e,t,r){var d,f,h,m;const n=kc(),s=n.locale??eC,a=n.firstWeekContainsDate??((f=(d=n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??1,o=n.weekStartsOn??((m=(h=n.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,l=Ge(e,r==null?void 0:r.in);if(!vT(l))throw new RangeError("Invalid time value");let c=t.match(gC).map(x=>{const y=x[0];if(y==="p"||y==="P"){const w=iC[y];return w(x,s.formatLong)}return x}).join("").match(mC).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const y=x[0];if(y==="'")return{isToken:!1,value:vC(x)};if(Zg[y])return{isToken:!0,value:x};if(y.match(xC))throw new RangeError("Format string contains an unescaped latin alphabet character `"+y+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(c=s.localize.preprocessor(l,c));const u={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return c.map(x=>{if(!x.isToken)return x.value;const y=x.value;(dC(y)||uC(y))&&hC(y,t,String(e));const w=Zg[y[0]];return w(l,y,s.localize,u)}).join("")}function vC(e){const t=e.match(pC);return t?t[1].replace(yC,"'"):e}function np(e,t){return+Ge(e)>+Ge(t)}function wC(e,t){return xv(bt(e,e),yv(e))}function $f(e,t,r){return mv(e,-t,r)}function bC(e,t){return xv(bt(e,e),$f(yv(e),1))}function kC(e,t){const r=()=>bt(t==null?void 0:t.in,NaN),s=_C(e);let a;if(s.date){const u=EC(s.date,2);a=TC(u.restDateString,u.year)}if(!a||isNaN(+a))return r();const o=+a;let l=0,c;if(s.time&&(l=CC(s.time),isNaN(l)))return r();if(s.timezone){if(c=DC(s.timezone),isNaN(c))return r()}else{const u=new Date(o+l),d=Ge(0,t==null?void 0:t.in);return d.setFullYear(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate()),d.setHours(u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()),d}return Ge(o+l+c,t==null?void 0:t.in)}const Mo={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},jC=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,SC=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,NC=/^([+-])(\d{2})(?::?(\d{2}))?$/;function _C(e){const t={},r=e.split(Mo.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Mo.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Mo.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const s=Mo.timezone.exec(n);s?(t.time=n.replace(s[1],""),t.timezone=s[1]):t.time=n}return t}function EC(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const s=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?s:a*100,restDateString:e.slice((n[1]||n[2]).length)}}function TC(e,t){if(t===null)return new Date(NaN);const r=e.match(jC);if(!r)return new Date(NaN);const n=!!r[4],s=Da(r[1]),a=Da(r[2])-1,o=Da(r[3]),l=Da(r[4]),c=Da(r[5])-1;if(n)return IC(t,l,c)?PC(t,l,c):new Date(NaN);{const u=new Date(0);return!OC(t,a,o)||!LC(t,s)?new Date(NaN):(u.setUTCFullYear(t,a,Math.max(s,o)),u)}}function Da(e){return e?parseInt(e):1}function CC(e){const t=e.match(SC);if(!t)return NaN;const r=bu(t[1]),n=bu(t[2]),s=bu(t[3]);return RC(r,n,s)?r*fv+n*hv+s*1e3:NaN}function bu(e){return e&&parseFloat(e.replace(",","."))||0}function DC(e){if(e==="Z")return 0;const t=e.match(NC);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),s=t[3]&&parseInt(t[3])||0;return $C(n,s)?r*(n*fv+s*hv):NaN}function PC(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const s=n.getUTCDay()||7,a=(t-1)*7+r+1-s;return n.setUTCDate(n.getUTCDate()+a),n}const AC=[31,null,31,30,31,30,31,31,30,31,30,31];function bv(e){return e%400===0||e%4===0&&e%100!==0}function OC(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(AC[t]||(bv(e)?29:28))}function LC(e,t){return t>=1&&t<=(bv(e)?366:365)}function IC(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function RC(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function $C(e,t){return t>=0&&t<=59}const sp=e=>{const t=typeof e=="string"?kC(e):e;return wC(t)?"Today":bC(t)?"Yesterday":Tt(t,"MMM d, yyyy")},MC=(e,t)=>`${e} - ${t}`,Gl=()=>Tt(new Date,"yyyy-MM-dd"),ku=e=>({id:e.id,entryDate:e.entry_date,entryType:e.entry_type,morningEntry:e.morning_entry||void 0,eveningEntry:e.evening_entry||void 0,createdAt:e.created_at,updatedAt:e.updated_at}),ap=e=>({entry_date:e.entryDate,entry_type:e.entryType,morning_entry:e.morningEntry||null,evening_entry:e.eveningEntry||null}),FC=e=>{const t=[];return(!e.mood||e.mood<1||e.mood>5)&&t.push("Mood rating is required (1-5)"),(!e.energy||e.energy<1||e.energy>5)&&t.push("Energy rating is required (1-5)"),(!e.sleepQuality||e.sleepQuality<1||e.sleepQuality>5)&&t.push("Sleep quality rating is required (1-5)"),(!e.topPriorities||e.topPriorities.length===0)&&t.push("At least one priority is required"),e.topPriorities&&e.topPriorities.length>3&&t.push("Maximum 3 priorities allowed"),t},WC=e=>{const t=[];return(!e.productivity||e.productivity<1||e.productivity>5)&&t.push("Productivity rating is required (1-5)"),(!e.stressLevel||e.stressLevel<1||e.stressLevel>5)&&t.push("Stress level rating is required (1-5)"),(!e.satisfaction||e.satisfaction<1||e.satisfaction>5)&&t.push("Satisfaction rating is required (1-5)"),(!e.gratitude||e.gratitude.length===0)&&t.push("At least one gratitude item is required"),e.gratitude&&e.gratitude.length>3&&t.push("Maximum 3 gratitude items allowed"),t},UC=()=>({yesterdayAccomplishments:[],todayPlans:[],blockers:[],mood:3,energy:3,sleepQuality:3,topPriorities:[],timeBlocks:[],notes:""}),zC=()=>({accomplishments:[],challenges:[],learnings:[],tomorrowFocus:[],unfinishedTasks:[],gratitude:[],improvements:[],productivity:3,stressLevel:3,satisfaction:3,notes:""}),ip=e=>({1:"Very Low",2:"Low",3:"Moderate",4:"Good",5:"Excellent"})[e]||"Unknown",BC=e=>({1:"text-red-500",2:"text-orange-500",3:"text-yellow-500",4:"text-green-500",5:"text-emerald-500"})[e]||"text-gray-500",GC=()=>{const e=[];for(let t=0;t<24;t++)for(let r=0;r<60;r+=30){const n=`${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`;e.push(n)}return e},kv=(e=new Date)=>na(e,{weekStartsOn:1}),jv=(e=new Date)=>wT(e),qC=e=>{if(e.length===0)return{current:0,longest:0};const t=[...e].sort((c,u)=>new Date(u.entryDate).getTime()-new Date(c.entryDate).getTime());let r=0,n=0,s=0;const a=new Date,o=new Set(t.map(c=>c.entryDate));for(let c=0;c<30;c++){const u=new Date(a);u.setDate(a.getDate()-c);const d=Tt(u,"yyyy-MM-dd");if(o.has(d))(c===0||r>0)&&r++;else if(c>0)break}const l=t.map(c=>new Date(c.entryDate)).sort((c,u)=>c.getTime()-u.getTime());for(let c=0;c<l.length;c++)c===0?s=1:Math.floor((l[c].getTime()-l[c-1].getTime())/864e5)===1?s++:s=1,n=Math.max(n,s);return{current:r,longest:n}},KC=e=>{const t=new Date,r=kv(t),n=jv(t),s=e.filter(f=>np(new Date(f.entryDate),r)||Tt(new Date(f.entryDate),"yyyy-MM-dd")===Tt(r,"yyyy-MM-dd")),a=e.filter(f=>np(new Date(f.entryDate),n)||Tt(new Date(f.entryDate),"yyyy-MM-dd")===Tt(n,"yyyy-MM-dd")),o=HC(e,s,a),l=VC(e),c=YC(e),u=qC(e),d=e.length>0?e.sort((f,h)=>new Date(h.entryDate).getTime()-new Date(f.entryDate).getTime())[0]:null;return{completionRate:o,trends:l,insights:c,streaks:{currentStreak:u.current,longestStreak:u.longest,lastEntryDate:(d==null?void 0:d.entryDate)||""}}},HC=(e,t,r)=>{const n=new Date,s=Math.min(7,Math.floor((n.getTime()-kv(n).getTime())/(1e3*60*60*24))+1),a=Math.min(31,Math.floor((n.getTime()-jv(n).getTime())/(1e3*60*60*24))+1),o=e.filter(c=>c.morningEntry).length,l=e.filter(c=>c.eveningEntry).length;return{weekly:Math.round(t.length/s*100),monthly:Math.round(r.length/a*100),morningEntries:o,eveningEntries:l}},VC=e=>{const t=Array.from({length:30},(o,l)=>{const c=$f(new Date,l);return Tt(c,"yyyy-MM-dd")}).reverse(),r=[],n=[],s=[],a=[];return t.forEach(o=>{var c,u,d,f;const l=e.find(h=>h.entryDate===o);r.push(((c=l==null?void 0:l.morningEntry)==null?void 0:c.mood)||0),n.push(((u=l==null?void 0:l.morningEntry)==null?void 0:u.energy)||0),a.push(((d=l==null?void 0:l.morningEntry)==null?void 0:d.sleepQuality)||0),s.push(((f=l==null?void 0:l.eveningEntry)==null?void 0:f.productivity)||0)}),{moodTrend:r,energyTrend:n,productivityTrend:s,sleepQualityTrend:a}},YC=e=>{const t=[],r=[],n=[],s={};e.forEach(u=>{var d,f,h,m;if((d=u.morningEntry)!=null&&d.blockers&&t.push(...u.morningEntry.blockers),(f=u.eveningEntry)!=null&&f.gratitude&&r.push(...u.eveningEntry.gratitude),(h=u.eveningEntry)!=null&&h.improvements&&n.push(...u.eveningEntry.improvements),(m=u.eveningEntry)!=null&&m.productivity){const x=Tt(new Date(u.entryDate),"EEEE");s[x]||(s[x]=[]),s[x].push(u.eveningEntry.productivity)}});const a=ju(t,5),o=ju(r,5),l=ju(n,5),c=Object.entries(s).map(([u,d])=>({day:u,avgScore:d.reduce((f,h)=>f+h,0)/d.length})).sort((u,d)=>d.avgScore-u.avgScore).slice(0,3).map(u=>u.day);return{commonBlockers:a,topGratitudeThemes:o,mostProductiveDays:c,improvementAreas:l}},ju=(e,t)=>{const r={};return e.forEach(n=>{const s=n.toLowerCase().trim();s.length>2&&(r[s]=(r[s]||0)+1)}),Object.entries(r).sort(([,n],[,s])=>s-n).slice(0,t).map(([n])=>n)},jc=kn((e,t)=>({entries:[],analytics:null,formState:{selectedDate:Gl(),activeTab:"morning",isDraft:!1,hasUnsavedChanges:!1},isLoading:!1,error:null,loadEntries:async()=>{e({isLoading:!0,error:null});try{const{data:r,error:n}=await T.from("journal_entries").select("*").order("entry_date",{ascending:!1});if(n)throw n;const s=(r||[]).map(ku);e({entries:s,isLoading:!1})}catch(r){e({error:r.message,isLoading:!1})}},loadAnalytics:async()=>{const{entries:r}=t();if(r.length===0){e({analytics:null});return}try{const n=KC(r);e({analytics:n})}catch(n){e({error:n.message})}},addEntry:async r=>{e({isLoading:!0,error:null});try{const n=ap(r),{data:s,error:a}=await T.from("journal_entries").insert([n]).select().single();if(a)throw a;const o=ku(s),{entries:l}=t(),c=[o,...l].sort((u,d)=>new Date(d.entryDate).getTime()-new Date(u.entryDate).getTime());e({entries:c,isLoading:!1}),t().loadAnalytics()}catch(n){e({error:n.message,isLoading:!1})}},updateEntry:async(r,n)=>{e({isLoading:!0,error:null});try{const s=ap(n),{data:a,error:o}=await T.from("journal_entries").update(s).eq("id",r).select().single();if(o)throw o;const l=ku(a),{entries:c}=t(),u=c.map(d=>d.id===r?l:d);e({entries:u,isLoading:!1}),t().loadAnalytics()}catch(s){e({error:s.message,isLoading:!1})}},deleteEntry:async r=>{e({isLoading:!0,error:null});try{const{error:n}=await T.from("journal_entries").delete().eq("id",r);if(n)throw n;const{entries:s}=t(),a=s.filter(o=>o.id!==r);e({entries:a,isLoading:!1}),t().loadAnalytics()}catch(n){e({error:n.message,isLoading:!1})}},getEntryByDate:r=>{const{entries:n}=t();return n.find(s=>s.entryDate===r)||null},createOrUpdateMorningEntry:async(r,n)=>{const s=t().getEntryByDate(r);s?await t().updateEntry(s.id,{morningEntry:n,entryType:s.eveningEntry?"both":"morning"}):await t().addEntry({entryDate:r,entryType:"morning",morningEntry:n})},createOrUpdateEveningEntry:async(r,n)=>{const s=t().getEntryByDate(r);s?await t().updateEntry(s.id,{eveningEntry:n,entryType:s.morningEntry?"both":"evening"}):await t().addEntry({entryDate:r,entryType:"evening",eveningEntry:n})},setSelectedDate:r=>{e(n=>({formState:{...n.formState,selectedDate:r}}))},setActiveTab:r=>{e(n=>({formState:{...n.formState,activeTab:r}}))},setHasUnsavedChanges:r=>{e(n=>({formState:{...n.formState,hasUnsavedChanges:r}}))},getTodayEntry:()=>{const r=Gl();return t().getEntryByDate(r)},getRecentEntries:(r=7)=>{const{entries:n}=t();return n.slice(0,r)},clearError:()=>{e({error:null})}})),QC=()=>jc(e=>e.formState),JC=()=>jc(e=>e.isLoading),XC=()=>jc(e=>e.error);function Ks({label:e,value:t,onChange:r,icon:n,description:s,required:a=!1}){const o=[1,2,3,4,5];return i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[n&&i.jsx("span",{className:"text-green-500",children:n}),i.jsxs("label",{className:"text-sm font-medium text-white",children:[e,a&&i.jsx("span",{className:"text-red-400 ml-1",children:"*"})]})]}),s&&i.jsx("p",{className:"text-xs text-gray-400",children:s}),i.jsx("div",{className:"flex items-center justify-between",children:o.map(l=>i.jsxs("button",{type:"button",onClick:()=>r(l),className:`
              flex flex-col items-center p-3 rounded-lg border-2 transition-all
              ${t===l?"border-green-500 bg-green-500/20 text-green-400":"border-gray-600 bg-gray-800 text-gray-400 hover:border-gray-500 hover:text-gray-300"}
            `,children:[i.jsx("span",{className:"text-lg font-bold",children:l}),i.jsx("span",{className:"text-xs mt-1 text-center leading-tight",children:ip(l)})]},l))}),t>0&&i.jsx("div",{className:"text-center",children:i.jsxs("span",{className:`text-sm font-medium ${BC(t)}`,children:["Current: ",ip(t)," (",t,"/5)"]})})]})}function ZC({priorities:e,onChange:t,maxItems:r=3,required:n=!1}){const[s,a]=k.useState(""),[o,l]=k.useState(!1),c=()=>{s.trim()&&e.length<r&&(t([...e,s.trim()]),a(""),l(!1))},u=h=>{const m=e.filter((x,y)=>y!==h);t(m)},d=h=>{h.key==="Enter"&&(h.preventDefault(),c()),h.key==="Escape"&&(l(!1),a(""))},f=e.length<r;return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{className:"h-4 w-4 text-green-500"}),i.jsxs("label",{className:"text-sm font-medium text-white",children:["Top ",r," Priorities",n&&i.jsx("span",{className:"text-red-400 ml-1",children:"*"})]})]}),i.jsxs("span",{className:"text-xs text-gray-400",children:[e.length,"/",r]})]}),n&&e.length===0&&i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-500/20 border border-red-500/50 rounded-lg",children:[i.jsx(Xn,{className:"h-4 w-4 text-red-400"}),i.jsx("span",{className:"text-xs text-red-400",children:"At least one priority is required"})]}),i.jsx("div",{className:"space-y-2",children:e.map((h,m)=>i.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800 border border-gray-600 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-green-500 text-black text-xs font-bold rounded-full",children:m+1}),i.jsx("span",{className:"flex-1 text-sm text-white",children:h}),i.jsx("button",{type:"button",onClick:()=>u(m),className:"text-red-400 hover:text-red-300 p-1",children:i.jsx(Bi,{className:"h-4 w-4"})})]},m))}),o?i.jsxs("div",{className:"p-3 bg-gray-800 border border-gray-600 rounded-lg space-y-3",children:[i.jsx("input",{type:"text",value:s,onChange:h=>a(h.target.value),onKeyDown:d,placeholder:"What's your priority for today?",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400",autoFocus:!0}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:c,disabled:!s.trim(),className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Priority"}),i.jsx("button",{type:"button",onClick:()=>{l(!1),a("")},className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Cancel"})]})]}):f?i.jsxs("button",{type:"button",onClick:()=>l(!0),className:"w-full p-3 border-2 border-dashed border-gray-600 rounded-lg text-gray-400 hover:border-gray-500 hover:text-gray-300 transition-colors flex items-center justify-center gap-2",children:[i.jsx(Ot,{className:"h-4 w-4"}),"Add Priority (",e.length,"/",r,")"]}):i.jsx("div",{className:"text-center p-3 bg-gray-800/50 rounded-lg",children:i.jsxs("span",{className:"text-xs text-gray-500",children:["Maximum ",r," priorities reached"]})}),e.length===0&&!o&&i.jsxs("p",{className:"text-xs text-gray-500 text-center py-4",children:["No priorities set yet. What are your top ",r," goals for today?"]}),e.length>0&&i.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[i.jsxs("p",{children:[" ",i.jsx("strong",{children:"Tip:"})," Focus on completing these priorities first"]}),i.jsx("p",{children:" Keep them specific and actionable for better results"})]})]})}function e4({timeBlocks:e,onChange:t}){const[r,n]=k.useState(!1),[s,a]=k.useState({startTime:"09:00",endTime:"10:00",activity:"",priority:"medium"}),o=GC(),l=()=>{if(s.activity&&s.startTime&&s.endTime){const d={startTime:s.startTime,endTime:s.endTime,activity:s.activity,priority:s.priority};t([...e,d]),a({startTime:"09:00",endTime:"10:00",activity:"",priority:"medium"}),n(!1)}},c=d=>{const f=e.filter((h,m)=>m!==d);t(f)},u=d=>{switch(d){case"high":return"border-red-500 bg-red-500/20 text-red-400";case"medium":return"border-yellow-500 bg-yellow-500/20 text-yellow-400";case"low":return"border-green-500 bg-green-500/20 text-green-400";default:return"border-gray-500 bg-gray-500/20 text-gray-400"}};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Sr,{className:"h-4 w-4 text-green-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"Time Blocks"})]}),i.jsx("div",{className:"space-y-2",children:e.map((d,f)=>i.jsx("div",{className:`p-3 rounded-lg border ${u(d.priority)}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[i.jsx("span",{className:"text-sm font-medium text-white",children:MC(d.startTime,d.endTime)}),i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${u(d.priority)}`,children:d.priority})]}),i.jsx("p",{className:"text-sm text-gray-300",children:d.activity})]}),i.jsx("button",{type:"button",onClick:()=>c(f),className:"text-red-400 hover:text-red-300 p-1",children:i.jsx(Bi,{className:"h-4 w-4"})})]})},f))}),r?i.jsxs("div",{className:"p-4 bg-gray-800 rounded-lg border border-gray-600 space-y-3",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Start Time"}),i.jsx("select",{value:s.startTime,onChange:d=>a({...s,startTime:d.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",children:o.map(d=>i.jsx("option",{value:d,children:d},d))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"End Time"}),i.jsx("select",{value:s.endTime,onChange:d=>a({...s,endTime:d.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",children:o.map(d=>i.jsx("option",{value:d,children:d},d))})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Activity"}),i.jsx("input",{type:"text",value:s.activity,onChange:d=>a({...s,activity:d.target.value}),placeholder:"What will you be doing?",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"Priority"}),i.jsxs("select",{value:s.priority,onChange:d=>a({...s,priority:d.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm",children:[i.jsx("option",{value:"low",children:"Low Priority"}),i.jsx("option",{value:"medium",children:"Medium Priority"}),i.jsx("option",{value:"high",children:"High Priority"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:l,disabled:!s.activity,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Block"}),i.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Cancel"})]})]}):i.jsxs("button",{type:"button",onClick:()=>n(!0),className:"w-full p-3 border-2 border-dashed border-gray-600 rounded-lg text-gray-400 hover:border-gray-500 hover:text-gray-300 transition-colors flex items-center justify-center gap-2",children:[i.jsx(Ot,{className:"h-4 w-4"}),"Add Time Block"]}),e.length===0&&!r&&i.jsx("p",{className:"text-xs text-gray-500 text-center py-4",children:"No time blocks planned yet. Add some to organize your day!"})]})}function t4({entry:e,onSave:t,isLoading:r=!1}){const[n,s]=k.useState(e||UC()),[a,o]=k.useState([]),[l,c]=k.useState(!1);k.useEffect(()=>{e&&(s(e),c(!1))},[e]);const u=(h,m)=>{s(x=>({...x,[h]:m})),c(!0),a.length>0&&o([])},d=(h,m)=>{u(h,m)},f=async()=>{const h=FC(n);if(h.length>0){o(h);return}try{await t(n),c(!1),o([])}catch{o(["Failed to save morning entry. Please try again."])}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-yellow-500/20 rounded-lg",children:i.jsx(ng,{className:"h-6 w-6 text-yellow-500"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Morning Standup"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Plan your day and check in with yourself"})]})]}),a.length>0&&i.jsxs("div",{className:"p-4 bg-red-500/20 border border-red-500/50 rounded-lg space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4 text-red-400"}),i.jsx("span",{className:"text-sm font-medium text-red-400",children:"Please fix the following issues:"})]}),i.jsx("ul",{className:"text-sm text-red-300 space-y-1",children:a.map((h,m)=>i.jsxs("li",{children:[" ",h]},m))})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Uk,{className:"h-4 w-4 text-green-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"What did I accomplish yesterday?"})]}),i.jsx("textarea",{value:n.yesterdayAccomplishments.join(`
`),onChange:h=>d("yesterdayAccomplishments",h.target.value.split(`
`).filter(Boolean)),placeholder:"List your accomplishments from yesterday (one per line)",rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx($k,{className:"h-4 w-4 text-blue-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"What do I plan to do today?"})]}),i.jsx("textarea",{value:n.todayPlans.join(`
`),onChange:h=>d("todayPlans",h.target.value.split(`
`).filter(Boolean)),placeholder:"List your plans for today (one per line)",rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4 text-red-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"Any blockers or challenges?"})]}),i.jsx("textarea",{value:n.blockers.join(`
`),onChange:h=>d("blockers",h.target.value.split(`
`).filter(Boolean)),placeholder:"List any obstacles or challenges you're facing (one per line)",rows:2,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(Ks,{label:"Mood",value:n.mood,onChange:h=>u("mood",h),icon:i.jsx(ng,{className:"h-4 w-4"}),description:"How are you feeling right now?",required:!0}),i.jsx(Ks,{label:"Energy Level",value:n.energy,onChange:h=>u("energy",h),icon:i.jsx(qi,{className:"h-4 w-4"}),description:"How energetic do you feel?",required:!0}),i.jsx(Ks,{label:"Sleep Quality",value:n.sleepQuality,onChange:h=>u("sleepQuality",h),icon:i.jsx(vd,{className:"h-4 w-4"}),description:"How well did you sleep?",required:!0})]}),i.jsx(ZC,{priorities:n.topPriorities,onChange:h=>u("topPriorities",h),maxItems:3,required:!0}),i.jsx(e4,{timeBlocks:n.timeBlocks,onChange:h=>u("timeBlocks",h)}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-sm font-medium text-white",children:"Additional Notes"}),i.jsx("textarea",{value:n.notes,onChange:h=>u("notes",h.target.value),placeholder:"Any additional thoughts, ideas, or notes for the day...",rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:[i.jsx("div",{className:"text-xs text-gray-500",children:l&&" Unsaved changes"}),i.jsxs("button",{onClick:f,disabled:r,className:"flex items-center gap-2 px-6 py-3 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(df,{className:"h-4 w-4"}),r?"Saving...":"Save Morning Entry"]})]}),i.jsxs("div",{className:"text-xs text-gray-500 bg-gray-800/50 p-4 rounded-lg space-y-2",children:[i.jsx("p",{children:i.jsx("strong",{children:" Morning Success Tips:"})}),i.jsx("p",{children:" Review yesterday's wins to build momentum"}),i.jsx("p",{children:" Set 1-3 clear priorities to stay focused"}),i.jsx("p",{children:" Plan time blocks to structure your day"}),i.jsx("p",{children:" Identify blockers early to find solutions"})]})]})}function r4({gratitude:e,onChange:t,maxItems:r=3,required:n=!1}){const[s,a]=k.useState(""),[o,l]=k.useState(!1),c=()=>{s.trim()&&e.length<r&&(t([...e,s.trim()]),a(""),l(!1))},u=x=>{const y=e.filter((w,g)=>g!==x);t(y)},d=x=>{x.key==="Enter"&&(x.preventDefault(),c()),x.key==="Escape"&&(l(!1),a(""))},f=e.length<r,h=["Something that made me smile today","A person who helped or supported me","A small moment of joy or peace","Something I learned or discovered","A challenge that helped me grow","Something beautiful I noticed","A comfort or convenience I enjoyed","Progress I made on a goal"],m=()=>h[Math.floor(Math.random()*h.length)];return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(qk,{className:"h-4 w-4 text-pink-500"}),i.jsxs("label",{className:"text-sm font-medium text-white",children:["Gratitude (",r," items)",n&&i.jsx("span",{className:"text-red-400 ml-1",children:"*"})]})]}),i.jsxs("span",{className:"text-xs text-gray-400",children:[e.length,"/",r]})]}),n&&e.length===0&&i.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-500/20 border border-red-500/50 rounded-lg",children:[i.jsx(Xn,{className:"h-4 w-4 text-red-400"}),i.jsx("span",{className:"text-xs text-red-400",children:"At least one gratitude item is required"})]}),i.jsx("div",{className:"space-y-2",children:e.map((x,y)=>i.jsxs("div",{className:"flex items-start gap-3 p-3 bg-pink-500/10 border border-pink-500/30 rounded-lg",children:[i.jsx("div",{className:"flex items-center justify-center w-6 h-6 bg-pink-500 text-white text-xs font-bold rounded-full mt-0.5",children:y+1}),i.jsx("span",{className:"flex-1 text-sm text-white leading-relaxed",children:x}),i.jsx("button",{type:"button",onClick:()=>u(y),className:"text-red-400 hover:text-red-300 p-1",children:i.jsx(Bi,{className:"h-4 w-4"})})]},y))}),o?i.jsxs("div",{className:"p-4 bg-gray-800 border border-gray-600 rounded-lg space-y-3",children:[i.jsxs("div",{className:"text-xs text-gray-400 mb-2",children:[" ",i.jsx("strong",{children:"Prompt:"})," ",m()]}),i.jsx("textarea",{value:s,onChange:x=>a(x.target.value),onKeyDown:d,placeholder:"What are you grateful for today?",rows:2,className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none",autoFocus:!0}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{type:"button",onClick:c,disabled:!s.trim(),className:"flex-1 px-4 py-2 bg-pink-600 text-white rounded-lg text-sm font-medium hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Add Gratitude"}),i.jsx("button",{type:"button",onClick:()=>{l(!1),a("")},className:"px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700",children:"Cancel"})]})]}):f?i.jsxs("button",{type:"button",onClick:()=>l(!0),className:"w-full p-3 border-2 border-dashed border-pink-500/50 rounded-lg text-pink-400 hover:border-pink-500 hover:text-pink-300 transition-colors flex items-center justify-center gap-2",children:[i.jsx(Ot,{className:"h-4 w-4"}),"Add Gratitude (",e.length,"/",r,")"]}):i.jsx("div",{className:"text-center p-3 bg-pink-500/10 rounded-lg",children:i.jsxs("span",{className:"text-xs text-pink-400",children:["All ",r," gratitude items completed! "]})}),e.length===0&&!o&&i.jsxs("div",{className:"text-center py-6 space-y-2",children:[i.jsx("p",{className:"text-xs text-gray-500",children:"Take a moment to reflect on what you're grateful for today"}),i.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[i.jsx("p",{children:" Big wins or small moments"}),i.jsx("p",{children:" People who made a difference"}),i.jsx("p",{children:" Lessons learned or growth experienced"})]})]}),e.length>0&&i.jsxs("div",{className:"text-xs text-gray-500 bg-pink-500/5 p-3 rounded-lg space-y-1",children:[i.jsxs("p",{children:[" ",i.jsx("strong",{children:"Benefits of gratitude:"})]}),i.jsx("p",{children:" Improves mood and mental well-being"}),i.jsx("p",{children:" Enhances sleep quality and reduces stress"}),i.jsx("p",{children:" Strengthens relationships and social connections"})]})]})}function n4({entry:e,onSave:t,isLoading:r=!1}){const[n,s]=k.useState(e||zC()),[a,o]=k.useState([]),[l,c]=k.useState(!1);k.useEffect(()=>{e&&(s(e),c(!1))},[e]);const u=(h,m)=>{s(x=>({...x,[h]:m})),c(!0),a.length>0&&o([])},d=(h,m)=>{u(h,m)},f=async()=>{const h=WC(n);if(h.length>0){o(h);return}try{await t(n),c(!1),o([])}catch{o(["Failed to save evening entry. Please try again."])}};return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-purple-500/20 rounded-lg",children:i.jsx(vd,{className:"h-6 w-6 text-purple-500"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Evening Reflection"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Review your day and prepare for tomorrow"})]})]}),a.length>0&&i.jsxs("div",{className:"p-4 bg-red-500/20 border border-red-500/50 rounded-lg space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4 text-red-400"}),i.jsx("span",{className:"text-sm font-medium text-red-400",children:"Please fix the following issues:"})]}),i.jsx("ul",{className:"text-sm text-red-300 space-y-1",children:a.map((h,m)=>i.jsxs("li",{children:[" ",h]},m))})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ji,{className:"h-4 w-4 text-green-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"What did I accomplish today?"})]}),i.jsx("textarea",{value:n.accomplishments.join(`
`),onChange:h=>d("accomplishments",h.target.value.split(`
`).filter(Boolean)),placeholder:"List your accomplishments from today (one per line)",rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Pl,{className:"h-4 w-4 text-orange-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"What challenges did I face and how did I handle them?"})]}),i.jsx("textarea",{value:n.challenges.join(`
`),onChange:h=>d("challenges",h.target.value.split(`
`).filter(Boolean)),placeholder:"Describe challenges you faced and how you dealt with them (one per line)",rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Vk,{className:"h-4 w-4 text-yellow-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"What did I learn today?"})]}),i.jsx("textarea",{value:n.learnings.join(`
`),onChange:h=>d("learnings",h.target.value.split(`
`).filter(Boolean)),placeholder:"What insights, skills, or knowledge did you gain? (one per line)",rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rg,{className:"h-4 w-4 text-blue-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"What should I focus on tomorrow?"})]}),i.jsx("textarea",{value:n.tomorrowFocus.join(`
`),onChange:h=>d("tomorrowFocus",h.target.value.split(`
`).filter(Boolean)),placeholder:"What are your key focus areas for tomorrow? (one per line)",rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xn,{className:"h-4 w-4 text-red-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"Unfinished tasks to carry over"})]}),i.jsx("textarea",{value:n.unfinishedTasks.join(`
`),onChange:h=>d("unfinishedTasks",h.target.value.split(`
`).filter(Boolean)),placeholder:"Tasks that didn't get completed today (one per line)",rows:2,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsx(r4,{gratitude:n.gratitude,onChange:h=>u("gratitude",h),maxItems:3,required:!0}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(rg,{className:"h-4 w-4 text-purple-500"}),i.jsx("label",{className:"text-sm font-medium text-white",children:"Areas for improvement"})]}),i.jsx("textarea",{value:n.improvements.join(`
`),onChange:h=>d("improvements",h.target.value.split(`
`).filter(Boolean)),placeholder:"What could you do better or differently? (one per line)",rows:2,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(Ks,{label:"Productivity",value:n.productivity,onChange:h=>u("productivity",h),icon:i.jsx(ji,{className:"h-4 w-4"}),description:"How productive were you today?",required:!0}),i.jsx(Ks,{label:"Stress Level",value:n.stressLevel,onChange:h=>u("stressLevel",h),icon:i.jsx(Pl,{className:"h-4 w-4"}),description:"How stressed did you feel?",required:!0}),i.jsx(Ks,{label:"Satisfaction",value:n.satisfaction,onChange:h=>u("satisfaction",h),icon:i.jsx(vd,{className:"h-4 w-4"}),description:"How satisfied are you with today?",required:!0})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("label",{className:"text-sm font-medium text-white",children:"Additional Notes"}),i.jsx("textarea",{value:n.notes,onChange:h=>u("notes",h.target.value),placeholder:"Any additional thoughts, reflections, or notes about your day...",rows:3,className:"w-full px-3 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white text-sm placeholder-gray-400 resize-none"})]}),i.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-700",children:[i.jsx("div",{className:"text-xs text-gray-500",children:l&&" Unsaved changes"}),i.jsxs("button",{onClick:f,disabled:r,className:"flex items-center gap-2 px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[i.jsx(df,{className:"h-4 w-4"}),r?"Saving...":"Save Evening Entry"]})]}),i.jsxs("div",{className:"text-xs text-gray-500 bg-gray-800/50 p-4 rounded-lg space-y-2",children:[i.jsx("p",{children:i.jsx("strong",{children:" Evening Reflection Tips:"})}),i.jsx("p",{children:" Celebrate your wins, no matter how small"}),i.jsx("p",{children:" Learn from challenges without self-judgment"}),i.jsx("p",{children:" Practice gratitude to end the day positively"}),i.jsx("p",{children:" Set clear intentions for tomorrow"})]})]})}function s4(){const{loadEntries:e,getEntryByDate:t,createOrUpdateMorningEntry:r,createOrUpdateEveningEntry:n,setSelectedDate:s,setActiveTab:a,clearError:o}=jc(),l=QC(),c=JC(),u=XC(),[d,f]=k.useState(!1);k.useEffect(()=>{(async()=>{await e(),f(!0)})()},[e]);const h=t(l.selectedDate),m=()=>{const b=Tt($f(new Date(l.selectedDate),1),"yyyy-MM-dd");s(b)},x=()=>{const b=Tt(mv(new Date(l.selectedDate),1),"yyyy-MM-dd");s(b)},y=()=>{s(Gl())},w=l.selectedDate===Gl(),g=new Date(l.selectedDate)>new Date,p=async b=>{await r(l.selectedDate,b)},v=async b=>{await n(l.selectedDate,b)};return d?i.jsx("div",{className:"min-h-screen bg-gray-900 pb-20 pt-16",children:i.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 bg-blue-500/20 rounded-lg",children:i.jsx($0,{className:"h-6 w-6 text-blue-500"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Daily Journal"}),i.jsx("p",{className:"text-sm text-gray-400",children:"Reflect, plan, and grow every day"})]})]}),u&&i.jsx("div",{className:"mb-6 p-4 bg-red-500/20 border border-red-500/50 rounded-lg",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-red-400",children:u}),i.jsx("button",{onClick:o,className:"text-red-400 hover:text-red-300 text-sm",children:"Dismiss"})]})}),i.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("button",{onClick:m,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors",children:i.jsx(Mk,{className:"h-5 w-5"})}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"flex items-center gap-2 text-white font-medium",children:[i.jsx(Je,{className:"h-4 w-4 text-green-500"}),sp(l.selectedDate)]}),i.jsx("div",{className:"text-xs text-gray-400 mt-1",children:Tt(new Date(l.selectedDate),"EEEE")})]}),!w&&i.jsx("button",{onClick:y,className:"px-3 py-1 bg-green-600 text-white text-xs rounded-lg hover:bg-green-700 transition-colors",children:"Today"})]}),i.jsx("button",{onClick:x,disabled:g,className:"p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i.jsx(M0,{className:"h-5 w-5"})})]})}),i.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-400",children:["Entry Status for ",sp(l.selectedDate)]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${h!=null&&h.morningEntry?"bg-green-500/20 text-green-400":"bg-gray-600/20 text-gray-500"}`,children:["Morning ",h!=null&&h.morningEntry?"":""]}),i.jsxs("div",{className:`px-2 py-1 rounded-full text-xs ${h!=null&&h.eveningEntry?"bg-purple-500/20 text-purple-400":"bg-gray-600/20 text-gray-500"}`,children:["Evening ",h!=null&&h.eveningEntry?"":""]})]})]})}),i.jsxs("div",{className:"flex bg-gray-800 rounded-lg p-1 mb-6",children:[i.jsx("button",{onClick:()=>a("morning"),className:`flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-colors ${l.activeTab==="morning"?"bg-yellow-500/20 text-yellow-400":"text-gray-400 hover:text-white"}`,children:" Morning Standup"}),i.jsx("button",{onClick:()=>a("evening"),className:`flex-1 py-3 px-4 rounded-lg text-sm font-medium transition-colors ${l.activeTab==="evening"?"bg-purple-500/20 text-purple-400":"text-gray-400 hover:text-white"}`,children:" Evening Reflection"})]}),g&&i.jsx("div",{className:"bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-4 mb-6",children:i.jsx("p",{className:"text-yellow-400 text-sm",children:" You're viewing a future date. Journal entries are typically made for today or past dates."})}),i.jsx("div",{className:"bg-gray-800 rounded-lg p-6",children:l.activeTab==="morning"?i.jsx(t4,{entry:h==null?void 0:h.morningEntry,onSave:p,isLoading:c}):i.jsx(n4,{entry:h==null?void 0:h.eveningEntry,onSave:v,isLoading:c})}),h&&i.jsxs("div",{className:"mt-6 bg-gray-800 rounded-lg p-4",children:[i.jsx("h3",{className:"text-sm font-medium text-white mb-3",children:"Entry Summary"}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[h.morningEntry&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"text-lg font-bold text-yellow-400",children:[h.morningEntry.mood,"/5"]}),i.jsx("div",{className:"text-xs text-gray-400",children:"Morning Mood"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[h.morningEntry.energy,"/5"]}),i.jsx("div",{className:"text-xs text-gray-400",children:"Energy Level"})]})]}),h.eveningEntry&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[i.jsxs("div",{className:"text-lg font-bold text-green-400",children:[h.eveningEntry.productivity,"/5"]}),i.jsx("div",{className:"text-xs text-gray-400",children:"Productivity"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"text-lg font-bold text-purple-400",children:[h.eveningEntry.satisfaction,"/5"]}),i.jsx("div",{className:"text-xs text-gray-400",children:"Satisfaction"})]})]})]})]})]})}):i.jsx("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-400",children:"Loading journal..."})]})})}const a4=[...q2,{path:"/",element:i.jsx(B2,{children:i.jsx(lE,{})}),children:[{index:!0,element:i.jsx(Qg,{})},{path:"dashboard",element:i.jsx(Qg,{})},{path:"health",element:i.jsx(LE,{})},{path:"todo",element:i.jsx(XE,{})},{path:"goals",element:i.jsx(JE,{})},{path:"journal",element:i.jsx(s4,{})},{path:"notes",element:i.jsx(tT,{})}]}];function i4(){return W1(a4)}async function o4(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.getRegistrations();await Promise.all(e.filter(t=>t.scope===`${location.origin}/`).map(t=>t.unregister()))}catch(e){console.warn("Failed to unregister legacy root-scoped Service Worker",e)}}cE();ZE();o4();const l4="/PerfectZenkai/";Su.createRoot(document.getElementById("root")).render(i.jsx(xp.StrictMode,{children:i.jsx(Nk,{basename:l4,children:i.jsx(i4,{})})}));export{Pl as A,$ as B,G as C,zk as E,z0 as I,w4 as L,vd as M,Ot as P,dn as S,Ue as T,dE as W,qi as Z,Of as a,q as b,F as c,me as d,ge as e,ee as f,ji as g,_E as h,NE as i,i as j,de as k,Oi as l,St as m,jE as n,Wi as o,te as p,lf as q,k as r,$2 as s,W2 as t,Lt as u,z2 as v,xe as w,fe as x,Jk as y};
