---
description: 
globs: 
alwaysApply: false
---
# MVP Template & Documentation Standards

## Rule Type
**Auto-Attach:** `docs/mvp-*.md`

## Purpose
Template and standards for creating MVP documents with TDD and Vertical Slice approach for Perfect Zenkai project.

## When This Rule Applies
- Creating new MVP documentation files
- Updating existing MVP documents
- Planning MVP implementation phases
- Documenting TDD progress and results

## MVP Document Structure

### Required Header Format
```markdown
# MVP X â€” Feature Name

**Status:** ðŸ”´ Not Started | ðŸŸ¡ In Progress | âœ… Complete  
**Sprint:** Sprint Name  
**Estimated Effort:** X-Y hours (including TDD time)  
**Dependencies:** MVP Dependencies  
**Last Updated:** [Date]  
**TDD Progress:** RED â­• | GREEN â­• | REFACTOR â­•


---

## ðŸ“‹ Sprint Overview

Brief description of what this MVP delivers from a user perspective.

### Success Criteria
- âœ… Functional requirement 1
- âœ… Functional requirement 2
- âœ… All tests pass (â‰¥90% coverage)
- âœ… E2E workflows complete successfully
- âœ… Performance benchmarks met (Lighthouse â‰¥90)

### Vertical Slice Delivered
**Complete User Journey:** [Describe end-to-end user value]

**Slice Components:**
- ðŸŽ¨ **UI Layer:** [React components and user interactions]
- ðŸ§  **Business Logic:** [Zustand store and state management]
- ðŸ’¾ **Data Layer:** [Dexie repository and data persistence]
- ðŸ”§ **Type Safety:** [TypeScript interfaces and types]
- ðŸ§ª **Test Coverage:** [Unit, integration, component, e2e tests]
```

### Required Task Structure
```markdown
### X.1 Primary Feature

**Priority:** P0 (Blocker) | P1 (High) | P2 (Medium) | P3 (Low)  
**Story Points:** X  
**Status:** ðŸ”´ Not Started | ðŸŸ¡ In Progress | âœ… Complete  
**TDD Phase:** RED â­• | GREEN â­• | REFACTOR â­•

**User Story:** _As a [user type], I want [goal] so that [benefit]._

**Acceptance Criteria:**
- âœ… Functional requirement 1
- âœ… Functional requirement 2
- âœ… All tests written and passing
- âœ… Code coverage â‰¥90%
- âœ… Performance benchmarks met
- âœ… Mobile UX optimized

**Test Plan:**

**Unit Tests:**
- âœ… Store actions and state management
- âœ… Repository CRUD operations
- âœ… Utility functions and helpers
- âœ… Error handling scenarios

**Integration Tests:**
- âœ… Store + Repository data flow
- âœ… Component + Store interactions
- âœ… Offline/online state transitions
- âœ… Cross-module boundaries

**Component Tests:**
- âœ… User interactions (clicks, inputs, forms)
- âœ… Error states and validation
- âœ… Loading states and feedback
- âœ… Responsive behavior

**E2E Tests:**
- âœ… Complete user workflow on mobile (375Ã—667)
- âœ… Offline functionality
- âœ… Performance under load
- âœ… Cross-browser compatibility

**TDD Implementation Results:**

**RED Phase (Failing Tests):**
```typescript
// âœ… Completed - All tests written first
test('should [describe behavior]', () => {
  // Test implementation
})
```

**GREEN Phase (Minimal Implementation):**
```typescript
// âœ… Completed - Working implementation
// Implementation structure and key components
```

**REFACTOR Phase (Clean & Polish):**
- âœ… Enhanced [specific improvements]
- âœ… Improved [performance/UX aspects]
- âœ… Advanced [additional features]
- âœ… Optimized [technical aspects]
- âœ… Comprehensive [quality aspects]

**Performance Requirements:**
- âœ… [Specific metric]: <Xms
- âœ… [Another metric]: <Yms

**Definition of Done:**
- [x] TDD cycle completed (RED â†’ GREEN â†’ REFACTOR) âœ…
- [x] All acceptance criteria met âœ…
- [x] All tests pass (unit, integration, component, e2e) âœ…
- [x] Code coverage â‰¥90% âœ…
- [x] Performance requirements met âœ…
```

## Required Sections

### Design Decisions
```markdown
## ðŸ—ï¸ Design Decisions

### Architecture Strategy
**Decision 1: [Technology/Pattern Choice]**
- **Problem:** [What problem does this solve?]
- **Solution:** [Chosen approach]
- **Alternatives Considered:** [Other options evaluated]
- **Rationale:** [Why this choice was made]
- **Test Impact:** [How this affects testing strategy]

### Technology Choices
**Decision 2: [Technical Choice]**
- **Problem:** [Technical challenge]
- **Solution:** [Chosen technology/approach]
- **Trade-offs:** [What we gain/lose]
- **Future Impact:** [How this affects future development]
```

### Progress Tracking
```markdown
## ðŸ“Š Progress Tracking

### Sprint Velocity
- **Planned Story Points:** X
- **Completed Story Points:** Y
- **Sprint Progress:** Z% âœ…
- **TDD Cycle Efficiency:** [Percentage] (excellent RED/GREEN/REFACTOR distribution)

### Task Status
| Task | Status | TDD Phase | Assignee | Est Hours | Actual Hours | Test Coverage |
|------|--------|-----------|----------|-----------|--------------|---------------|
| X.1 Feature | âœ… Complete | RED âœ… GREEN âœ… REFACTOR âœ… | AI Agent | Xh | Yh | Z% |

### Test Metrics
| Test Type | Written | Passing | Coverage | Performance |
|-----------|---------|---------|----------|-------------|
| Unit | X/X | X/X | Y% | <Zms |
| Integration | A/A | A/A | B% | <Cms |
| Component | D/D | D/D | E% | <Fms |
| E2E | G/G | G/G | 100% | <Hs |

### Quality Gates
- [x] All tests written (TDD RED phase complete) âœ…
- [x] All tests passing (TDD GREEN phase complete) âœ…
- [x] Code refactored and polished (TDD REFACTOR phase complete) âœ…
- [x] Coverage thresholds met (â‰¥90%) âœ…
- [x] Performance requirements met âœ…
- [x] Accessibility audit passed âœ…
```

### Sprint Retrospective
```markdown
## ðŸ”„ Sprint Retrospective

### What Went Well
**TDD Successes:**
- [Specific TDD benefits realized]
- [Test-first approach wins]

**Vertical Slice Benefits:**
- [End-to-end delivery successes]
- [User value delivered]

**Technical Wins:**
- [Implementation successes]
- [Performance achievements]

### What Could Be Improved
**TDD Challenges:**
- [TDD process difficulties]
- [Testing obstacles encountered]

**Process Improvements:**
- [Workflow improvements needed]
- [Tool or technique gaps]

### Action Items
- [x] Specific improvement 1 (assigned to X) âœ…
- [x] Specific improvement 2 (assigned to Y) âœ…

### TDD Metrics Analysis
**Time Distribution:**
- RED Phase: X% of development time (test writing)
- GREEN Phase: Y% of development time (implementation)
- REFACTOR Phase: Z% of development time (optimization)

**Quality Impact:**
- Bugs found by tests: X (all caught before implementation)
- Bugs found in production: 0
- Test execution time: Y seconds (within target)
```

### Test Results & Coverage
```markdown
## ðŸ“ Test Results & Coverage

### Test Execution Summary
```bash
# Commands run and results
npm run test:coverage -- [module]
# Module coverage: X%
# All tests passing: Y/Y

npm run test:e2e -- [feature]
# E2E tests passing: Z/Z

npm run lighthouse -- /[route]
# PWA Score: A/100
# Performance: B/100
# Accessibility: 100/100
```

### Coverage Report
**[Module] Coverage:** X%

| Component | Lines | Functions | Branches | Statements |
|-----------|-------|-----------|----------|------------|
| [Component 1] | X% | Y% | Z% | A% |
| [Component 2] | B% | C% | D% | E% |

### Performance Metrics
**Lighthouse Scores:**
- Performance: X/100 âœ…
- Accessibility: 100/100 âœ…
- Best Practices: Y/100 âœ…
- SEO: 100/100 âœ…
- PWA: Z/100 âœ…

**Feature Performance:**
- [Metric 1]: Xms âœ…
- [Metric 2]: Yms âœ…
```

## TDD Implementation Standards

### RED Phase Requirements
- Write failing E2E test first (complete user workflow)
- Write failing integration tests (data flow)
- Write failing unit tests (individual functions)
- All tests must fail initially
- Document test plan in MVP document

### GREEN Phase Requirements
- Implement minimal code to pass tests
- Follow established architecture patterns
- Maintain module isolation
- Focus on functionality over optimization
- Update TDD progress in documentation

### REFACTOR Phase Requirements
- Improve code quality and organization
- Optimize performance
- Enhance error handling
- Polish user experience
- Complete documentation updates

## Quality Standards

### Test Coverage Requirements
- Overall coverage: â‰¥90%
- Unit test coverage: â‰¥90%
- Integration test coverage: â‰¥85%
- Component test coverage: â‰¥90%
- E2E test coverage: 100% of user workflows

### Performance Requirements
- Lighthouse Performance: â‰¥90/100
- Lighthouse Accessibility: 100/100
- Lighthouse PWA: â‰¥90/100
- Initial load time: <2s on 3G
- Interaction response: <100ms

### Documentation Requirements
- Complete TDD progress tracking
- Detailed test plans and results
- Design decision documentation
- Sprint retrospective with metrics
- Performance and coverage reports

## File Organization

### MVP Document Location
- All MVP documents in `docs/` folder
- Naming convention: `mvp-X-feature-name.md`
- Sequential numbering for dependencies

### Implementation Structure
```
src/modules/[feature]/
â”œâ”€â”€ types.ts           # TypeScript interfaces
â”œâ”€â”€ store.ts           # Zustand slice
â”œâ”€â”€ repo.ts            # Dexie repository
â”œâ”€â”€ routes.ts          # React Router routes
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ [Feature]Page.tsx
â”œâ”€â”€ components/
â”‚   â””â”€â”€ [Feature]Component.tsx
â””â”€â”€ __tests__/
    â”œâ”€â”€ store.test.ts
    â”œâ”€â”€ repo.test.ts
    â””â”€â”€ integration.test.ts
```

## Cross-References

### MVP Linking
- Each MVP document must link to next MVP
- Maintain dependency chain documentation
- Update master MVP list when adding new MVPs

### Documentation Updates
- Update solution design when architecture changes
- Maintain consistency across all MVP documents
- Keep template updated based on learnings

## Enforcement

When working with MVP documentation:
1. **ALWAYS** follow this template structure
2. **ALWAYS** include TDD progress tracking
3. **ALWAYS** document test plans and results
4. **ALWAYS** include performance metrics
5. **ALWAYS** complete retrospective analysis
6. **NEVER** skip quality gates or coverage requirements
7. **NEVER** mark MVP complete without full documentation


